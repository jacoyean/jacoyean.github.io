System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"8b6ecrIv2lLcKw/cgAyHf/y","Config",void 0);var i=e("default",(function(){}));i.squareArr=[[[2,7,12,17,22],[10,11,12,13,14],[2,7,12,17,22],[10,11,12,13,14]],[[1,2,3,6,11],[1,6,11,12,13],[3,8,11,12,13],[1,2,3,8,13]],[[2,7,11,12,13],[3,6,7,8,13],[1,2,3,7,12],[1,6,7,8,11]],[[1,6,7,12,13],[3,7,8,11,12],[1,2,7,8,13],[2,3,6,7,11]],[[2,6,7,8,12],[2,6,7,8,12],[2,6,7,8,12],[2,6,7,8,12]],[[1,2,6,7,11],[1,2,6,7,8],[2,6,7,11,12],[1,2,3,7,8]],[[2,3,7,8,13],[1,2,3,6,7],[2,7,8,12,13],[2,3,6,7,8]],[[1,2,7,12,13],[3,6,7,8,11],[1,2,7,12,13],[3,6,7,8,11]],[[2,3,7,11,12],[1,6,7,8,13],[2,3,7,11,12],[1,6,7,8,13]],[[1,2,3,6,8],[2,3,7,12,13],[1,3,6,7,8],[1,2,7,11,12]]],i.gridSize=35,i.gridRow=20,i.gridCol=10,i.squareGridSize=5,i.squareDropSpeed=1.2,i.preSquareCount=3,r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,l,r,a,g,h,c,p,C,d,m,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,c=t.instantiate,p=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,T=t.Component}],execute:function(){var L,f,M,b,v,x,E,S,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),f=y(r),M=y(r),b=y(r),L((E=e((x=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",E,n(e)),i(e,"singleModeToggle",S,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=c(s);l.parent=this.node,l.name="Buttons";var r=c(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var T=c(this.EnableAllCompositeModeButton.getChildByName("Label"));T.setPosition(i+(u>0?450:150),n,0),T.setScale(.75,.75,.75),T.parent=r;var L=T.getComponent(p);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=a.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var f=0,M=0;M<this.strSingle.length;M++,f++){M===this.strSingle.length>>1&&(i+=200,f=0);var b=M?c(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*f,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var v=b.getComponentInChildren(C);v.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=v,this.textContentList[this.textContentList.length]=v.string,b.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=x;var E=c(this.EnableAllCompositeModeButton);E.setPosition(i+90,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.changeTextColor,this),E.parent=l,(x=E.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var S=c(this.EnableAllCompositeModeButton);S.setPosition(i+200,n,0),S.setScale(.5,.5,.5),S.on(m.EventType.CLICK,this.hideUI,this),S.parent=this.node.parent,(x=S.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=c(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?c(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(T)).prototype,"compositeModeToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(x.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(t){"use strict";var u;return{setters:[function(t){u=t.cclegacy}],execute:function(){var c,e;t({SquareDir:void 0,SquareStatus:void 0}),u._RF.push({},"211caiNc51AYYgpHVFC02zP","Enum",void 0),function(t){t[t.UP=0]="UP",t[t.LEFT=1]="LEFT",t[t.DOWN=2]="DOWN",t[t.RIGHT=3]="RIGHT",t[t.AROUND=4]="AROUND"}(c||(c=t("SquareDir",{}))),function(t){t[t.DROP=0]="DROP",t[t.STACK=1]="STACK",t[t.CLEAR=2]="CLEAR",t[t.FILL=3]="FILL",t[t.SHOW=4]="SHOW"}(e||(e=t("SquareStatus",{}))),u._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){"use strict";var e,n,c,a,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){c=t.cclegacy,a=t.EventTarget},function(t){r=t.default}],execute:function(){var A;t("EventName",void 0),c._RF.push({},"4ebf08i6F9Jyodx2bQc1nmU","EventManager",void 0),t("EventManager",function(t){function c(){return t.apply(this,arguments)||this}return e(c,t),c.on=function(t,e,n){this.eventTarget.on(t,e,n)},c.off=function(t,e,n){this.eventTarget.off(t,e,n)},c.emit=function(t){for(var e,n=arguments.length,c=new Array(n>1?n-1:0),a=1;a<n;a++)c[a-1]=arguments[a];(e=this.eventTarget).emit.apply(e,[t].concat(c))},n(c,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),c}(r)).eventTarget=new a,function(t){t.SQUARE_ActDROP="SQUARE_ActDROP",t.SQUARE_ActLEFT="SQUARE_ActLEFT",t.SQUARE_ActRIGHT="SQUARE_ActRIGHT",t.SQUARE_ActROTATE="SQUARE_ActROTATE",t.SQUARE_ActFALLDOWN="SQUARE_ActFALLDOWN",t.SQUARE_DESTROY="SQUARE_DESTROY",t.SQUARE_UpdateSHAPE="SQUARE_UpdateSHAPE"}(A||(A=t("EventName",{}))),c._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./SquareItem.ts","./EventManager.ts","./Utils.ts","./Enum.ts","./ResUtils.ts"],(function(r){"use strict";var e,t,a,n,u,i,o,s,c,l,h,f,p,d,S,q,m,g,A,v;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,a=r.initializerDefineProperty,n=r.assertThisInitialized,u=r.asyncToGenerator,i=r.regeneratorRuntime},function(r){o=r.cclegacy,s=r._decorator,c=r.Node,l=r.Prefab,h=r.log,f=r.Component},function(r){p=r.default},function(r){d=r.SquareItem},function(r){S=r.EventManager,q=r.EventName},function(r){m=r.default},function(r){g=r.SquareDir,A=r.SquareStatus},function(r){v=r.default}],execute:function(){var b,N,I,D,R,k,C,E;r({GameStatus:void 0,SquareDropSpeed:void 0}),o._RF.push({},"757d5mO2z1DBYnu9U1AIW33","GameManager",void 0);var w,x,y=s.ccclass,G=s.property;r("GameManager",(b=y("GameManager"),N=G({type:c,displayName:"方块父节点"}),I=G({type:l,displayName:"方块预制体"}),b(((E=function(r){function e(){for(var e,t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];return e=r.call.apply(r,[this].concat(u))||this,a(e,"nodeSquareParent",k,n(e)),a(e,"prafabSquare",C,n(e)),e.gameStatus=void 0,e.allSquareNodeArr=[],e.curSquareNodeArr=[],e.curSquareDir=void 0,e.curSquareID=void 0,e.squareIdArr=[],e.timer=0,e}t(e,r);var o=e.prototype;return o.onLoad=function(){e.Instance=this,p.squareDropSpeed=x.NORMAL,this.gameStatus=w.BEGIN},o.start=function(){this.createSquareItem()},o.update=function(r){this.gameStatus===w.BEGIN&&(this.timer+=r,this.timer<p.squareDropSpeed||(h("打印"),this.timer=0,this.playSquareDrop()))},o.createSquareItem=function(){var r=this;this.updateRandomSquareIdArr(),this.curSquareNodeArr=[],this.curSquareDir=g.UP,v.createSquareItem(this.curSquareID,this.nodeSquareParent,this.prafabSquare).forEach((function(e){r.curSquareNodeArr.push(e)}))},o.playSquareDrop=function(){var r=u(i().mark((function r(){var e,t;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==this.curSquareNodeArr.length){r.next=2;break}return r.abrupt("return");case 2:if(!this.isTouchBottom(this.curSquareNodeArr)){r.next=20;break}h("停止下降"),e=0;case 6:if(!(e<this.curSquareNodeArr.length)){r.next=16;break}if((t=this.curSquareNodeArr[e].getComponent(d)).status=A.STACK,this.allSquareNodeArr.push(t.node),!(t.row>p.gridRow-1)){r.next=13;break}return this.gameStatus=w.END,r.abrupt("return");case 13:e++,r.next=6;break;case 16:return r.next=18,this.clearSquare();case 18:return this.createSquareItem(),r.abrupt("return");case 20:S.emit(q.SQUARE_ActDROP);case 21:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.clearSquare=function(){var r=u(i().mark((function r(){var e,t,a,n,u,o,s,c,l,h,f,m,g,v;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=[[]],t=[],a=0,r.t0=i().keys(this.allSquareNodeArr);case 4:if((r.t1=r.t0()).done){r.next=14;break}if(n=r.t1.value,s=null==(u=this.allSquareNodeArr[n])?void 0:u.getComponent(d)){r.next=9;break}return r.abrupt("continue",4);case 9:c=s.row,l={itemComp:s,id:n},null!=(o=e[c])&&o.length?(e[c].push(l),e[c].length>=p.gridCol&&(a++,e[c].forEach((function(r){var e=r.itemComp;t.push(e.node)})))):(e[c]=[],e[c][0]=l),r.next=4;break;case 14:if(t.length){r.next=16;break}return r.abrupt("return");case 16:this.gameStatus=w.CLEAR,h=0;case 18:if(!(h<t.length)){r.next=36;break}f=t[h].getComponent(d),m=0;case 21:if(!(m<this.allSquareNodeArr.length)){r.next=33;break}if(v=null==(g=this.allSquareNodeArr[m])?void 0:g.getComponent(d)){r.next=25;break}return r.abrupt("continue",30);case 25:if(v.row!==f.row||v.col!==f.col){r.next=29;break}return v.status=A.CLEAR,this.allSquareNodeArr.splice(m,1),r.abrupt("continue",30);case 29:v.row>f.row&&(v.status=A.FILL);case 30:m++,r.next=21;break;case 33:h++,r.next=18;break;case 36:return S.emit(q.SQUARE_DESTROY),r.next=39,this.sleep(1);case 39:S.emit(q.SQUARE_ActFALLDOWN,a),this.gameStatus=w.BEGIN;case 41:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.updateRandomSquareIdArr=function(){if(this.squareIdArr.length){this.squareIdArr.splice(0,1);var r=m.random(0,p.squareArr.length-1);this.squareIdArr.push(r)}else for(var e=0;e<p.preSquareCount+1;e++){var t=m.random(0,p.squareArr.length-1);this.squareIdArr.push(t)}this.curSquareID=this.squareIdArr[0],h("预示方块组",this.squareIdArr);for(e=1;e<=p.preSquareCount;e++){var a=this.squareIdArr[e];S.emit(q.SQUARE_UpdateSHAPE,a,e)}},o.getGridAfterRotate=function(r,e,t){var a=p.squareArr[this.curSquareID][this.curSquareDir][t],n=(this.curSquareDir+1)%4,u=p.squareArr[this.curSquareID][n][t],i=v.getGridFromIndex(a),o=v.getGridFromIndex(u);return{col:r+(o.col-i.col),row:e+(o.row-i.row)}},o.isTouchSquare=function(r){if(0===this.allSquareNodeArr.length)return!1;for(var e=p.gridCol,t=0;t<this.curSquareNodeArr.length;t++)for(var a=this.curSquareNodeArr[t].getComponent(d),n=a.row*e+a.col,u=0;u<this.allSquareNodeArr.length;u++){var i;if(this.allSquareNodeArr[u].isValid){var o=null==(i=this.allSquareNodeArr[u])?void 0:i.getComponent(d);if(o){var s=o.row*e+o.col,c=n-e===s,l=n-1===s&&a.col>0,h=n+1===s&&a.col<e-1;switch(r){case g.DOWN:if(c)return!0;break;case g.LEFT:if(l)return!0;break;case g.RIGHT:if(h)return!0;break;case g.AROUND:if(c)return!0;if(l)return!0;if(h)return!0;if(n+e===s)return!0}}}}return!1},o.isTouchBottom=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(d).row<=0){e=!0;break}}return e||(e=this.isTouchSquare(g.DOWN)),e},o.isTouchLeft=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(d).col<=0){e=!0;break}}return e||(e=this.isTouchSquare(g.LEFT)),e},o.isTouchRight=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(d).col>=p.gridCol-1){e=!0;break}}return e||(e=this.isTouchSquare(g.RIGHT)),e},o.isEnableRotate=function(r){var e=this.isTouchSquare(g.AROUND);if(!e)for(var t=0;t<r.length;t++){var a=r[t].getComponent(d),n=this.getGridAfterRotate(a.col,a.row,a.squareIndex);if(n.col>p.gridCol-1||n.col<0||n.row<0){e=!0;break}}return e},o.sleep=function(){var r=u(i().mark((function r(e){var t=this;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,a){t.scheduleOnce((function(){return r()}),e)})));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e}(f)).Instance=null,k=e((R=E).prototype,"nodeSquareParent",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(R.prototype,"prafabSquare",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=R))||D));!function(r){r[r.BEGIN=0]="BEGIN",r[r.END=1]="END",r[r.CLEAR=2]="CLEAR"}(w||(w=r("GameStatus",{}))),function(r){r[r.NORMAL=1.2]="NORMAL",r[r.QUICK=.05]="QUICK"}(x||(x=r("SquareDropSpeed",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./EventManager.ts","./Config.ts","./PreSquare.ts"],(function(e){"use strict";var n,t,r,a,o,i,u,c,s,p,l,f,d,S,h,R,m,q;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,u=e.Node,c=e.Prefab,s=e.Input,p=e.instantiate,l=e.log,f=e.Component},function(e){d=e.GameManager,S=e.SquareDropSpeed},function(e){h=e.EventManager,R=e.EventName},function(e){m=e.default},function(e){q=e.PreSquare}],execute:function(){var I,y,D,E,T,b,P,g,v;o._RF.push({},"87e0buQFbRFc4mus4jFG4+M","GameUI",void 0);var A=i.ccclass,w=i.property;e("GameUI",(I=A("GameUI"),y=w({type:u,displayName:"预示方块父节点"}),D=w({type:c,displayName:"预示方块预制体"}),E=w({type:u,displayName:"下键节点"}),I((P=n((b=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,r(n,"nodePreSquareParent",P,a(n)),r(n,"prefabPreSquare",g,a(n)),r(n,"nodeDownBtn",v,a(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){this.nodeDownBtn.on(s.EventType.TOUCH_START,this.onDownBtnTouchStart,this),this.nodeDownBtn.on(s.EventType.TOUCH_END,this.onDownBtnTouchEnd,this),this.nodeDownBtn.on(s.EventType.TOUCH_CANCEL,this.onDownBtnTouchEnd,this)},o.start=function(){this.createPreSquareItem()},o.createPreSquareItem=function(){for(var e=1;e<=m.preSquareCount;e++){var n=p(this.prefabPreSquare);n.setParent(this.nodePreSquareParent),n.getComponent(q).init(e,d.Instance.squareIdArr[e],d.Instance.prafabSquare)}},o.clickLeftBtn=function(){d.Instance.isTouchLeft(d.Instance.curSquareNodeArr)?l("左移ERROR"):h.emit(R.SQUARE_ActLEFT)},o.clickRightBtn=function(){d.Instance.isTouchRight(d.Instance.curSquareNodeArr)?l("右移ERROR"):h.emit(R.SQUARE_ActRIGHT)},o.clickRotateBtn=function(){d.Instance.isEnableRotate(d.Instance.curSquareNodeArr)?l("旋转ERROR"):(h.emit(R.SQUARE_ActROTATE),d.Instance.curSquareDir++,d.Instance.curSquareDir>=4&&(d.Instance.curSquareDir=0))},o.onDownBtnTouchStart=function(e){m.squareDropSpeed=S.QUICK},o.onDownBtnTouchEnd=function(e){m.squareDropSpeed=S.NORMAL},n}(f)).prototype,"nodePreSquareParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=n(b.prototype,"prefabPreSquare",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(b.prototype,"nodeDownBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=b))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,r,i,a,c,l,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.JsonAsset,l=t.director,s=t.Component}],execute:function(){var u,p,f,d,y,b;i._RF.push({},"e6b54aXLxZATIUy6qALPnCr","Global",void 0);var h=a.ccclass,g=a.property;t("Global",(u=h("Global"),p=g({type:c,displayName:"全局配置文件"}),u(((b=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"config",y,r(e)),e}n(e,t);var i=e.prototype;return i.onLoad=function(){e.Instance=this,l.addPersistRootNode(this.node)},i.start=function(){},i.update=function(t){},e}(s)).Instance=null,y=e((d=b).prototype,"config",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/HomeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],(function(t){"use strict";var e,n,r,o,c,a,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.log,c=t.director,a=t.Component},function(t){u=t.default}],execute:function(){var i;n._RF.push({},"e963bORr/xK3ZviKXuUkPP+","HomeManager",void 0);var s=r.ccclass;r.property,t("HomeManager",s("HomeManager")(i=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){var t=u.unique(["出行","打扫","理发","安床","祭祀","造畜稠","拆卸","出火","伐木","合嵴","开光","上梁","结婚","动土","诉讼","安葬","作灶","行丧","破土","造桥","会亲友","理发","合婚订婚","买衣服","订盟","安床","沐浴","安葬","开生坟","移柩","成人礼","成服","除服","迁坟","结婚","出行","搬新房","开业","动土","祈福","安门","修坟","上梁","谢土","打扫","装修","祭祀","造畜稠","馀事勿取","铺路","结婚","求职入学","交易","搬新房","开业","安葬","安葬","入殓","馀事勿取","成服","除服","破土","迁坟","买房","搬新房","开业","祭祀","补垣","结婚","出行","动土","祈福","安床","纳畜","祭祀","修造","拆卸","入殓","开光","破土","求子","上梁","搬家","理发","交易","搬新房","开业","作灶","伐木","掘井","沐浴","破屋","祭祀","馀事勿取","坏垣","结婚","出行","搬新房","安葬","上梁","无","大事勿用","结婚","动手术","搬家","开工开业","建房","出行上任","安葬","出行","打扫","搬家","合婚订婚","赴任","买衣服","订盟","动土","祈福","栽种","安床","纳畜","安葬","祭祀","修造","拆卸","入殓","移柩","成人礼","成服","除服","伐木","开光","破土","迁坟","上梁","竖柱","塑绘","斋醮","盖屋","治病","会亲友","合婚订婚","签订合同","交易","纳财","开业","买衣服","订盟","买车","祈福","安床","安机械","纳畜","安葬","祭祀","造畜稠","入殓","移柩","成人礼","成服","除服","迁坟","上梁","竖柱","谢土","筑堤","合帐","结婚","搬新房","赴任","治病","房屋清洁","沐浴","馀事勿取","诸事不宜","出行","合婚订婚","订盟","祈福","安葬","入殓","移柩","结网","立碑","破土","斋醮","搬新房","作灶","出行","沐浴","祭祀","成人礼","馀事勿取","收养子女","结婚","动土","安葬","作灶","结婚","搬家","美甲浴足","理发","求职入学","合婚订婚","搬新房","赴任","买衣服","订盟","祈福","沐浴","安葬","祭祀","治病","拆卸","入殓","修坟","移柩","成人礼","安香","开光","破土","迁坟","塑绘","谢土","斋醮","作梁","开业","出行","搬家","签订合同","交易","搬新房","纳财","开业","安床","纳畜","安葬","挂匾","入殓","移柩","开光","结婚","买房","动土","祈福","栽种","祭祀","作灶","破土","结婚","出行","打扫","搬家","搬新房","动土","祈福","栽种","安床","纳畜","安葬","祭祀","修造","拆卸","入殓","成服","出火","除服","收养子女","开光","立碑","求子","打扫","安床","纳畜","安葬","修造","拆卸","入殓","开光","迁坟","结婚","搬家","搬新房","开业","动土","栽种","分居","作灶","安香","出火","掘井","破土","破屋","馀事勿取","坏垣","结婚","出行","打扫","搬家","签订合同","交易","搬新房","纳财","开业","动土","栽种","安床","纳畜","挂匾","祭祀","修造","拆卸","出火","开光","安葬","探病","会亲友","打扫","理发","祈福","栽种","纳畜","安葬","祭祀","牧养","修坟","开光","立碑","迁坟","求子","出行","搬家","搬新房","赴任","诉讼","作灶","沐浴","祭祀","入殓","移柩","成服","除服","结网","结婚","交易","开业","出货财","安床","安葬","作灶","修坟","打扫","馀事勿取","安床","祭祀","入殓","移柩","补垣","开池","破土","迁坟","结婚","搬家","搬新房","开业","作灶","出火","收养子女","掘井","开光","沐浴","祭祀","结婚","出行","打扫","搬家","搬新房","动土","栽种","纳畜","安葬","修造","拆卸","成服","出火","除服","收养子女","掘井","开光","买房","安床","会亲友","理发","买衣服","安床","安门","结网","开光","结婚","出行","搬家","搬新房","动土","祈福","栽种","安葬","成人礼","出火","伐木","上梁","结婚","出行","搬家","签订合同","交易","搬新房","开业","动土","栽种","安床","修造","拆卸","出火","开光","上梁","祈福","祭祀","作灶","伐木","掘井","谢土","结婚","出行","搬家","签订合同","交易","搬新房","开业","祈福","安床","安葬","挂匾","祭祀","拆卸","出火","伐木","开光","求子","买房","栽种","掘井","打扫","美甲浴足","理发","祭祀","收养子女","针灸","结婚","出行","搬家","搬新房","开业","动土","安葬","修造","作灶","掘井","开池","破土","上梁","造船"]),e="";t.forEach((function(t){e+=t+","})),o(e)},r.update=function(t){},r.clickStartBtn=function(){c.loadScene("Game")},n}(a))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Config.ts","./Global.ts","./Enum.ts","./ResUtils.ts","./Singleton.ts","./Utils.ts","./EventManager.ts","./GameManager.ts","./GameUI.ts","./PreSquare.ts","./SquareItem.ts","./HomeManager.ts","./debug-view-runtime-control.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PreSquare.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./EventManager.ts","./SquareItem.ts","./ResUtils.ts","./Config.ts"],(function(e){"use strict";var t,r,n,a,i,o,u,s,c,f,l,p,S,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,u=e.Node,s=e.Component},function(e){c=e.SquareStatus},function(e){f=e.EventManager,l=e.EventName},function(e){p=e.SquareItem},function(e){S=e.default},function(e){h=e.default}],execute:function(){var d,q,P,v,E;i._RF.push({},"1016bAdMahJrIkfEcrsoUV7","PreSquare",void 0);var m=o.ccclass,y=o.property;e("PreSquare",(d=m("PreSquare"),q=y({type:u,displayName:"方块父节点"}),d((E=t((v=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"nodeSquareParent",E,a(t)),t.index=void 0,t}r(t,e);var i=t.prototype;return i.onEnable=function(){f.on(l.SQUARE_UpdateSHAPE,this.refreshPreSquareShape,this)},i.onDisable=function(){f.off(l.SQUARE_UpdateSHAPE,this.refreshPreSquareShape)},i.init=function(e,t,r){this.index=e,S.createSquareItem(t,this.nodeSquareParent,r,h.squareGridSize,h.squareGridSize).forEach((function(e){e.getComponent(p).status=c.SHOW}))},i.refreshPreSquareShape=function(e,t){var r;this.index===t&&(null==(r=this.nodeSquareParent.children)||r.forEach((function(t,r){t.getComponent(p).updateShape(e,r)})))},t}(s)).prototype,"nodeSquareParent",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=v))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/ResUtils.ts",["cc","./Config.ts","./Enum.ts","./SquareItem.ts"],(function(r){"use strict";var i,t,e,o,n,u;return{setters:[function(r){i=r.cclegacy,t=r.Vec3,e=r.instantiate},function(r){o=r.default},function(r){n=r.SquareDir},function(r){u=r.SquareItem}],execute:function(){i._RF.push({},"5130aJqVv1GWLurgC5/EVY7","ResUtils",void 0);r("default",function(){function r(){}return r.createSquareItem=function(r,i,t,d,a){var s=this;void 0===d&&(d=o.gridCol),void 0===a&&(a=o.gridRow);for(var c=[],g=function(r,o){var n=e(t);n.setParent(i);var c=s.getSquarePosFromGrid(r,d,a);return n.setPosition(c),n.getComponent(u).init(r,o),n},f=0;f<o.squareGridSize;f++){var v=o.squareArr[r][n.UP],S=g(this.getSquareBirthGridID(v[f],d,a),f);c.push(S)}return c},r.getSquarePosFromGrid=function(r,i,e){void 0===i&&(i=o.gridCol),void 0===e&&(e=o.gridRow);var n=-(i-1)/2*o.gridSize,u=-(e-1)/2*o.gridSize,d=n+r[0]*o.gridSize,a=u+r[1]*o.gridSize;return new t(d,a,0)},r.getSquareBirthGridID=function(r,i,t){void 0===i&&(i=o.gridCol),void 0===t&&(t=o.gridRow);var e=this.getGridFromIndex(r);return i!==o.gridCol&&t!==o.gridRow?[e.col,e.row]:[e.col+Math.floor((i-o.squareGridSize)/2),e.row+t]},r.getGridFromIndex=function(r,i){return void 0===i&&(i=o.squareGridSize),{col:r%i,row:Math.floor(r/i)}},r}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"ce17crKn4lNMIMTaDK0VoHO","Singleton",void 0),n("default",function(){function n(){}return n.GetInstance=function(){return null==this._instance&&(this._instance=new this),this._instance},n.destroyInstance=function(){this._instance=null},n}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/SquareItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./EventManager.ts","./Utils.ts","./ResUtils.ts","./Enum.ts","./Config.ts"],(function(t){"use strict";var o,s,i,e,n,a,r,u,h,c,l,f;return{setters:[function(t){o=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,e=t.Component},function(t){n=t.GameManager},function(t){a=t.EventManager,r=t.EventName},function(t){u=t.default},function(t){h=t.default},function(t){c=t.SquareStatus,l=t.SquareDir},function(t){f=t.default}],execute:function(){var R;s._RF.push({},"1552adQSLxNWKyiZ0OrCi9G","SquareItem",void 0);var p=i.ccclass;i.property,t("SquareItem",p("SquareItem")(R=function(t){function s(){for(var o,s=arguments.length,i=new Array(s),e=0;e<s;e++)i[e]=arguments[e];return(o=t.call.apply(t,[this].concat(i))||this).squareIndex=void 0,o.row=void 0,o.col=void 0,o.status=void 0,o}o(s,t);var i=s.prototype;return i.start=function(){},i.onEnable=function(){a.on(r.SQUARE_ActDROP,this.playDrop,this),a.on(r.SQUARE_ActLEFT,this.playMoveToLeft,this),a.on(r.SQUARE_ActRIGHT,this.playMoveToRight,this),a.on(r.SQUARE_ActROTATE,this.playRotate,this),a.on(r.SQUARE_DESTROY,this.playDestroy,this),a.on(r.SQUARE_ActFALLDOWN,this.playFallDown,this)},i.onDisable=function(){a.off(r.SQUARE_ActDROP,this.playDrop),a.off(r.SQUARE_ActLEFT,this.playMoveToLeft),a.off(r.SQUARE_ActRIGHT,this.playMoveToRight),a.off(r.SQUARE_ActROTATE,this.playRotate),a.off(r.SQUARE_DESTROY,this.playDestroy),a.off(r.SQUARE_ActFALLDOWN,this.playFallDown)},i.init=function(t,o,s){void 0===s&&(s=c.DROP),this.col=t[0],this.row=t[1],this.squareIndex=o,this.status=s},i.setCurPostion=function(t,o){void 0===t&&(t=f.gridCol),void 0===o&&(o=f.gridRow);var s=h.getSquarePosFromGrid([this.col,this.row],t,o);this.node.setPosition(s)},i.updateShape=function(t,o){if(this.status===c.SHOW&&this.squareIndex===o){var s=f.squareArr[t][l.UP][o],i=h.getGridFromIndex(s,f.squareGridSize);this.col=i.col,this.row=i.row,this.setCurPostion(f.squareGridSize,f.squareGridSize)}},i.playDrop=function(){this.status===c.DROP&&(this.row--,this.setCurPostion())},i.playRotate=function(){if(this.status===c.DROP){var t=n.Instance.getGridAfterRotate(this.col,this.row,this.squareIndex);this.col=t.col,this.row=t.row,this.setCurPostion()}},i.playMoveToLeft=function(){this.status===c.DROP&&(this.col--,this.setCurPostion())},i.playMoveToRight=function(){this.status===c.DROP&&(this.col++,this.setCurPostion())},i.playDestroy=function(t){var o=this;this.status===c.CLEAR&&u.finishAnimation(this.node,"squareClear",(function(){o.node.destroy(),t&&t()}))},i.playFallDown=function(t){this.status===c.FILL&&(this.row-=t,this.setCurPostion(),this.status=c.STACK)},s}(e))||R);s._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(n){"use strict";var t,o,e,i;return{setters:[function(n){t=n.cclegacy,o=n.Node,e=n.Animation,i=n.Component}],execute:function(){t._RF.push({},"50bd36z49RPg4nJilc3sz6g","Utils",void 0);n("default",function(){function n(){}return n.random=function(n,t){var o=Math.random()*(t-n+1)+n;return Math.floor(o)},n.unique=function(n){var t=new Set(n);return Array.from(t)},n.playAnimation=function(n,t){n instanceof o?n.getComponent(e).play(t):n instanceof i&&n.node.getComponent(e).play(t)},n.finishAnimation=function(n,t,c){var a;n instanceof o?a=n.getComponent(e):n instanceof i&&(a=n.node.getComponent(e)),a.play(t),a.once("finished",(function(){c&&c()}),this)},n}());t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});