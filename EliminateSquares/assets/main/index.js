System.register("chunks:///_virtual/AchiBaubleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResUtils.ts","./Utils.ts","./Config.ts","./Enum.ts","./EventManager.ts"],(function(t){"use strict";var e,i,n,o,a,s,r,c,u,d,l,h,f,p,b,I,g,m,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass,s=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){c=t.cclegacy,u=t._decorator,d=t.Node,l=t.Vec3,h=t.UITransform,f=t.Component},function(t){p=t.default},function(t){b=t.default},function(t){I=t.default},function(t){g=t.FurnitureEditStatus},function(t){m=t.EventManager,E=t.EventName}],execute:function(){var S,y,w,v,C,N,T,B,k,z,A,U,D,G,R;c._RF.push({},"020b6eX+8xBY56rmSp6dpk8","AchiBaubleItem",void 0);var _=u.ccclass,x=u.property;t("AchiBaubleItem",(S=_("AchiBaubleItem"),y=x({type:d,displayName:"成就物品图片节点"}),w=x({type:d,displayName:"物品阴影节点"}),v=x({type:d,displayName:"占位格节点"}),C=x({type:d,displayName:"编辑UI父节点"}),N=x({type:d,displayName:"编辑翻转按钮节点"}),T=x({type:d,displayName:"编辑确认按钮节点"}),S((z=e((k=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"nodeImg",z,o(e)),n(e,"nodeShadow",A,o(e)),n(e,"nodeGridHolder",U,o(e)),n(e,"nodeEditUI",D,o(e)),n(e,"nodeEditTurn",G,o(e)),n(e,"nodeEditAck",R,o(e)),e._achiID=void 0,e.achiStage=void 0,e.achiName=void 0,e.achiInfo={},e.baubleInfo={face:1,pos:new l(0,0,0)},e.status=void 0,e.isEnableEditAck=void 0,e}i(e,t);var c=e.prototype;return c.start=function(){},c.init=function(){var t=s(r().mark((function t(e,i){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.achiID=e,this.achiStage=i,this.achiName=b.numToLetterCase(this.achiID,!1),this.achiInfo=I.achiConfig[e],t.next=6,this.setBaubleSprite();case 6:this.setBaubleSize(),this.setStatus(g.INIT),this.baubleInfo.pos=this.node.getPosition();case 9:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),c.setBaubleSprite=function(){var t=s(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.achiName+this.achiStage,p.setAchiBaubleSprite(this.nodeImg,e),p.setAchiBaubleSprite(this.nodeShadow,e);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.setBaubleSize=function(){var t=this.getGridColRow(),e=t.colCount*I.wallGridSize,i=t.rowCount*I.wallGridSize;b.setSize(this.node,e,i),b.setSize(this.nodeGridHolder,e,i)},c.getGridColRow=function(){var t=this.achiStage<0?0:this.achiStage;return{colCount:Number(this.achiInfo.gridCountX[t]),rowCount:Number(this.achiInfo.gridCountY[t])}},c.setStatus=function(t){this.status=t;var e=t===g.EDIT;this.nodeShadow.active=e,this.nodeGridHolder.active=e;var i=this.node.parent.children.length;this.node.setSiblingIndex(e?i:this.achiID),this.showEditUI(e),b.playAnimation(this.node,e?"editBegan":"editEnd")},c.setEditStatus=function(t){this.isEnableEditAck=t,b.setMaterial(this.nodeEditTurn,!t),b.setMaterial(this.nodeEditAck,!t),b.setColor(this.nodeGridHolder,t?"#B9F79778":"#F7979778")},c.showEditUI=function(t){if(this.nodeEditUI.active=t,t){var e=(this.node.getComponent(h).contentSize.height+this.nodeEditUI.getComponent(h).contentSize.height)/2+20;this.nodeEditUI.setPosition(0,-e,0)}},c.onEditCancelBtnClick=function(){p.showToastWnd("已取消本次编辑"),this.nodeImg.setScale(this.baubleInfo.face,1),this.nodeShadow.setScale(this.baubleInfo.face,1),this.node.setPosition(this.baubleInfo.pos),this.setStatus(g.INIT),m.emit(E.FURNITUREE_EditEnd)},c.onEditTurnBtnClick=function(){if(this.isEnableEditAck){var t=-1*this.nodeImg.getScale().x;this.nodeImg.setScale(t,1),this.nodeShadow.setScale(t,1)}else p.showToastWnd("请放至正确位置")},c.onEditAckBtnClick=function(){this.isEnableEditAck?(p.showToastWnd("编辑物品成功"),this.baubleInfo.face=this.node.getScale().x,this.baubleInfo.pos=this.node.getPosition(),this.setStatus(g.INIT),m.emit(E.FURNITUREE_EditEnd)):p.showToastWnd("请放至正确位置")},a(e,[{key:"achiID",get:function(){return this._achiID},set:function(t){this._achiID=t}}]),e}(f)).prototype,"nodeImg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(k.prototype,"nodeShadow",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(k.prototype,"nodeGridHolder",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(k.prototype,"nodeEditUI",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(k.prototype,"nodeEditTurn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(k.prototype,"nodeEditAck",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=k))||B));c._RF.pop()}}}));

System.register("chunks:///_virtual/AchiWall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Utils.ts","./AchiBaubleItem.ts"],(function(e){"use strict";var t,n,i,r,a,o,l,u,c,s,f,b,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,u=e.Prefab,c=e.instantiate,s=e.Vec3,f=e.Component},function(e){b=e.default},function(e){p=e.default},function(e){h=e.AchiBaubleItem}],execute:function(){var d,m,v,y,g,P,B,w;a._RF.push({},"7b121nEjrZEBYnvjG4b/LPb","AchiWall",void 0);var A=o.ccclass,z=o.property;e("AchiWall",(d=A("AchiWall"),m=z({type:l,displayName:"成就物品父节点"}),v=z({type:u,displayName:"成就物品预制体"}),d(((w=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"nodeBaubleParent",P,r(t)),i(t,"prefabBauble",B,r(t)),t.baubleInfoArr=[],t}n(t,e);var a=t.prototype;return a.onLoad=function(){t.Instance=this},a.start=function(){this.createBauble()},a.createBauble=function(){for(var e=0;e<b.achiConfig.length;e++){var t=c(this.prefabBauble);t.setParent(this.nodeBaubleParent);var n=p.numToLetterCase(e,!1);t.name=n;var i=b.achiConfig[e],r=new s(Number(i.initPosX),Number(i.initPosY));t.setPosition(r),t.getComponent(h).init(e,-1);var a={name:n,pos:t.getPosition()};this.baubleInfoArr.push(a)}},a.getFurPosFromGrid=function(e,t){var n=-7*b.wallGridSize,i=-3.5*b.wallGridSize,r=n+e*b.wallGridSize,a=i+t*b.wallGridSize;return new s(r,a,0)},t}(f)).Instance=null,P=t((g=w).prototype,"nodeBaubleParent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(g.prototype,"prefabBauble",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(i){"use strict";var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"8b6ecrIv2lLcKw/cgAyHf/y","Config",void 0);var o=i("default",(function(){}));o.isEnableConsoleLog=!0,o.wallGridSize=40,o.signConfig=[],o.taskConfig=[],o.taskDailyCount=5,o.achiWallgridRow=8,o.achiWallgridCol=15,o.achiStageCount=5,o.chooseAchiID=0,o.achiConfig=[],o.addFavorCount=3,o.squareArr=[[[2,7,12,17,22],[10,11,12,13,14],[2,7,12,17,22],[10,11,12,13,14]],[[1,2,3,6,11],[1,6,11,12,13],[3,8,11,12,13],[1,2,3,8,13]],[[2,7,11,12,13],[3,6,7,8,13],[1,2,3,7,12],[1,6,7,8,11]],[[1,6,7,12,13],[3,7,8,11,12],[1,2,7,8,13],[2,3,6,7,11]],[[2,6,7,8,12],[2,6,7,8,12],[2,6,7,8,12],[2,6,7,8,12]],[[1,2,6,7,11],[1,2,6,7,8],[2,6,7,11,12],[1,2,3,7,8]],[[2,3,7,8,13],[1,2,3,6,7],[2,7,8,12,13],[2,3,6,7,8]],[[1,2,7,12,13],[3,6,7,8,11],[1,2,7,12,13],[3,6,7,8,11]],[[2,3,7,11,12],[1,6,7,8,13],[2,3,7,11,12],[1,6,7,8,13]],[[1,2,3,6,8],[2,3,7,12,13],[1,3,6,7,8],[1,2,7,11,12]]],o.gridSize=35,o.gridRow=20,o.gridCol=10,o.squareGridSize=5,o.squareDropSpeed=1.2,o.preSquareCount=3,e._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8fe5beNbBFEhIWe41Mg5Vew","Constant",void 0);var n=e("Constant",(function(){}));n.bundleName="BundleResource",n.suffixSpriteFrame="/spriteFrame",n.wndTexturePath="WndTexture/",n.spriteAchiIconPath=n.wndTexturePath+"wndAchi/achiIcon/",t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,l,r,a,g,h,c,p,C,d,m,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,c=t.instantiate,p=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,T=t.Component}],execute:function(){var L,f,M,b,v,x,E,S,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),f=y(r),M=y(r),b=y(r),L((E=e((x=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",E,n(e)),i(e,"singleModeToggle",S,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=c(s);l.parent=this.node,l.name="Buttons";var r=c(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var T=c(this.EnableAllCompositeModeButton.getChildByName("Label"));T.setPosition(i+(u>0?450:150),n,0),T.setScale(.75,.75,.75),T.parent=r;var L=T.getComponent(p);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=a.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var f=0,M=0;M<this.strSingle.length;M++,f++){M===this.strSingle.length>>1&&(i+=200,f=0);var b=M?c(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*f,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var v=b.getComponentInChildren(C);v.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=v,this.textContentList[this.textContentList.length]=v.string,b.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=x;var E=c(this.EnableAllCompositeModeButton);E.setPosition(i+90,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.changeTextColor,this),E.parent=l,(x=E.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var S=c(this.EnableAllCompositeModeButton);S.setPosition(i+200,n,0),S.setScale(.5,.5,.5),S.on(m.EventType.CLICK,this.hideUI,this),S.parent=this.node.parent,(x=S.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=c(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?c(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(T)).prototype,"compositeModeToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(x.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(t){"use strict";var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){var e,i,n,u,a,c,r,d;t({FurnitureEditStatus:void 0,HomeStayLocation:void 0,NodePoolName:void 0,PlayerStatus:void 0,SquareDir:void 0,SquareStatus:void 0,TouchLayerType:void 0,WndID:void 0}),o._RF.push({},"211caiNc51AYYgpHVFC02zP","Enum",void 0),function(t){t.WndTask="WndTask",t.WndAchi="WndAchi",t.WndAchiDetails="WndAchiDetails"}(e||(e=t("WndID",{}))),function(t){t.WndToast="WndToast"}(i||(i=t("NodePoolName",{}))),function(t){t[t.INDOOR=0]="INDOOR",t[t.OUTDOOR=1]="OUTDOOR"}(n||(n=t("HomeStayLocation",{}))),function(t){t[t.INIT=0]="INIT",t[t.EDIT=1]="EDIT",t[t.MOVE=2]="MOVE"}(u||(u=t("FurnitureEditStatus",{}))),function(t){t.Player="Player",t.WallDecor="WallDecor",t.AchiBauble="AchiBauble",t.UIButton="UIButton"}(a||(a=t("TouchLayerType",{}))),function(t){t.Idle="Idle",t.MoveToLeft="MoveToLeft",t.MoveToRight="MoveToRight"}(c||(c=t("PlayerStatus",{}))),function(t){t[t.UP=0]="UP",t[t.LEFT=1]="LEFT",t[t.DOWN=2]="DOWN",t[t.RIGHT=3]="RIGHT",t[t.AROUND=4]="AROUND"}(r||(r=t("SquareDir",{}))),function(t){t[t.DROP=0]="DROP",t[t.STACK=1]="STACK",t[t.CLEAR=2]="CLEAR",t[t.FILL=3]="FILL",t[t.SHOW=4]="SHOW"}(d||(d=t("SquareStatus",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){"use strict";var e,n,E,c,A;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){E=t.cclegacy,c=t.EventTarget},function(t){A=t.default}],execute:function(){var r;t("EventName",void 0),E._RF.push({},"4ebf08i6F9Jyodx2bQc1nmU","EventManager",void 0),t("EventManager",function(t){function E(){return t.apply(this,arguments)||this}return e(E,t),E.on=function(t,e,n){this.eventTarget.on(t,e,n)},E.off=function(t,e,n){this.eventTarget.off(t,e,n)},E.emit=function(t){for(var e,n=arguments.length,E=new Array(n>1?n-1:0),c=1;c<n;c++)E[c-1]=arguments[c];(e=this.eventTarget).emit.apply(e,[t].concat(E))},n(E,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),E}(A)).eventTarget=new c,function(t){t.TASK_ScrollBEGAN="TASK_ScrollBEGAN",t.TASK_ScrollENDED="TASK_ScrollENDED",t.FURNITUREE_EditEnd="FURNITUREE_EditEnd",t.SQUARE_ActDROP="SQUARE_ActDROP",t.SQUARE_ActLEFT="SQUARE_ActLEFT",t.SQUARE_ActRIGHT="SQUARE_ActRIGHT",t.SQUARE_ActROTATE="SQUARE_ActROTATE",t.SQUARE_ActFALLDOWN="SQUARE_ActFALLDOWN",t.SQUARE_DESTROY="SQUARE_DESTROY",t.SQUARE_UpdateSHAPE="SQUARE_UpdateSHAPE"}(r||(r=t("EventName",{}))),E._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./SquareItem.ts","./EventManager.ts","./Utils.ts","./Enum.ts","./ResUtils.ts"],(function(r){"use strict";var e,t,a,n,u,i,o,s,c,l,h,f,p,d,S,q,m,g,A;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,a=r.initializerDefineProperty,n=r.assertThisInitialized,u=r.asyncToGenerator,i=r.regeneratorRuntime},function(r){o=r.cclegacy,s=r._decorator,c=r.Node,l=r.Prefab,h=r.Component},function(r){f=r.default},function(r){p=r.SquareItem},function(r){d=r.EventManager,S=r.EventName},function(r){q=r.default},function(r){m=r.SquareDir,g=r.SquareStatus},function(r){A=r.default}],execute:function(){var v,b,N,I,D,R,k,C;r({GameStatus:void 0,SquareDropSpeed:void 0}),o._RF.push({},"757d5mO2z1DBYnu9U1AIW33","GameManager",void 0);var E,w,x=s.ccclass,y=s.property;r("GameManager",(v=x("GameManager"),b=y({type:c,displayName:"方块父节点"}),N=y({type:l,displayName:"方块预制体"}),v(((C=function(r){function e(){for(var e,t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];return e=r.call.apply(r,[this].concat(u))||this,a(e,"nodeSquareParent",R,n(e)),a(e,"prafabSquare",k,n(e)),e.gameStatus=void 0,e.allSquareNodeArr=[],e.curSquareNodeArr=[],e.curSquareDir=void 0,e.curSquareID=void 0,e.squareIdArr=[],e.timer=0,e}t(e,r);var o=e.prototype;return o.onLoad=function(){e.Instance=this,f.squareDropSpeed=w.NORMAL,this.gameStatus=E.BEGIN},o.start=function(){this.createSquareItem()},o.update=function(r){this.gameStatus===E.BEGIN&&(this.timer+=r,this.timer<f.squareDropSpeed||(q.consoleLog("打印"),this.timer=0,this.playSquareDrop()))},o.createSquareItem=function(){var r=this;this.updateRandomSquareIdArr(),this.curSquareNodeArr=[],this.curSquareDir=m.UP,A.createSquareItem(this.curSquareID,this.nodeSquareParent,this.prafabSquare).forEach((function(e){r.curSquareNodeArr.push(e)}))},o.playSquareDrop=function(){var r=u(i().mark((function r(){var e,t;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==this.curSquareNodeArr.length){r.next=2;break}return r.abrupt("return");case 2:if(!this.isTouchBottom(this.curSquareNodeArr)){r.next=20;break}q.consoleLog("停止下降"),e=0;case 6:if(!(e<this.curSquareNodeArr.length)){r.next=16;break}if((t=this.curSquareNodeArr[e].getComponent(p)).status=g.STACK,this.allSquareNodeArr.push(t.node),!(t.row>f.gridRow-1)){r.next=13;break}return this.gameStatus=E.END,r.abrupt("return");case 13:e++,r.next=6;break;case 16:return r.next=18,this.clearSquare();case 18:return this.createSquareItem(),r.abrupt("return");case 20:d.emit(S.SQUARE_ActDROP);case 21:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.clearSquare=function(){var r=u(i().mark((function r(){var e,t,a,n,u,o,s,c,l,h,q,m,A,v;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=[[]],t=[],a=0,r.t0=i().keys(this.allSquareNodeArr);case 4:if((r.t1=r.t0()).done){r.next=14;break}if(n=r.t1.value,s=null==(u=this.allSquareNodeArr[n])?void 0:u.getComponent(p)){r.next=9;break}return r.abrupt("continue",4);case 9:c=s.row,l={itemComp:s,id:n},null!=(o=e[c])&&o.length?(e[c].push(l),e[c].length>=f.gridCol&&(a++,e[c].forEach((function(r){var e=r.itemComp;t.push(e.node)})))):(e[c]=[],e[c][0]=l),r.next=4;break;case 14:if(t.length){r.next=16;break}return r.abrupt("return");case 16:this.gameStatus=E.CLEAR,h=0;case 18:if(!(h<t.length)){r.next=36;break}q=t[h].getComponent(p),m=0;case 21:if(!(m<this.allSquareNodeArr.length)){r.next=33;break}if(v=null==(A=this.allSquareNodeArr[m])?void 0:A.getComponent(p)){r.next=25;break}return r.abrupt("continue",30);case 25:if(v.row!==q.row||v.col!==q.col){r.next=29;break}return v.status=g.CLEAR,this.allSquareNodeArr.splice(m,1),r.abrupt("continue",30);case 29:v.row>q.row&&(v.status=g.FILL);case 30:m++,r.next=21;break;case 33:h++,r.next=18;break;case 36:return d.emit(S.SQUARE_DESTROY),r.next=39,this.sleep(1);case 39:d.emit(S.SQUARE_ActFALLDOWN,a),this.gameStatus=E.BEGIN;case 41:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.updateRandomSquareIdArr=function(){if(this.squareIdArr.length){this.squareIdArr.splice(0,1);var r=q.random(0,f.squareArr.length-1);this.squareIdArr.push(r)}else for(var e=0;e<f.preSquareCount+1;e++){var t=q.random(0,f.squareArr.length-1);this.squareIdArr.push(t)}this.curSquareID=this.squareIdArr[0],q.consoleLog("预示方块组",this.squareIdArr);for(e=1;e<=f.preSquareCount;e++){var a=this.squareIdArr[e];d.emit(S.SQUARE_UpdateSHAPE,a,e)}},o.getGridAfterRotate=function(r,e,t){var a=f.squareArr[this.curSquareID][this.curSquareDir][t],n=(this.curSquareDir+1)%4,u=f.squareArr[this.curSquareID][n][t],i=A.getGridFromIndex(a),o=A.getGridFromIndex(u);return{col:r+(o.col-i.col),row:e+(o.row-i.row)}},o.isTouchSquare=function(r){if(0===this.allSquareNodeArr.length)return!1;for(var e=f.gridCol,t=0;t<this.curSquareNodeArr.length;t++)for(var a=this.curSquareNodeArr[t].getComponent(p),n=a.row*e+a.col,u=0;u<this.allSquareNodeArr.length;u++){var i;if(this.allSquareNodeArr[u].isValid){var o=null==(i=this.allSquareNodeArr[u])?void 0:i.getComponent(p);if(o){var s=o.row*e+o.col,c=n-e===s,l=n-1===s&&a.col>0,h=n+1===s&&a.col<e-1;switch(r){case m.DOWN:if(c)return!0;break;case m.LEFT:if(l)return!0;break;case m.RIGHT:if(h)return!0;break;case m.AROUND:if(c)return!0;if(l)return!0;if(h)return!0;if(n+e===s)return!0}}}}return!1},o.isTouchBottom=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(p).row<=0){e=!0;break}}return e||(e=this.isTouchSquare(m.DOWN)),e},o.isTouchLeft=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(p).col<=0){e=!0;break}}return e||(e=this.isTouchSquare(m.LEFT)),e},o.isTouchRight=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(p).col>=f.gridCol-1){e=!0;break}}return e||(e=this.isTouchSquare(m.RIGHT)),e},o.isEnableRotate=function(r){var e=this.isTouchSquare(m.AROUND);if(!e)for(var t=0;t<r.length;t++){var a=r[t].getComponent(p),n=this.getGridAfterRotate(a.col,a.row,a.squareIndex);if(n.col>f.gridCol-1||n.col<0||n.row<0){e=!0;break}}return e},o.sleep=function(){var r=u(i().mark((function r(e){var t=this;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,a){t.scheduleOnce((function(){return r()}),e)})));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e}(h)).Instance=null,R=e((D=C).prototype,"nodeSquareParent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(D.prototype,"prafabSquare",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=D))||I));!function(r){r[r.BEGIN=0]="BEGIN",r[r.END=1]="END",r[r.CLEAR=2]="CLEAR"}(E||(E=r("GameStatus",{}))),function(r){r[r.NORMAL=1.2]="NORMAL",r[r.QUICK=.05]="QUICK"}(w||(w=r("SquareDropSpeed",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./EventManager.ts","./Config.ts","./PreSquare.ts","./Utils.ts"],(function(e){"use strict";var n,t,r,a,o,i,u,c,s,l,p,f,d,S,h,R,m,q;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,u=e.Node,c=e.Prefab,s=e.Input,l=e.instantiate,p=e.Component},function(e){f=e.GameManager,d=e.SquareDropSpeed},function(e){S=e.EventManager,h=e.EventName},function(e){R=e.default},function(e){m=e.PreSquare},function(e){q=e.default}],execute:function(){var I,y,D,E,T,b,g,P,v;o._RF.push({},"87e0buQFbRFc4mus4jFG4+M","GameUI",void 0);var A=i.ccclass,w=i.property;e("GameUI",(I=A("GameUI"),y=w({type:u,displayName:"预示方块父节点"}),D=w({type:c,displayName:"预示方块预制体"}),E=w({type:u,displayName:"下键节点"}),I((g=n((b=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return n=e.call.apply(e,[this].concat(o))||this,r(n,"nodePreSquareParent",g,a(n)),r(n,"prefabPreSquare",P,a(n)),r(n,"nodeDownBtn",v,a(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){this.nodeDownBtn.on(s.EventType.TOUCH_START,this.onDownBtnTouchStart,this),this.nodeDownBtn.on(s.EventType.TOUCH_END,this.onDownBtnTouchEnd,this),this.nodeDownBtn.on(s.EventType.TOUCH_CANCEL,this.onDownBtnTouchEnd,this)},o.start=function(){this.createPreSquareItem()},o.createPreSquareItem=function(){for(var e=1;e<=R.preSquareCount;e++){var n=l(this.prefabPreSquare);n.setParent(this.nodePreSquareParent),n.getComponent(m).init(e,f.Instance.squareIdArr[e],f.Instance.prafabSquare)}},o.clickLeftBtn=function(){f.Instance.isTouchLeft(f.Instance.curSquareNodeArr)?q.consoleLog("左移ERROR"):S.emit(h.SQUARE_ActLEFT)},o.clickRightBtn=function(){f.Instance.isTouchRight(f.Instance.curSquareNodeArr)?q.consoleLog("右移ERROR"):S.emit(h.SQUARE_ActRIGHT)},o.clickRotateBtn=function(){f.Instance.isEnableRotate(f.Instance.curSquareNodeArr)?q.consoleLog("旋转ERROR"):(S.emit(h.SQUARE_ActROTATE),f.Instance.curSquareDir++,f.Instance.curSquareDir>=4&&(f.Instance.curSquareDir=0))},o.onDownBtnTouchStart=function(e){R.squareDropSpeed=d.QUICK},o.onDownBtnTouchEnd=function(e){R.squareDropSpeed=d.NORMAL},n}(p)).prototype,"nodePreSquareParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(b.prototype,"prefabPreSquare",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(b.prototype,"nodeDownBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=b))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./PoolManager.ts","./Enum.ts"],(function(e){"use strict";var n,t,i,r,a,o,l,u,c,s,p,f,y,d,b,g,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.JsonAsset,u=e.Material,c=e.Node,s=e.Prefab,p=e.SpriteFrame,f=e.director,y=e.macro,d=e.Component},function(e){b=e.default},function(e){g=e.default},function(e){m=e.NodePoolName}],execute:function(){var h,N,P,C,z,v,w,A,I,T,F,G,R,W,D,E,L,_;a._RF.push({},"e6b54aXLxZATIUy6qALPnCr","Global",void 0);var j=o.ccclass,S=o.property;e("Global",(h=j("Global"),N=S({type:l,displayName:"全局配置文件"}),P=S({type:u,displayName:"默认材质"}),C=S({type:u,displayName:"置灰材质"}),z=S({type:c,displayName:"弹窗父节点"}),v=S({type:s,displayName:"提示弹窗预制体"}),w=S({type:s,displayName:"飞行物奖励预制体"}),A=S({type:p,displayName:"货币图片组"}),h(((_=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,i(n,"config",F,r(n)),i(n,"materialDefault",G,r(n)),i(n,"materialGray",R,r(n)),i(n,"nodeWndParent",W,r(n)),i(n,"prefabWndToast",D,r(n)),i(n,"prefabFlyIcon",E,r(n)),i(n,"currencySpriteArr",L,r(n)),n}t(n,e);var a=n.prototype;return a.onLoad=function(){n.Instance=this,f.addPersistRootNode(this.node.parent),b.signConfig=this.config.json.signConfig,b.taskConfig=this.config.json.taskConfig,b.achiConfig=this.config.json.achiConfig},a.start=function(){g.createPool(m.WndToast,this.prefabWndToast)},a.update=function(e){},n.scheduleCB=function(e,t,i){void 0===i&&(i=y.REPEAT_FOREVER),n.Instance.schedule((function(){return e()}),t,i)},n}(d)).Instance=null,F=n((T=_).prototype,"config",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(T.prototype,"materialDefault",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(T.prototype,"materialGray",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(T.prototype,"nodeWndParent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(T.prototype,"prefabWndToast",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(T.prototype,"prefabFlyIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(T.prototype,"currencySpriteArr",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=T))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/HomeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./TouchManager.ts","./AchiWall.ts","./Enum.ts","./AchiBaubleItem.ts","./EventManager.ts","./Config.ts","./WndManager.ts","./ResUtils.ts"],(function(e){"use strict";var o,t,n,i,a,r,u,c,s,h,d,l,y,T,f,p,g,N,P,v,L,B,I,b,E;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,u=e.Node,c=e.UITransform,s=e.Vec3,h=e.Vec2,d=e.Component},function(e){l=e.default},function(e){y=e.TouchManager},function(e){T=e.AchiWall},function(e){f=e.HomeStayLocation,p=e.FurnitureEditStatus,g=e.TouchLayerType,N=e.PlayerStatus,P=e.WndID},function(e){v=e.AchiBaubleItem},function(e){L=e.EventManager,B=e.EventName},function(e){I=e.default},function(e){b=e.WndManager},function(e){E=e.default}],execute:function(){var m,M,S,C,A,w,U,R,D,W,x;a._RF.push({},"e963bORr/xK3ZviKXuUkPP+","HomeManager",void 0);var O=r.ccclass,k=r.property;e("HomeManager",(m=O("HomeManager"),M=k({type:u,displayName:"金丝熊节点"}),S=k({type:u,displayName:"室内父节点"}),C=k({type:u,displayName:"室外父节点"}),A=k({type:u,displayName:"触摸型按钮父节点"}),m((R=o((U=function(e){function o(){for(var o,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return o=e.call.apply(e,[this].concat(a))||this,n(o,"nodePlayer",R,i(o)),n(o,"nodeLayerIndoor",D,i(o)),n(o,"nodeLayerOutdoor",W,i(o)),n(o,"nodeTouchBtnParent",x,i(o)),o.curTouchNode=null,o.curTouchLayerType=null,o.furEditStatus=null,o.stayLocation=void 0,o.nodeAchiBaubleParent=null,o.touchManager=null,o.curMoveNode=null,o.playerStatus=null,o.playerSpeed=1.2,o.groundPosY=0,o}t(o,e);var a=o.prototype;return a.onLoad=function(){this.touchManager=this.node.getComponent(y)},a.start=function(){this.groundPosY=this.nodePlayer.getPosition().y,this.stayLocation=f.INDOOR,this.furEditStatus=p.INIT,this.nodeAchiBaubleParent=T.Instance.nodeBaubleParent,this.touchManager.onPressCB=this.onPress.bind(this),this.touchManager.onPressEndCB=this.onPressEnd.bind(this),this.touchManager.onTouchStartCB=this.onTouchStart.bind(this),this.touchManager.onTouchMoveCB=this.onTouchMove.bind(this),this.touchManager.onTouchMoveEndCB=this.onTouchMoveEnd.bind(this),this.touchManager.onTouchEndCB=this.onTouchEnd.bind(this)},a.update=function(e){if(this.curTouchLayerType===g.UIButton){var o=this.playerStatus===N.MoveToLeft?-1:1,t=this.nodePlayer.getPosition().x+this.playerSpeed*o;this.nodePlayer.setPosition(t,this.groundPosY,0)}},a.onEnable=function(){L.on(B.FURNITUREE_EditEnd,this.furEditEnd,this)},a.onDisable=function(){L.off(B.FURNITUREE_EditEnd,this.furEditEnd)},a.furEditEnd=function(){this.curTouchNode=null,this.curTouchLayerType=null,this.furEditStatus=p.INIT},a.onPressEnd=function(e){if(this.onTouchUIButtonEnd(),this.furEditStatus===p.INIT&&this.curTouchNode)switch(l.consoleLog("长按结束"),this.curTouchLayerType){case g.WallDecor:case g.AchiBauble:}},a.onPress=function(e){if(this.curTouchLayerType!==g.UIButton)if(this.furEditStatus===p.INIT){l.consoleLog("长按成功");var o=this.getTouchNode(e);if(o.type!==g.Player&&(this.curTouchNode=o.node,this.curTouchLayerType=o.type),this.curTouchNode)switch(l.consoleLog("触摸了",this.curTouchNode.name),this.furEditStatus=p.EDIT,this.curTouchLayerType){case g.WallDecor:break;case g.AchiBauble:this.curTouchNode.getComponent(v).setStatus(p.EDIT),this.curTouchNode.getComponent(v).setEditStatus(!0)}else E.showToastWnd("请长按正确的物品")}else E.showToastWnd("正在编辑物品");else l.consoleLog("长按UI")},a.onTouchStart=function(e){var o=this.getTouchNode(e);if(o.type===g.UIButton)return this.curTouchNode=o.node,this.curTouchLayerType=o.type,void this.onTouchUIButtonStart(o.node);var t=e.getLocation(),n=!1;if(this.curTouchNode){var i=this.curTouchNode.parent.getComponent(c).convertToNodeSpaceAR(new s(t.x,t.y)),a=new h(i.x,i.y);n=l.isBoundContainsPointLocal(this.curTouchNode,a)}this.curMoveNode=n?this.curTouchNode:this.stayLocation===f.INDOOR?this.nodeLayerIndoor:this.nodeLayerOutdoor,this.furEditStatus===p.INIT?(this.curTouchNode=null,this.curTouchLayerType=null):l.consoleLog("touchStart Failed: 正在编辑")},a.onTouchMove=function(e){if(this.curTouchLayerType!==g.UIButton){var o=e.getDelta(),t=this.curMoveNode.getPosition().x+o.x,n=this.curMoveNode.getPosition().y+o.y;if(this.curMoveNode.setPosition(t,n,0),this.curMoveNode===this.curTouchNode&&this.curTouchLayerType===g.AchiBauble){for(var i=l.isBoundContainsRectLocal(T.Instance.nodeBaubleParent,this.curTouchNode),a=!1,r=0;r<this.nodeAchiBaubleParent.children.length;r++){var u=this.nodeAchiBaubleParent.children[r];if(this.curTouchNode!=u&&(a=l.isBoundIntersectsRectLocal(u,this.curTouchNode)))break}this.curTouchNode.getComponent(v).setEditStatus(i&&!a)}}},a.onTouchMoveEnd=function(e){if(this.onTouchUIButtonEnd(),this.curTouchNode)switch(l.consoleLog("移动结束"),this.curTouchLayerType){case g.WallDecor:case g.AchiBauble:}},a.onTouchEnd=function(e){this.onTouchUIButtonEnd(),this.curMoveNode=null;var o=this.getTouchNode(e);if(o.node)switch(l.consoleLog("触发点击"),o.type){case g.Player:E.showToastWnd("与金丝熊的亲密值+3");var t=this.nodePlayer.getComponent(c).contentSize,n=this.nodePlayer.getWorldPosition(),i=new s(n.x+t.x/2,n.y+t.y),a=T.Instance.nodeBaubleParent.getChildByName("e").getWorldPosition();E.playFlyIconAnimation(i,a,"favor",I.addFavorCount,this.nodePlayer.parent.getChildByName("nodeFlyParent"));break;case g.WallDecor:break;case g.AchiBauble:var r=o.node.name;I.chooseAchiID=l.letterCaseToNum(r),b.Instance.show(P.WndAchi),l.consoleLog("打开成就物品详情弹窗",r)}},a.onTouchUIButtonStart=function(e){switch(e.name){case"btnLeft":this.nodePlayer.setScale(-1,1,0),this.playerStatus=N.MoveToLeft;break;case"btnRight":this.nodePlayer.setScale(1,1,0),this.playerStatus=N.MoveToRight}},a.onTouchUIButtonEnd=function(){this.furEditEnd(),this.playerStatus=N.Idle},a.onOpenDoorBtnClick=function(){var e=this.nodeLayerIndoor.getChildByName("door");this.stayLocation!==f.INDOOR&&(e=this.nodeLayerOutdoor.getChildByName("door")),l.isBoundContainsRectLocal(e,this.nodePlayer)?l.consoleLog("开门成功"):E.showToastWnd("请移动到门口")},a.getTouchNode=function(e){var o=e.getLocation(),t=this.getTouchUINode(o);return t.node||(t=this.getTouchIndoorNode(o)),t.node||l.consoleLog("本次触摸无返回值"),t},a.getTouchUINode=function(e){for(var o=this.nodeTouchBtnParent.getComponent(c).convertToNodeSpaceAR(new s(e.x,e.y)),t=new h(o.x,o.y),n=null,i=null,a=0;a<this.nodeTouchBtnParent.children.length;a++){var r=this.nodeTouchBtnParent.children[a];l.isBoundContainsPointLocal(r,t)&&(n=r,i=g.UIButton)}return{node:n,type:i}},a.getTouchIndoorNode=function(e){for(var o=this.nodeLayerIndoor.getComponent(c).convertToNodeSpaceAR(new s(e.x,e.y)),t=new h(o.x,o.y),n=this.nodeAchiBaubleParent.getComponent(c).convertToNodeSpaceAR(new s(e.x,e.y)),i=new h(n.x,n.y),a=this.nodeLayerIndoor.children.length,r=null,u=null,d=0;d<a;d++){var y=this.nodeLayerIndoor.children[d];if(l.isBoundContainsPointLocal(y,t)&&"nodeFlyParent"!==y.name){if(r=y,"player"===y.name){u=g.Player;break}if(u=g.WallDecor,"achiParent"!==y.name)break;r=null,u=null;for(var T=0;T<this.nodeAchiBaubleParent.children.length;T++){var f=this.nodeAchiBaubleParent.children[T];l.isBoundContainsPointLocal(f,i)&&(r=f,u=g.AchiBauble)}}}return{node:r,type:u}},o}(d)).prototype,"nodePlayer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=o(U.prototype,"nodeLayerIndoor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=o(U.prototype,"nodeLayerOutdoor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=o(U.prototype,"nodeTouchBtnParent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=U))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/HomeUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WndManager.ts","./Enum.ts"],(function(n){"use strict";var t,e,o,c,r,s,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,c=n.director,r=n.Component},function(n){s=n.WndManager},function(n){i=n.WndID}],execute:function(){var a;e._RF.push({},"ff753LVCfhD+6aGdG76fE3g","HomeUI",void 0);var u=o.ccclass;o.property,n("HomeUI",u("HomeUI")(a=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.start=function(){},o.clickStartBtn=function(){c.loadScene("Game")},o.onTaskBtnClick=function(){s.Instance.show(i.WndTask)},e}(r))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Config.ts","./Global.ts","./Constant.ts","./Enum.ts","./ResUtils.ts","./Singleton.ts","./Utils.ts","./EventManager.ts","./PoolManager.ts","./ResManager.ts","./TouchManager.ts","./WndManager.ts","./GameManager.ts","./GameUI.ts","./PreSquare.ts","./SquareItem.ts","./AchiWall.ts","./HomeManager.ts","./HomeUI.ts","./WndAchi.ts","./WndAchiDetails.ts","./WndTask.ts","./AchiBaubleItem.ts","./TaskItem.ts","./debug-view-runtime-control.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PoolManager.ts",["cc"],(function(t){"use strict";var o,l,e;return{setters:[function(t){o=t.cclegacy,l=t.instantiate,e=t.NodePool}],execute:function(){o._RF.push({},"90777IDfTlFHbau7OUSq/Mv","PoolManager",void 0);var i=t("AutoNodePool",function(){function t(t,o){this.prefab=void 0,this.scripteName=void 0,this.pool=void 0,this.prefab=t,this.scripteName=o,this.pool=new e(o)}var o=t.prototype;return o.get=function(t){var o=this.pool.get(t);if(o)console.log("对象池中取到对象名称："+o.name);else if(o=l(this.prefab),this.scripteName){var e=o.getComponent(this.scripteName);e?e.init(t):this.scripteName=null}return o},o.put=function(t){this.pool.put(t)},o.clear=function(){this.pool.clear()},t}());t("default",function(){function t(){}return t.createPool=function(t,o,l){this.allPools[t]||(this.allPools[t]=new i(o,l))},t.get=function(t,o){return this.allPools[t]?this.allPools[t].get(o):null},t.put=function(t,o){if(o||(o=t.name),!this.allPools[o]){console.warn("未创建对应名称的对象池，将销毁节点：",o);var l=t.getComponent(o);return l&&l.unuse&&l.unuse(),void t.destroy()}this.allPools[o].put(t)},t.putAllChildren=function(t){for(var o=t.children.length-1;o>=0;--o){var l=t.children[o];this.put(l)}},t.clear=function(t){if(t)this.allPools[t]&&(this.allPools[t].clear(),delete this.allPools[t]);else{for(var o in this.allPools)this.allPools[o].clear();this.allPools={}}},t}()).allPools={},o._RF.pop()}}}));

System.register("chunks:///_virtual/PreSquare.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./EventManager.ts","./SquareItem.ts","./ResUtils.ts","./Config.ts"],(function(e){"use strict";var t,r,n,a,i,o,u,s,c,f,l,p,S,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,u=e.Node,s=e.Component},function(e){c=e.SquareStatus},function(e){f=e.EventManager,l=e.EventName},function(e){p=e.SquareItem},function(e){S=e.default},function(e){h=e.default}],execute:function(){var d,q,P,v,E;i._RF.push({},"1016bAdMahJrIkfEcrsoUV7","PreSquare",void 0);var m=o.ccclass,y=o.property;e("PreSquare",(d=m("PreSquare"),q=y({type:u,displayName:"方块父节点"}),d((E=t((v=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"nodeSquareParent",E,a(t)),t.index=void 0,t}r(t,e);var i=t.prototype;return i.onEnable=function(){f.on(l.SQUARE_UpdateSHAPE,this.refreshPreSquareShape,this)},i.onDisable=function(){f.off(l.SQUARE_UpdateSHAPE,this.refreshPreSquareShape)},i.init=function(e,t,r){this.index=e,S.createSquareItem(t,this.nodeSquareParent,r,h.squareGridSize,h.squareGridSize).forEach((function(e){e.getComponent(p).status=c.SHOW}))},i.refreshPreSquareShape=function(e,t){var r;this.index===t&&(null==(r=this.nodeSquareParent.children)||r.forEach((function(t,r){t.getComponent(p).updateShape(e,r)})))},t}(s)).prototype,"nodeSquareParent",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=v))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/ResManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./Constant.ts"],(function(n){"use strict";var e,t,r,a,u,o,s,i,c,l,p,f,d;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass,r=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){u=n.cclegacy,o=n.assetManager,s=n.AudioClip,i=n.Prefab,c=n.sp,l=n.SpriteFrame,p=n.instantiate},function(n){f=n.default},function(n){d=n.Constant}],execute:function(){u._RF.push({},"bf691rWwfpEX4tJgXUoliFA","ResManager",void 0);n("default",function(n){function u(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))||this).audioMap=new Map,e.spriteFrameMap=new Map,e.prefabMap=new Map,e.skeletonDataMap=new Map,e}e(u,n);var f=u.prototype;return f.loadBundleSync=function(n){return new Promise((function(e,t){var r=o.getBundle(n);r?e(r):o.loadBundle(n,(function(t,r){t?(console.log("包"+n+"找不到"),e(null)):e(r)}))}))},f.loadAudioFromBundleSync=function(n,e){return new Promise((function(t,r){n.load(e,s,(function(n,e){n?t(null):t(e)}))}))},f.loadPrefabFromBundleSync=function(n,e){return new Promise((function(t,r){n.load(e,i,(function(n,e){n?t(null):t(e)}))}))},f.loadAudioCo=function(){var n=r(a().mark((function n(e,t,r){var u,s,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===r&&(r=!0),u=e+t,!this.audioMap.has(u)){n.next=4;break}return n.abrupt("return",this.audioMap.get(u));case 4:if(s=o.getBundle(t)){n.next=9;break}return n.next=8,this.loadBundleSync(t);case 8:s=n.sent;case 9:if(s){n.next=11;break}return n.abrupt("return",null);case 11:return n.next=13,this.loadAudioFromBundleSync(s,e);case 13:return(i=n.sent)&&r&&this.audioMap.set(u,i),n.abrupt("return",i);case 16:case"end":return n.stop()}}),n,this)})));return function(e,t,r){return n.apply(this,arguments)}}(),f.loadAssetCo=function(){var n=r(a().mark((function n(e,t,r,u){var o,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===u&&(u=null),n.next=3,this.loadBundleSync(t);case 3:return o=n.sent,n.next=6,this.loadAssetSync(e,o,r);case 6:return s=n.sent,u&&u(s),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n,this)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),f.loadAssetSync=function(n,e,t){return new Promise((function(r){e.load(n,t,(function(t,a){if(t)return console.warn(e.name+"包没有"+n+"这个资源"),void r(null);r(a)}))}))},f.loadPrefabCo=function(){var n=r(a().mark((function n(e,t,r,u){var s,i,c,l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===t&&(t=d.bundleName),void 0===r&&(r=!0),void 0===u&&(u=null),s=e+t,!this.prefabMap.has(s)){n.next=8;break}return i=this.prefabMap.get(s),u&&u(i),n.abrupt("return",i);case 8:if(c=o.getBundle(t)){n.next=13;break}return n.next=12,this.loadBundleSync(t);case 12:c=n.sent;case 13:if(c){n.next=15;break}return n.abrupt("return",null);case 15:return n.next=17,this.loadPrefabFromBundleSync(c,e);case 17:return(l=n.sent)&&r&&this.prefabMap.set(s,l),u&&u(l),n.abrupt("return",l);case 21:case"end":return n.stop()}}),n,this)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),f.loadNodeAndInstantiateCo=function(){var n=r(a().mark((function n(e,t,r,u){var o,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===u&&(u=!0),n.next=3,this.loadPrefabCo(e,t,u);case 3:if(o=n.sent){n.next=6;break}return n.abrupt("return",null);case 6:return(s=p(o)).setParent(r),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n,this)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),f.loadAudioSync=function(n,e,t){var r=this;return void 0===t&&(t=!1),new Promise((function(a,u){var o=null;r.audioMap.has(e)?(o=r.audioMap.get(e),a(o)):n.load(e,s,(function(n,u){n?a(null):(o=u,t&&r.audioMap.set(e,o),a(o))}))}))},f.loadSkeletonDataFromBundleSync=function(n,e){return new Promise((function(t){n.load(e,c.SkeletonData,(function(n,e){if(n)return console.warn(n.message),void t(null);t(e)}))}))},f.loadSkeletonDataCo=function(){var n=r(a().mark((function n(e,t,r){var u,s,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===r&&(r=!0),u=e+t,!this.skeletonDataMap.has(u)){n.next=4;break}return n.abrupt("return",this.skeletonDataMap.get(u));case 4:if(s=o.getBundle(t)){n.next=9;break}return n.next=8,this.loadBundleSync(t);case 8:s=n.sent;case 9:if(s){n.next=11;break}return n.abrupt("return",null);case 11:return n.next=13,this.loadSkeletonDataFromBundleSync(s,e);case 13:return(i=n.sent)&&r&&this.skeletonDataMap.set(u,i),n.abrupt("return",i);case 16:case"end":return n.stop()}}),n,this)})));return function(e,t,r){return n.apply(this,arguments)}}(),f.loadSpriteFrameFromBundleSync=function(n,e){return new Promise((function(t){n.load(e,l,(function(n,e){if(n)return console.warn(n.message),void t(null);t(e)}))}))},f.loadSpriteFrameCo=function(){var n=r(a().mark((function n(e,t,r){var u,s,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===r&&(r=!0),u=e+t,!this.spriteFrameMap.has(u)){n.next=4;break}return n.abrupt("return",this.spriteFrameMap.get(u));case 4:if(s=o.getBundle(t)){n.next=9;break}return n.next=8,this.loadBundleSync(t);case 8:s=n.sent;case 9:if(s){n.next=11;break}return n.abrupt("return",null);case 11:return n.next=13,this.loadSpriteFrameFromBundleSync(s,e);case 13:return(i=n.sent)&&r&&this.spriteFrameMap.set(u,i),n.abrupt("return",i);case 16:case"end":return n.stop()}}),n,this)})));return function(e,t,r){return n.apply(this,arguments)}}(),t(u,null,[{key:"Instance",get:function(){return n.GetInstance.call(this)}}]),u}(f));u._RF.pop()}}}));

System.register("chunks:///_virtual/ResUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Enum.ts","./SquareItem.ts","./Utils.ts","./Global.ts","./ResManager.ts","./Constant.ts","./PoolManager.ts"],(function(e){"use strict";var t,r,n,i,o,a,s,u,c,d,l,g,f,p,m,S,v;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,i=e.instantiate,o=e.UITransform,a=e.tween,s=e.Vec3,u=e.Label},function(e){c=e.default},function(e){d=e.NodePoolName,l=e.SquareDir},function(e){g=e.SquareItem},function(e){f=e.default},function(e){p=e.Global},function(e){m=e.default},function(e){S=e.Constant},function(e){v=e.default}],execute:function(){n._RF.push({},"5130aJqVv1GWLurgC5/EVY7","ResUtils",void 0);var h="gold",w="jewel",I="power";e("default",function(){function e(){}return e.playFlyIconAnimation=function(e,t,r,n,u){var c=i(p.Instance.prefabFlyIcon);c.setParent(u),this.setCurrencySprite(c.getChildByName("img"),r),f.setText(c.getChildByName("num"),"x"+n),e=u.getComponent(o).convertToNodeSpaceAR(e),t=u.getComponent(o).convertToNodeSpaceAR(t),c.setPosition(e);var d=e.subtract(t).length(),l=d/500;l>1&&(l=1),f.consoleLog("首末坐标距离",d);var g=30,m=.1;a(c).by(m,{position:new s(g,g)},{easing:"sineInOut"}).by(m,{position:new s(g,-30)},{easing:"sineInOut"}).by(m,{position:new s(15,15)},{easing:"sineInOut"}).by(m,{position:new s(15,-15)},{easing:"sineInOut"}).delay(.5).to(l,{position:t},{easing:"sineInOut"}).call((function(){c.destroy()})).start()},e.showToastWnd=function(e){var t=v.get(d.WndToast);t.setParent(p.Instance.node),f.setText(t.getChildByName("text"),e),p.scheduleCB((function(){v.put(t,d.WndToast)}),2,0)},e.setCurrencySprite=function(e,t){switch(t){case h:f.setSpriteFrame(e,p.Instance.currencySpriteArr[0]);break;case w:f.setSpriteFrame(e,p.Instance.currencySpriteArr[1]);break;case I:f.setSpriteFrame(e,p.Instance.currencySpriteArr[2]);break;case"favor":f.setSpriteFrame(e,p.Instance.currencySpriteArr[3])}},e.setFontsizeAuto=function(e,t){var r=e.getComponent(u).string.length-t;r<=0||(e.getComponent(u).fontSize-=r+2)},e.setAchiBaubleSprite=function(){var e=t(r().mark((function e(t,n,i){var o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=-1),"-1"===n.substring(1)?(o=n.substring(0,1),n=o+"Lock",f.setMaterial(t,!0)):f.setMaterial(t,!1),a=S.spriteAchiIconPath+n+S.suffixSpriteFrame,e.next=6,m.Instance.loadSpriteFrameCo(a,S.bundleName);case 6:s=e.sent,f.setSpriteFrame(t,s),i>-1&&this.setItemSize(t,i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),e.setItemSize=function(e,t){var r=e.getComponent(o).width,n=e.getComponent(o).height;r<=t&&n<=t||(r>n?(n=n/r*t,r=t):(r=r/n*t,n=t),f.setSize(e,r,n))},e.getSingleCurrencyReward=function(e,t){void 0===t&&(t=-1);var r=Number(e.rGold),n=Number(e.rJewel),i=Number(e.rPower);-1!==t&&(r=Number(e.rGold[t]),n=Number(e.rJewel[t]),i=Number(e.rPower[t]));var o=h,a=r;return a<n?(o=w,a=n):a<i&&(o=I,a=i),{type:o,num:Number(a)}},e.createSquareItem=function(e,t,r,n,o){var a=this;void 0===n&&(n=c.gridCol),void 0===o&&(o=c.gridRow);for(var s=[],u=function(e,s){var u=i(r);u.setParent(t);var c=a.getSquarePosFromGrid(e,n,o);return u.setPosition(c),u.getComponent(g).init(e,s),u},d=0;d<c.squareGridSize;d++){var f=c.squareArr[e][l.UP],p=u(this.getSquareBirthGridID(f[d],n,o),d);s.push(p)}return s},e.getSquarePosFromGrid=function(e,t,r){void 0===t&&(t=c.gridCol),void 0===r&&(r=c.gridRow);var n=-(t-1)/2*c.gridSize,i=-(r-1)/2*c.gridSize,o=n+e[0]*c.gridSize,a=i+e[1]*c.gridSize;return new s(o,a,0)},e.getSquareBirthGridID=function(e,t,r){void 0===t&&(t=c.gridCol),void 0===r&&(r=c.gridRow);var n=this.getGridFromIndex(e);return t!==c.gridCol&&r!==c.gridRow?[n.col,n.row]:[n.col+Math.floor((t-c.squareGridSize)/2),n.row+r]},e.getGridFromIndex=function(e,t){return void 0===t&&(t=c.squareGridSize),{col:e%t,row:Math.floor(e/t)}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"ce17crKn4lNMIMTaDK0VoHO","Singleton",void 0),n("default",function(){function n(){}return n.GetInstance=function(){return null==this._instance&&(this._instance=new this),this._instance},n.destroyInstance=function(){this._instance=null},n}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/SquareItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./EventManager.ts","./Utils.ts","./ResUtils.ts","./Enum.ts","./Config.ts"],(function(t){"use strict";var o,s,i,e,n,a,r,u,h,c,l,f;return{setters:[function(t){o=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,e=t.Component},function(t){n=t.GameManager},function(t){a=t.EventManager,r=t.EventName},function(t){u=t.default},function(t){h=t.default},function(t){c=t.SquareStatus,l=t.SquareDir},function(t){f=t.default}],execute:function(){var R;s._RF.push({},"1552adQSLxNWKyiZ0OrCi9G","SquareItem",void 0);var p=i.ccclass;i.property,t("SquareItem",p("SquareItem")(R=function(t){function s(){for(var o,s=arguments.length,i=new Array(s),e=0;e<s;e++)i[e]=arguments[e];return(o=t.call.apply(t,[this].concat(i))||this).squareIndex=void 0,o.row=void 0,o.col=void 0,o.status=void 0,o}o(s,t);var i=s.prototype;return i.start=function(){},i.onEnable=function(){a.on(r.SQUARE_ActDROP,this.playDrop,this),a.on(r.SQUARE_ActLEFT,this.playMoveToLeft,this),a.on(r.SQUARE_ActRIGHT,this.playMoveToRight,this),a.on(r.SQUARE_ActROTATE,this.playRotate,this),a.on(r.SQUARE_DESTROY,this.playDestroy,this),a.on(r.SQUARE_ActFALLDOWN,this.playFallDown,this)},i.onDisable=function(){a.off(r.SQUARE_ActDROP,this.playDrop),a.off(r.SQUARE_ActLEFT,this.playMoveToLeft),a.off(r.SQUARE_ActRIGHT,this.playMoveToRight),a.off(r.SQUARE_ActROTATE,this.playRotate),a.off(r.SQUARE_DESTROY,this.playDestroy),a.off(r.SQUARE_ActFALLDOWN,this.playFallDown)},i.init=function(t,o,s){void 0===s&&(s=c.DROP),this.col=t[0],this.row=t[1],this.squareIndex=o,this.status=s},i.setCurPostion=function(t,o){void 0===t&&(t=f.gridCol),void 0===o&&(o=f.gridRow);var s=h.getSquarePosFromGrid([this.col,this.row],t,o);this.node.setPosition(s)},i.updateShape=function(t,o){if(this.status===c.SHOW&&this.squareIndex===o){var s=f.squareArr[t][l.UP][o],i=h.getGridFromIndex(s,f.squareGridSize);this.col=i.col,this.row=i.row,this.setCurPostion(f.squareGridSize,f.squareGridSize)}},i.playDrop=function(){this.status===c.DROP&&(this.row--,this.setCurPostion())},i.playRotate=function(){if(this.status===c.DROP){var t=n.Instance.getGridAfterRotate(this.col,this.row,this.squareIndex);this.col=t.col,this.row=t.row,this.setCurPostion()}},i.playMoveToLeft=function(){this.status===c.DROP&&(this.col--,this.setCurPostion())},i.playMoveToRight=function(){this.status===c.DROP&&(this.col++,this.setCurPostion())},i.playDestroy=function(t){var o=this;this.status===c.CLEAR&&u.finishAnimation(this.node,"squareClear",(function(){o.node.destroy(),t&&t()}))},i.playFallDown=function(t){this.status===c.FILL&&(this.row-=t,this.setCurPostion(),this.status=c.STACK)},s}(e))||R);s._RF.pop()}}}));

System.register("chunks:///_virtual/TaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Utils.ts"],(function(t){"use strict";var n,e,o,i,a,s,l,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Animation,a=t.tween,s=t.Component},function(t){l=t.EventManager,r=t.EventName},function(t){c=t.default}],execute:function(){var u;e._RF.push({},"ba8abqqmjVIc6yMJad61ChB","TaskItem",void 0);var p=o.ccclass;o.property,t("TaskItem",p("TaskItem")(u=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.onEnable=function(){c.playAnimation(this.node,"idle"),l.on(r.TASK_ScrollENDED,this.playIdle,this),l.on(r.TASK_ScrollBEGAN,this.playSwing,this)},o.onDisable=function(){l.off(r.TASK_ScrollENDED,this.playIdle),l.off(r.TASK_ScrollBEGAN,this.playSwing)},o.playIdle=function(){this.node.getComponent(i).stop(),a(this.node.getChildByName("bg")).to(.3,{angle:-30}).start()},o.playSwing=function(){c.playAnimation(this.node,"swing")},e}(s))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/TouchManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){"use strict";var n,o,t,e,i;return{setters:[function(s){n=s.inheritsLoose},function(s){o=s.cclegacy,t=s._decorator,e=s.Node,i=s.Component}],execute:function(){var r;o._RF.push({},"3b434SaYqZPPKMqWxt4Y0DB","TouchManager",void 0);var h=t.ccclass;t.property,s("TouchManager",h("TouchManager")(r=function(s){function o(){for(var n,o=arguments.length,t=new Array(o),e=0;e<o;e++)t[e]=arguments[e];return(n=s.call.apply(s,[this].concat(t))||this).onPressCB=null,n.onPressEndCB=null,n.onTouchStartCB=null,n.onTouchMoveCB=null,n.onTouchMoveEndCB=null,n.onTouchEndCB=null,n.isPress=!1,n.isPressInCurTouch=!1,n.isMoving=!1,n.curPressSec=0,n.pressSign=1,n.pressEvent=null,n}n(o,s);var t=o.prototype;return t.start=function(){this.node.on(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(e.EventType.TOUCH_END,this.onPressEnd,this),this.node.on(e.EventType.TOUCH_MOVE,this.onTouchMove,this)},t.update=function(s){!this.isPress||this.isPressInCurTouch||this.isMoving?this.curPressSec=0:(this.curPressSec+=s,this.curPressSec>this.pressSign&&this.onPressCB&&(this.onPressCB(this.pressEvent),this.isPressInCurTouch=!0))},t.onTouchStart=function(s){this.isPress=!0,this.pressEvent=s,this.onTouchStartCB&&this.onTouchStartCB(s)},t.onTouchMove=function(s){var n=s.getDelta();(n.x||n.y)&&(this.isMoving=!0,this.onTouchMoveCB&&this.onTouchMoveCB(s))},t.onPressEnd=function(s){return this.isPress=!1,this.isMoving?(this.isMoving=!1,void(this.onTouchMoveEndCB&&this.onTouchMoveEndCB(s))):this.isPressInCurTouch?(this.isPressInCurTouch=!1,void(this.onPressEndCB&&this.onPressEndCB(s))):void(this.onTouchEndCB&&this.onTouchEndCB(s))},o}(i))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./Config.ts","./Global.ts"],(function(n){"use strict";var t,o,e,i,r,a,c,u,s,l,f,g,m,p;return{setters:[function(n){t=n.cclegacy,o=n.sys,e=n.Node,i=n.Label,r=n.EditBox,a=n.Sprite,c=n.Component,u=n.color,s=n.UITransform,l=n.Size,f=n.error,g=n.Animation},function(n){m=n.default},function(n){p=n.Global}],execute:function(){t._RF.push({},"50bd36z49RPg4nJilc3sz6g","Utils",void 0);n("default",function(){function n(){}return n.getLocalAttr=function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=o.localStorage.getItem(n);null===i||""===i||void 0===i||" "===i?t&&t():e&&e(i)},n.consoleLog=function(){var n;m.isEnableConsoleLog&&(n=console).log.apply(n,arguments)},n.setText=function(n,t){if(n instanceof e){var o=n.getComponent(i);if(!(null!=o&&null!=o||null!=(o=n.getComponent(r))&&null!=o))return;o.string=t}else(n instanceof i||n instanceof r)&&(n.string=t)},n.setSpriteFrame=function(n,t){n instanceof a?n.spriteFrame=t:n instanceof e?n.getComponent(a).spriteFrame=t:n instanceof c&&(n.node.getComponent(a).spriteFrame=t)},n.setMaterial=function(n,t){n.getComponent(a).customMaterial=t?p.Instance.materialGray:p.Instance.materialDefault},n.setColor=function(n,t){n.getComponent(a)?n.getComponent(a).color=u().fromHEX(t):n.getComponent(i)&&(n.getComponent(i).color=u().fromHEX(t))},n.setSize=function(n,t,o){n.getComponent(s).setContentSize(new l(t,o))},n.random=function(n,t){var o=Math.random()*(t-n+1)+n;return Math.floor(o)},n.unique=function(n){var t=new Set(n);return Array.from(t)},n.numToLetterCase=function(n,t){var o;if(!(n>25||n<0))return o=t?n+65:n+97,String.fromCharCode(o);f(n,"不在字母表范围内")},n.letterCaseToNum=function(n){if(!(n.length>1)){var t=n.charCodeAt(0);return t<97?t-65:t-97}f("字母转换数字失败(字符串过长)")},n.playAnimation=function(n,t){n instanceof e?n.getComponent(g).play(t):n instanceof c&&n.node.getComponent(g).play(t)},n.finishAnimation=function(n,t,o){var i;n instanceof e?i=n.getComponent(g):n instanceof c&&(i=n.node.getComponent(g)),i.play(t),i.once("finished",(function(){o&&o()}),this)},n.isBoundContainsPointLocal=function(n,t){var o=null==n?void 0:n.getComponent(s);return!!o&&o.getBoundingBox().contains(t)},n.isBoundContainsRectLocal=function(n,t){var o=n.getComponent(s).getBoundingBox(),e=t.getComponent(s).getBoundingBox();return o.containsRect(e)},n.isBoundIntersectsRectLocal=function(n,t){var o=n.getComponent(s).getBoundingBox(),e=t.getComponent(s).getBoundingBox();return o.intersects(e)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/WndAchi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./ResUtils.ts","./Utils.ts","./WndManager.ts","./Enum.ts"],(function(e){"use strict";var t,n,i,r,a,o,s,c,l,u,h,d,p,f,g,y,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.Prefab,h=e.ProgressBar,d=e.instantiate,p=e.Component},function(e){f=e.default},function(e){g=e.default},function(e){y=e.default},function(e){m=e.WndManager},function(e){b=e.WndID}],execute:function(){var w,N,v,C,I,B,P,R,x,D,S,T,A,z,W,k,L;s._RF.push({},"6db92BQ7jVBTL0Uy4lHRxEk","WndAchi",void 0);var _=c.ccclass,E=c.property;e("WndAchi",(w=_("WndAchi"),N=E({type:l,displayName:"成就标题节点"}),v=E({type:l,displayName:"成就描述节点"}),C=E({type:l,displayName:"当前阶段成就节点"}),I=E({type:l,displayName:"下一阶段成就节点"}),B=E({type:l,displayName:"成就奖励父节点"}),P=E({type:u,displayName:"成就奖励预制体"}),R=E({type:h,displayName:"成就进度条节点"}),w((S=t((D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"nodeTitle",S,r(t)),i(t,"nodeDesc",T,r(t)),i(t,"nodeCurImg",A,r(t)),i(t,"nodeNextImg",z,r(t)),i(t,"nodeRewardParent",W,r(t)),i(t,"nodeRewardPrefab",k,r(t)),i(t,"nodeProgressBar",L,r(t)),t.achiName=void 0,t.achiStage=void 0,t.achiInfo={},t}n(t,e);var s=t.prototype;return s.start=function(){},s.onEnable=function(){this.init(),this.createReward(),this.setDisplay()},s.init=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.achiInfo=f.achiConfig[f.chooseAchiID],this.achiName=y.numToLetterCase(f.chooseAchiID,!1),this.achiStage=-1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.createReward=function(){for(var e=0===this.nodeRewardParent.children.length,t=0;t<f.achiStageCount;t++){var n=void 0;e?(n=d(this.nodeRewardPrefab)).setParent(this.nodeRewardParent):n=this.nodeRewardParent.children[t];var i=g.getSingleCurrencyReward(this.achiInfo,t);y.setText(n.getChildByName("num"),"x"+i.num),g.setCurrencySprite(n.getChildByName("img"),i.type)}},s.setDisplay=function(){g.setAchiBaubleSprite(this.nodeCurImg,this.achiName+this.achiStage),g.setAchiBaubleSprite(this.nodeNextImg,this.achiName+(this.achiStage+1));var e=this.achiStage<0?0:this.achiStage;y.setText(this.nodeTitle,this.achiStage<0?"暂未解锁":this.achiInfo.name[e]);var t=this.achiInfo.desc;y.setText(this.nodeDesc.getChildByName("text1"),t[0]),y.setText(this.nodeDesc.getChildByName("text2"),t[1]);var n=Number(this.achiInfo.count[e]),i="0/"+n;y.setText(this.nodeDesc.getChildByName("num"),i),this.nodeProgressBar.progress=0/n},s.onSearchBtnClick=function(){m.Instance.show(b.WndAchiDetails)},s.onCloseBtnClick=function(){m.Instance.hide(b.WndAchi)},t}(p)).prototype,"nodeTitle",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"nodeDesc",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"nodeCurImg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"nodeNextImg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(D.prototype,"nodeRewardParent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(D.prototype,"nodeRewardPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(D.prototype,"nodeProgressBar",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=D))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/WndAchiDetails.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WndManager.ts","./Enum.ts","./Config.ts","./Utils.ts","./ResUtils.ts"],(function(t){"use strict";var e,n,i,r,a,c,o,s,u,l,h,f,p,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,u=t.Node,l=t.Component},function(t){h=t.WndManager},function(t){f=t.WndID},function(t){p=t.default},function(t){d=t.default},function(t){y=t.default}],execute:function(){var m,g,v,A,D;o._RF.push({},"b540dfW7bZA3LgXvLs0+J+e","WndAchiDetails",void 0);var W=s.ccclass,b=s.property;t("WndAchiDetails",(m=W("WndAchiDetails"),g=b({type:u,displayName:"成就物品父节点"}),m((D=e((A=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"nodeAchiParent",D,r(e)),e.achiName=void 0,e}n(e,t);var o=e.prototype;return o.onEnable=function(){this.init(),this.setDisplay()},o.init=function(){var t=a(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.achiName=d.numToLetterCase(p.chooseAchiID,!1);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.setDisplay=function(){var t=this;this.nodeAchiParent.children.forEach((function(e,n){y.setAchiBaubleSprite(e.getChildByName("img"),t.achiName+(n-1),130)}))},o.onCloseBtnClick=function(){h.Instance.hide(f.WndAchiDetails)},e}(l)).prototype,"nodeAchiParent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=A))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/WndManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts","./Global.ts","./Singleton.ts"],(function(e){"use strict";var n,t,r,a,o,s,c,i,u,f,p;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e._decorator,c=e.error,i=e.instantiate},function(e){u=e.default},function(e){f=e.Global},function(e){p=e.default}],execute:function(){var l;o._RF.push({},"09c71QJC61BXaV/bp+XS1nO","WndManager",void 0);var d=s.ccclass;s.property,e("WndManager",d("WndManager")(l=function(e){function o(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).prefabNodeMap=new Map,n}n(o,e);var s=o.prototype;return s.show=function(){var e=r(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPrefabNodeCo(n);case 2:if(t=e.sent){e.next=6;break}return c("can not find prefab "+n.toString()),e.abrupt("return",null);case 6:t.active=!0,t.setSiblingIndex(t.parent.children.length+1);case 8:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.hide=function(e){var n=e.toString(),t=f.Instance.nodeWndParent.getChildByName(n);t.setSiblingIndex(0),t.active=!1},s.getPrefabNodeCo=function(){var e=r(a().mark((function e(n){var t,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.prefabNodeMap.has(n)&&null!=this.prefabNodeMap.get(n)){e.next=14;break}return t=n.toString(),e.next=4,u.Instance.loadPrefabCo("WndPrefab/"+t);case 4:if(r=e.sent){e.next=8;break}return c("can not find prefab "+t),e.abrupt("return",null);case 8:return(o=i(r)).setParent(f.Instance.nodeWndParent),this.prefabNodeMap.set(n,o),e.abrupt("return",o);case 14:return e.abrupt("return",this.prefabNodeMap.get(n));case 15:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),t(o,null,[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),o}(p))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/WndTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Utils.ts","./ResUtils.ts","./EventManager.ts","./WndManager.ts","./Enum.ts"],(function(e){"use strict";var t,a,n,r,i,l,o,s,u,c,d,y,p,f,m,g,h,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.Node,s=e.Prefab,u=e.instantiate,c=e.Vec3,d=e.Component},function(e){y=e.default},function(e){p=e.default},function(e){f=e.default},function(e){m=e.EventManager,g=e.EventName},function(e){h=e.WndManager},function(e){C=e.WndID}],execute:function(){var b,N,k,w,v,P,T,B,D,W,R,S,x;i._RF.push({},"dc463ZmGSVH2ZW1MCDr1pQp","WndTask",void 0);var L=l.ccclass,I=l.property;e("WndTask",(b=L("WndTask"),N=I({type:o,displayName:"日活奖励Layout节点"}),k=I({type:s,displayName:"日活奖励预制体"}),w=I({type:s,displayName:"任务卡预制体"}),v=I({type:s,displayName:"墙纸预制体"}),P=I({type:o,displayName:"墙纸content节点"}),b((D=t((B=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n(t,"nodeDailyRewardParent",D,r(t)),n(t,"prefabDailyReward",W,r(t)),n(t,"prefabTaskItem",R,r(t)),n(t,"prefabWallLine",S,r(t)),n(t,"nodeWallLineParent",x,r(t)),t.taskItemPosArr=[[-280,-60],[-105,-85],[85,-85],[288,-65]],t}a(t,e);var i=t.prototype;return i.start=function(){this.createTask(),this.createDailyReward(),this.nodeWallLineParent.parent.parent.on("scroll-began",(function(){m.emit(g.TASK_ScrollBEGAN)}),this),this.nodeWallLineParent.parent.parent.on("scroll-ended",(function(){m.emit(g.TASK_ScrollENDED)}),this)},i.createTask=function(){for(var e=y.taskConfig.length-y.taskDailyCount,t=null,a=0;a<e;a++){var n=a%4;0===n&&(t=u(this.prefabWallLine)).setParent(this.nodeWallLineParent);var r=u(this.prefabTaskItem);r.setParent(t);var i=new c(this.taskItemPosArr[n][0],this.taskItemPosArr[n][1]);r.setPosition(i);var l=a+y.taskDailyCount,o=y.taskConfig[l],s=r.getChildByName("bg");p.setText(s.getChildByName("textProCount"),o.count);var d=s.getChildByName("title");p.setText(d,o.name),f.setFontsizeAuto(d,7);var m=f.getSingleCurrencyReward(o);p.setText(s.getChildByName("rewardCurrency").getChildByName("num"),"x"+m.num),f.setCurrencySprite(s.getChildByName("rewardCurrency").getChildByName("img"),m.type),p.setText(s.getChildByName("rewardScore").getChildByName("num"),"x"+o.rScore)}},i.createDailyReward=function(){for(var e=0;e<y.taskDailyCount;e++){var t=u(this.prefabDailyReward);t.setParent(this.nodeDailyRewardParent);var a=y.taskConfig[e];p.setText(t.getChildByName("mark").getChildByName("num"),String(a.count));var n=f.getSingleCurrencyReward(a);p.setText(t.getChildByName("reward").getChildByName("num"),"x"+n.num),f.setCurrencySprite(t.getChildByName("reward").getChildByName("img"),n.type)}},i.onCloseBtnClick=function(){h.Instance.hide(C.WndTask)},t}(d)).prototype,"nodeDailyRewardParent",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(B.prototype,"prefabDailyReward",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(B.prototype,"prefabTaskItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(B.prototype,"prefabWallLine",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(B.prototype,"nodeWallLineParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=B))||T));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});