window.__require=function e(t,o,i){function r(c,a){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};t[c][0].call(p.exports,function(e){return r(t[c][1][e]||e)},p,p.exports,e,t,o,i)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<i.length;c++)r(i[c]);return r}({Config:[function(e,t,o){"use strict";cc._RF.push(t,"ed610+9zP9Ik4izLjev+GTe","Config"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.roleMoveSpeed=200,e}();o.default=i,cc._RF.pop()},{}],Constants:[function(e,t,o){"use strict";cc._RF.push(t,"711fegg2rRLSbJaNGo+qznS","Constants"),Object.defineProperty(o,"__esModule",{value:!0}),o.Constants=void 0;o.Constants=function(){},cc._RF.pop()},{}],Enum:[function(e,t,o){"use strict";cc._RF.push(t,"39e3am73PtGMJEHt/ZK+QRS","Enum"),Object.defineProperty(o,"__esModule",{value:!0}),o.RoleAnimState=o.GroupName=o.SceneName=o.FaceDirection=void 0,function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right"}(o.FaceDirection||(o.FaceDirection={})),function(e){e.Main="Main",e.Home="Home"}(o.SceneName||(o.SceneName={})),function(e){e.Wall="wall",e.Role="role"}(o.GroupName||(o.GroupName={})),function(e){e[e.Move_Up=0]="Move_Up",e[e.Move_Down=1]="Move_Down",e[e.Move_LeftDown=2]="Move_LeftDown",e[e.Move_LeftUp=3]="Move_LeftUp",e[e.Move_RightDown=4]="Move_RightDown",e[e.Move_RightUp=5]="Move_RightUp",e[e.Idle_Up=6]="Idle_Up",e[e.Idle_Down=7]="Idle_Down",e[e.Idle_LeftDown=8]="Idle_LeftDown",e[e.Idle_LeftUp=9]="Idle_LeftUp",e[e.Idle_RightDown=10]="Idle_RightDown",e[e.Idle_RightUp=11]="Idle_RightUp"}(o.RoleAnimState||(o.RoleAnimState={})),cc._RF.pop()},{}],GlobalManager:[function(e,t,o){"use strict";cc._RF.push(t,"2d4562xZOpIirVrGG5kmVdy","GlobalManager");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(n<3?r(c):n>3?r(t,o,c):r(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.Instance=this,cc.game.addPersistRootNode(this.node),this.physics=cc.director.getPhysicsManager(),this.physics.enabled=!0,this.physics.debugDrawFlags=1,this.physics.gravity=cc.v2(0,0)},t.prototype.start=function(){},t.Instance=null,o=n([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],HomeManager:[function(e,t,o){"use strict";cc._RF.push(t,"514bb+tk2xLroQDFpKN428C","HomeManager");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(n<3?r(c):n>3?r(t,o,c):r(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Utils"),a=cc._decorator,s=a.ccclass,l=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeRoleSelf=null,t.tiledMap=null,t}return r(t,e),t.prototype.start=function(){c.default.setWallRigidBody(this.tiledMap)},n([l({type:cc.Node,displayName:"\u4e3b\u89d2\u8282\u70b9"})],t.prototype,"nodeRoleSelf",void 0),n([l({type:cc.TiledMap,displayName:"\u573a\u666f\u5730\u56fe"})],t.prototype,"tiledMap",void 0),n([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Common/Utils":"Utils"}],MainManager:[function(e,t,o){"use strict";cc._RF.push(t,"eb1d4wEkQVDu4F8y5U25BJK","MainManager");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(n<3?r(c):n>3?r(t,o,c):r(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Enum"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){},t.prototype.onStartBtnClick=function(){cc.director.loadScene(c.SceneName.Home)},n([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../Common/Enum":"Enum"}],RoleControl:[function(e,t,o){"use strict";cc._RF.push(t,"98576XtbvNOJZ1uIh0rbDia","RoleControl");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(n<3?r(c):n>3?r(t,o,c):r(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Common/Config"),a=e("../Common/Enum"),s=e("../SceneMain/GlobalManager"),l=cc._decorator,p=l.ccclass,f=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animRole=null,t.roleAnimClips=null,t.oldRoleAnimState=a.RoleAnimState.Idle_Down,t.roleAnimState=a.RoleAnimState.Idle_Down,t.faceDirArr=cc.v2(a.FaceDirection.None,a.FaceDirection.None),t.speedDirArr=cc.v2(0,0),t.nodeDebugUI=null,t.moveUpSpeed=.3,t}return r(t,e),t.prototype.onLoad=function(){cc.systemEvent.on("keydown",this.onKeyDown,this),cc.systemEvent.on("keyup",this.onKeyUp,this),this.roleAnimClips=this.animRole.getClips(),this.nodeDebugUI=this.node.parent.getChildByName("DebugUI").getChildByName("UI")},t.prototype.start=function(){},t.prototype.update=function(){var e=this.node.getComponent(cc.RigidBody).linearVelocity;this.speedDirArr.x?e.x=this.speedDirArr.x*c.default.roleMoveSpeed:e.x=0,this.speedDirArr.y?e.y=this.speedDirArr.y*c.default.roleMoveSpeed:e.y=0,this.node.getComponent(cc.RigidBody).linearVelocity=e},t.prototype.playRoleAnim=function(){if(this.oldRoleAnimState!==this.roleAnimState){this.oldRoleAnimState=this.roleAnimState;var e=this.roleAnimClips[this.roleAnimState].name;this.animRole.play(e).speed=this.moveUpSpeed}},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.up:if(this.faceDirArr.y===a.FaceDirection.Up&&1===this.speedDirArr.y)break;this.faceDirArr.x===a.FaceDirection.None?this.roleAnimState=a.RoleAnimState.Move_Up:this.faceDirArr.x===a.FaceDirection.Left?this.roleAnimState=a.RoleAnimState.Move_LeftUp:this.roleAnimState=a.RoleAnimState.Move_RightUp,this.faceDirArr.y=a.FaceDirection.Up,this.speedDirArr.y=1;break;case cc.macro.KEY.s:case cc.macro.KEY.down:if(this.faceDirArr.y===a.FaceDirection.Down&&-1===this.speedDirArr.y)break;this.faceDirArr.x===a.FaceDirection.None?this.roleAnimState=a.RoleAnimState.Move_Down:this.faceDirArr.x===a.FaceDirection.Left?this.roleAnimState=a.RoleAnimState.Move_LeftDown:this.roleAnimState=a.RoleAnimState.Move_RightDown,this.faceDirArr.y=a.FaceDirection.Down,this.speedDirArr.y=-1;break;case cc.macro.KEY.a:case cc.macro.KEY.left:if(this.faceDirArr.x===a.FaceDirection.Left&&-1===this.speedDirArr.x)break;this.roleAnimState=this.faceDirArr.y===a.FaceDirection.Up?a.RoleAnimState.Move_LeftUp:a.RoleAnimState.Move_LeftDown,this.faceDirArr.x=a.FaceDirection.Left,this.speedDirArr.x=-1;break;case cc.macro.KEY.d:case cc.macro.KEY.right:if(this.faceDirArr.x===a.FaceDirection.Right&&1===this.speedDirArr.x)break;this.roleAnimState=this.faceDirArr.y===a.FaceDirection.Up?a.RoleAnimState.Move_RightUp:a.RoleAnimState.Move_RightDown,this.faceDirArr.x=a.FaceDirection.Right,this.speedDirArr.x=1}this.playRoleAnim()},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.up:this.speedDirArr.x<0?this.roleAnimState=a.RoleAnimState.Move_LeftUp:this.speedDirArr.x>0?this.roleAnimState=a.RoleAnimState.Move_RightUp:this.faceDirArr.x===a.FaceDirection.Right?this.roleAnimState=a.RoleAnimState.Idle_RightUp:this.faceDirArr.x===a.FaceDirection.Left?this.roleAnimState=a.RoleAnimState.Idle_LeftUp:this.roleAnimState=a.RoleAnimState.Idle_Up,this.faceDirArr.y=a.FaceDirection.Up,this.speedDirArr.y=0;break;case cc.macro.KEY.s:case cc.macro.KEY.down:this.speedDirArr.x<0?this.roleAnimState=a.RoleAnimState.Move_LeftDown:this.speedDirArr.x>0?this.roleAnimState=a.RoleAnimState.Move_RightDown:this.faceDirArr.x===a.FaceDirection.Right?this.roleAnimState=a.RoleAnimState.Idle_RightDown:this.faceDirArr.x===a.FaceDirection.Left?this.roleAnimState=a.RoleAnimState.Idle_LeftDown:this.roleAnimState=a.RoleAnimState.Idle_Down,this.faceDirArr.y=a.FaceDirection.Down,this.speedDirArr.y=0;break;case cc.macro.KEY.a:case cc.macro.KEY.left:this.speedDirArr.y>0?this.roleAnimState=a.RoleAnimState.Move_Up:this.speedDirArr.y<0?this.roleAnimState=a.RoleAnimState.Move_Down:this.roleAnimState=this.faceDirArr.y===a.FaceDirection.Up?a.RoleAnimState.Idle_LeftUp:a.RoleAnimState.Idle_LeftDown,this.faceDirArr.x=a.FaceDirection.None,this.speedDirArr.x=0;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this.speedDirArr.y>0?this.roleAnimState=a.RoleAnimState.Move_Up:this.speedDirArr.y<0?this.roleAnimState=a.RoleAnimState.Move_Down:this.roleAnimState=this.faceDirArr.y===a.FaceDirection.Up?a.RoleAnimState.Idle_RightUp:a.RoleAnimState.Idle_RightDown,this.faceDirArr.x=a.FaceDirection.None,this.speedDirArr.x=0}this.playRoleAnim()},t.prototype.onShowDebug=function(){this.nodeDebugUI.active=!0},t.prototype.onHideDebug=function(){var e=this,t=function(t){var o=e.nodeDebugUI.getChildByName(t).getComponent(cc.EditBox).string;return Number(o)};c.default.roleMoveSpeed=t("moveSpeedEditBox"),this.moveUpSpeed=t("sampleEditBox");var o=this.nodeDebugUI.getChildByName("showBodyToggle").getComponent(cc.Toggle).isChecked;s.default.Instance.physics.debugDrawFlags=o?1:0,this.nodeDebugUI.active=!1},n([f({type:cc.Animation,displayName:"\u89d2\u8272\u52a8\u753b\u7ec4\u4ef6"})],t.prototype,"animRole",void 0),n([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Common/Config":"Config","../Common/Enum":"Enum","../SceneMain/GlobalManager":"GlobalManager"}],Utils:[function(e,t,o){"use strict";cc._RF.push(t,"dac125MX45AkpH3TIf2xKbB","Utils"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Enum"),r=function(){function e(){}return e.setWallRigidBody=function(e){for(var t=e.getTileSize(),o=e.getLayer("wall"),r=o.getLayerSize(),n=0;n<r.width;n++)for(var c=0;c<r.height;c++){var a=o.getTiledTileAt(n,c,!0);if(0!=a.gid){a.node.group=i.GroupName.Wall,a.node.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var s=a.node.addComponent(cc.PhysicsBoxCollider);s.offset=cc.v2(t.width/2,t.height/2),s.size=t,s.apply()}}},e}();o.default=r,cc._RF.pop()},{"./Enum":"Enum"}]},{},["Config","Constants","Enum","Utils","HomeManager","RoleControl","GlobalManager","MainManager"]);