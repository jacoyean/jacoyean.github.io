System.register("chunks:///_virtual/AchiBaubleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResUtils.ts","./Utils.ts","./Config.ts","./Enum2.ts","./EventManager.ts"],(function(t){"use strict";var e,i,n,o,a,s,r,c,u,d,l,h,f,p,b,I,g,m,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass,s=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){c=t.cclegacy,u=t._decorator,d=t.Node,l=t.Vec3,h=t.UITransform,f=t.Component},function(t){p=t.default},function(t){b=t.default},function(t){I=t.default},function(t){g=t.FurnitureEditStatus},function(t){m=t.EventManager,E=t.EventName}],execute:function(){var S,y,w,v,C,N,T,B,k,z,A,U,D,G,R;c._RF.push({},"020b6eX+8xBY56rmSp6dpk8","AchiBaubleItem",void 0);var _=u.ccclass,x=u.property;t("AchiBaubleItem",(S=_("AchiBaubleItem"),y=x({type:d,displayName:"成就物品图片节点"}),w=x({type:d,displayName:"物品阴影节点"}),v=x({type:d,displayName:"占位格节点"}),C=x({type:d,displayName:"编辑UI父节点"}),N=x({type:d,displayName:"编辑翻转按钮节点"}),T=x({type:d,displayName:"编辑确认按钮节点"}),S((z=e((k=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"nodeImg",z,o(e)),n(e,"nodeShadow",A,o(e)),n(e,"nodeGridHolder",U,o(e)),n(e,"nodeEditUI",D,o(e)),n(e,"nodeEditTurn",G,o(e)),n(e,"nodeEditAck",R,o(e)),e._achiID=void 0,e.achiStage=void 0,e.achiName=void 0,e.achiInfo={},e.baubleInfo={face:1,pos:new l(0,0,0)},e.status=void 0,e.isEnableEditAck=void 0,e}i(e,t);var c=e.prototype;return c.start=function(){},c.init=function(){var t=s(r().mark((function t(e,i){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.achiID=e,this.achiStage=i,this.achiName=b.numToLetterCase(this.achiID,!1),this.achiInfo=I.achiConfig[e],t.next=6,this.setBaubleSprite();case 6:this.setBaubleSize(),this.setStatus(g.INIT),this.baubleInfo.pos=this.node.getPosition();case 9:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),c.setBaubleSprite=function(){var t=s(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.achiName+this.achiStage,p.setAchiBaubleSprite(this.nodeImg,e),p.setAchiBaubleSprite(this.nodeShadow,e);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.setBaubleSize=function(){var t=this.getGridColRow(),e=t.colCount*I.wallGridSize,i=t.rowCount*I.wallGridSize;b.setSize(this.node,e,i),b.setSize(this.nodeGridHolder,e,i)},c.getGridColRow=function(){var t=this.achiStage<0?0:this.achiStage;return{colCount:Number(this.achiInfo.gridCountX[t]),rowCount:Number(this.achiInfo.gridCountY[t])}},c.setStatus=function(t){this.status=t;var e=t===g.EDIT;this.nodeShadow.active=e,this.nodeGridHolder.active=e;var i=this.node.parent.children.length;this.node.setSiblingIndex(e?i:this.achiID),this.showEditUI(e),b.playAnimation(this.node,e?"editBegan":"editEnd")},c.setEditStatus=function(t){this.isEnableEditAck=t,b.setMaterial(this.nodeEditTurn,!t),b.setMaterial(this.nodeEditAck,!t),b.setColor(this.nodeGridHolder,t?"#B9F79778":"#F7979778")},c.showEditUI=function(t){if(this.nodeEditUI.active=t,t){var e=(this.node.getComponent(h).contentSize.height+this.nodeEditUI.getComponent(h).contentSize.height)/2+20;this.nodeEditUI.setPosition(0,-e,0)}},c.onEditCancelBtnClick=function(){p.showToastWnd("已取消本次编辑"),this.nodeImg.setScale(this.baubleInfo.face,1),this.nodeShadow.setScale(this.baubleInfo.face,1),this.node.setPosition(this.baubleInfo.pos),this.setStatus(g.INIT),m.emit(E.FURNITUREE_EditEnd)},c.onEditTurnBtnClick=function(){if(this.isEnableEditAck){var t=-1*this.nodeImg.getScale().x;this.nodeImg.setScale(t,1),this.nodeShadow.setScale(t,1)}else p.showToastWnd("请放至正确位置")},c.onEditAckBtnClick=function(){this.isEnableEditAck?(p.showToastWnd("编辑物品成功"),this.baubleInfo.face=this.node.getScale().x,this.baubleInfo.pos=this.node.getPosition(),this.setStatus(g.INIT),m.emit(E.FURNITUREE_EditEnd)):p.showToastWnd("请放至正确位置")},a(e,[{key:"achiID",get:function(){return this._achiID},set:function(t){this._achiID=t}}]),e}(f)).prototype,"nodeImg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(k.prototype,"nodeShadow",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(k.prototype,"nodeGridHolder",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(k.prototype,"nodeEditUI",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(k.prototype,"nodeEditTurn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(k.prototype,"nodeEditAck",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=k))||B));c._RF.pop()}}}));

System.register("chunks:///_virtual/AchiWall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Utils.ts","./AchiBaubleItem.ts"],(function(e){"use strict";var t,n,i,r,a,o,l,u,c,s,f,b,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,u=e.Prefab,c=e.instantiate,s=e.Vec3,f=e.Component},function(e){b=e.default},function(e){p=e.default},function(e){h=e.AchiBaubleItem}],execute:function(){var d,m,v,y,g,P,B,w;a._RF.push({},"7b121nEjrZEBYnvjG4b/LPb","AchiWall",void 0);var A=o.ccclass,z=o.property;e("AchiWall",(d=A("AchiWall"),m=z({type:l,displayName:"成就物品父节点"}),v=z({type:u,displayName:"成就物品预制体"}),d(((w=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"nodeBaubleParent",P,r(t)),i(t,"prefabBauble",B,r(t)),t.baubleInfoArr=[],t}n(t,e);var a=t.prototype;return a.onLoad=function(){t.Instance=this},a.start=function(){this.createBauble()},a.createBauble=function(){for(var e=0;e<b.achiConfig.length;e++){var t=c(this.prefabBauble);t.setParent(this.nodeBaubleParent);var n=p.numToLetterCase(e,!1);t.name=n;var i=b.achiConfig[e],r=new s(Number(i.initPosX),Number(i.initPosY));t.setPosition(r),t.getComponent(h).init(e,-1);var a={name:n,pos:t.getPosition()};this.baubleInfoArr.push(a)}},a.getFurPosFromGrid=function(e,t){var n=-7*b.wallGridSize,i=-3.5*b.wallGridSize,r=n+e*b.wallGridSize,a=i+t*b.wallGridSize;return new s(r,a,0)},t}(f)).Instance=null,P=t((g=w).prototype,"nodeBaubleParent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(g.prototype,"prefabBauble",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/ActorManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./SquareItem2.ts","./Config.ts","./Enum2.ts","./BattleManager.ts","./EventManager.ts","./DataManager.ts","./Enum.ts"],(function(e){"use strict";var t,r,n,a,i,o,u,s,c,l,d,f,p,h,m,b,S,g,y,N,w,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.Node,l=e.Vec3,d=e.Widget,f=e.Component},function(e){p=e.default},function(e){h=e.SquareItem},function(e){m=e.default},function(e){b=e.GameStatus,S=e.SquareStatus},function(e){g=e.BattleManager},function(e){y=e.EventManager,N=e.EventName},function(e){w=e.default},function(e){A=e.InputTypeEnum}],execute:function(){var q,v,k,I,x,P,E,B,C,L,R,M,F;u._RF.push({},"3bdb2nf1klONaawns+FwnBR","ActorManager",void 0);var G=s.ccclass,_=s.property;e("ActorManager",(q=G("ActorManager"),v=_({type:c,displayName:"棋盘区节点"}),k=_({type:c,displayName:"方块父节点"}),I=_({type:c,displayName:"信息区节点"}),x=_({type:c,displayName:"头像节点"}),P=_({type:c,displayName:"昵称节点"}),q((C=t((B=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"nodeBoardView",C,a(t)),n(t,"nodeSquareParent",L,a(t)),n(t,"nodeInfo",R,a(t)),n(t,"nodeHead",M,a(t)),n(t,"nodeName",F,a(t)),t.id=void 0,t.nickName=void 0,t.localGameStatus=void 0,t.allSquareNodeArr=[],t.curSquareNodeArr=[],t.squareFormArr=[],t.areaPosX=333.5,t.boardPosX=103.5,t.infoWidgetLSelf=20,t.infoWidgetLOther=430,t}r(t,e);var u=t.prototype;return u.init=function(e){this.id=e.id,this.nickName=e.nickName,this.localGameStatus=b.BEGIN,this.render(e),y.on(N.SQUARE_Birth,this.handleSquareBirth,this)},u.onDisable=function(){y.off(N.SQUARE_Birth,this.handleSquareBirth)},u.render=function(e){this.renderInfo(e),this.renderPosition(e)},u.renderInfo=function(e){p.setText(this.nodeName,e.nickName)},u.renderPosition=function(e){var t=new l(this.areaPosX,0),r=new l(-this.boardPosX,0),n=this.infoWidgetLOther;e.id===w.Instance.myPlayerId&&(t=new l(-this.areaPosX,0),r=new l(this.boardPosX,0),n=this.infoWidgetLSelf),this.node.setPosition(t),this.nodeBoardView.setPosition(r),this.nodeInfo.getComponent(d).left=n},u.handleSquareBirth=function(){if(w.Instance.myPlayerId===this.id){var e=this.getSquareFormIndex();y.emit(N.ClientSync,{type:A.SquareBirth,owner:this.id,form:e})}},u.getSquareFormIndex=function(){var e=this.squareFormArr[0];return this.squareFormArr.splice(0,1),w.Instance.myPlayerId===this.id&&g.Instance.renderPreSquare(),e},u.checkGame=function(){var e=i(o().mark((function e(){var t,r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=w.Instance.actorMap.get(w.Instance.myPlayerId)).curSquareNodeArr){e.next=3;break}return e.abrupt("return");case 3:p.consoleLog("停止下降"),r=0;case 5:if(!(r<t.curSquareNodeArr.length)){e.next=15;break}if((n=t.curSquareNodeArr[r].getComponent(h)).status=S.STACK,t.allSquareNodeArr.push(n.node),!(n.row>m.gridRow-1)){e.next=12;break}return this.localGameStatus=b.END,e.abrupt("break",15);case 12:r++,e.next=5;break;case 15:return t.curSquareNodeArr=[],e.next=18,this.clearSquare();case 18:y.emit(N.SQUARE_Birth);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.clearSquare=function(){var e=i(o().mark((function e(){var t,r,n,a,i,u,s,c,l,d,f,p,g,w;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[[]],r=[],n=0,e.t0=o().keys(this.allSquareNodeArr);case 4:if((e.t1=e.t0()).done){e.next=14;break}if(a=e.t1.value,s=null==(i=this.allSquareNodeArr[a])?void 0:i.getComponent(h)){e.next=9;break}return e.abrupt("continue",4);case 9:c=s.row,l={itemComp:s,id:a},null!=(u=t[c])&&u.length?(t[c].push(l),t[c].length>=m.gridCol&&(n++,t[c].forEach((function(e){var t=e.itemComp;r.push(t.node)})))):(t[c]=[],t[c][0]=l),e.next=4;break;case 14:if(r.length){e.next=16;break}return e.abrupt("return");case 16:this.localGameStatus=b.CLEAR,d=0;case 18:if(!(d<r.length)){e.next=36;break}f=r[d].getComponent(h),p=0;case 21:if(!(p<this.allSquareNodeArr.length)){e.next=33;break}if(w=null==(g=this.allSquareNodeArr[p])?void 0:g.getComponent(h)){e.next=25;break}return e.abrupt("continue",30);case 25:if(w.row!==f.row||w.col!==f.col){e.next=29;break}return w.status=S.CLEAR,this.allSquareNodeArr.splice(p,1),e.abrupt("continue",30);case 29:w.row>f.row&&(w.status=S.FILL);case 30:p++,e.next=21;break;case 33:d++,e.next=18;break;case 36:return y.emit(N.SQUARE_DESTROY),e.next=39,this.sleep(1);case 39:y.emit(N.SQUARE_ActFALLDOWN,n),this.localGameStatus=b.BEGIN;case 41:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.sleep=function(){var e=i(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){r.scheduleOnce((function(){return e()}),t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(f)).prototype,"nodeBoardView",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(B.prototype,"nodeSquareParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(B.prototype,"nodeInfo",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(B.prototype,"nodeHead",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(B.prototype,"nodeName",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=B))||E));u._RF.pop()}}}));

System.register("chunks:///_virtual/Api.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8e8aalnPspGEoADylMm4HAt","Api",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/BattleManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts","./EventManager.ts","./Enum.ts","./DataManager.ts","./HandleManager.ts","./SquareManager.ts","./Config.ts","./ActorManager.ts","./Enum2.ts","./WndManager.ts","./PreSquare.ts"],(function(e){"use strict";var n,t,r,a,i,s,o,u,c,l,p,f,d,g,h,m,S,y,v,M,I,b,P,q,C,w;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,l=e.Prefab,p=e.Node,f=e.instantiate,d=e.Component},function(e){g=e.NetworkManager},function(e){h=e.EventManager,m=e.EventName},function(e){S=e.ApiMsgEnum},function(e){y=e.default},function(e){v=e.HandleManager},function(e){M=e.SquareManager},function(e){I=e.default},function(e){b=e.ActorManager},function(e){P=e.GameStatus,q=e.WndID},function(e){C=e.WndManager},function(e){w=e.PreSquare}],execute:function(){var A,E,N,k,x,z,G,B,H,D,F,U,W,_;u._RF.push({},"08bf8MmznpEKbCYkfcCf0Wu","BattleManager",void 0);var L=c.ccclass,R=c.property;e("BattleManager",(A=L("BattleManager"),E=R({type:l,displayName:"玩家模块预制体"}),N=R({type:l,displayName:"方块预制体"}),k=R({type:p,displayName:"棋局父节点"}),x=R({type:l,displayName:"预示方块预制体"}),z=R({type:p,displayName:"预示方块父节点"}),A(((_=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,r(n,"prefabActorArea",H,a(n)),r(n,"prefabSquare",D,a(n)),r(n,"nodeMap",F,a(n)),r(n,"prefabPreSquare",U,a(n)),r(n,"nodePreSquareParent",W,a(n)),n.gameStatus=void 0,n.shouldUpdate=!1,n.pendingMsg=[],n}t(n,e);var u=n.prototype;return u.onLoad=function(){n.Instance=this,this.gameStatus=P.BEGIN},u.start=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearGame(),e.next=3,this.connectServer();case 3:this.initGame(),g.Instance.listenMsg(S.MsgServerSync,this.listenServerSync,this),h.on(m.ClientSync,this.handleClientSync,this);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.connectServer=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Instance.connect().catch((function(){return!1}));case 2:if(e.sent){e.next=7;break}return e.next=5,new Promise((function(e){return setTimeout(e,1e3)}));case 5:return e.next=7,this.connectServer();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.initGame=function(){y.Instance.gameHandleComp=v.Instance.node.getComponent(v),this.renderPlayer(),C.Instance.show(q.WndTimer),this.shouldUpdate=!0},u.update=function(e){this.gameStatus===P.BEGIN&&this.shouldUpdate&&(this.renderSquare(),this.tick(e))},u.tick=function(e){for(var n,t=i(y.Instance.state.squares);!(n=t()).done;){var r=n.value,a=y.Instance.squareMap.get(r.id);if(!a)return;a.tick(e)}},u.renderPlayer=function(){for(var e,n=i(y.Instance.state.actors);!(e=n()).done;){var t=e.value,r=y.Instance.actorMap.get(t.id);if(r)r.render(t);else{var a=f(this.prefabActorArea);a.setParent(this.nodeMap),(r=a.getComponent(b)).init(t),y.Instance.actorMap.set(t.id,r)}}},u.renderSquare=function(){for(var e,n=i(y.Instance.state.squares);!(e=n()).done;){var t=e.value,r=y.Instance.squareMap.get(t.id);r?r.render(t):((r=(new p).addComponent(M)).init(t),y.Instance.squareMap.set(t.id,r))}},u.renderPreSquare=function(){for(var e=y.Instance.actorMap.get(y.Instance.myPlayerId),n=0;n<I.preSquareCount;n++){var t=e.squareFormArr[n],r=this.nodePreSquareParent.children[n];r?h.emit(m.SQUARE_UpdateSHAPE,t,n):((r=f(this.prefabPreSquare)).setParent(this.nodePreSquareParent),r.getComponent(w).init(n,t))}},u.handleClientSync=function(e){var n={frameId:y.Instance.frameId++,input:e};g.Instance.sendMsg(S.MsgClientSync,n)},u.listenServerSync=function(e){e.lastFrameId;for(var n,t=e.inputs,r=i(t);!(n=r()).done;){var a=n.value;y.Instance.applyInput(a)}},u.clearGame=function(){g.Instance.unlistenMsg(S.MsgServerSync,this.listenServerSync,this),h.off(m.ClientSync,this.handleClientSync,this)},n}(d)).Instance=null,H=n((B=_).prototype,"prefabActorArea",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(B.prototype,"prefabSquare",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(B.prototype,"nodeMap",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(B.prototype,"prefabPreSquare",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(B.prototype,"nodePreSquareParent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=B))||G));u._RF.pop()}}}));

System.register("chunks:///_virtual/Binary.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./ServerUtils.ts"],(function(e){"use strict";var t,r,n,a,o;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){n=e.ApiMsgEnum,a=e.InputTypeEnum},function(e){o=e.default}],execute:function(){r._RF.push({},"5c618XgEM1CKISP0hRK9hSs","Binary",void 0);e("default",function(){function e(){}return e.encodeSquareBirth=function(e,t,r){t.setUint8(r++,e.type),t.setUint8(r++,e.owner),r+=4},e.encodeSquareControl=function(e,t,r){t.setUint8(r++,e.type),t.setUint8(r++,e.owner),t.setFloat32(r,e.rowColArr.row),r+=4,t.setFloat32(r,e.rowColArr.col),r+=4,t.setFloat32(r,e.dirIndex),r+=4},e.encodeTimePast=function(e,t,r){t.setUint8(r++,e.type),t.setFloat32(r,e.dt),r+=4},e.binaryEncode=function(r,i){if(r===n.MsgClientSync){var u=i.frameId,s=i.input;if(s.type===a.SquareBirth){var d=0,c=new ArrayBuffer(10),l=new DataView(c);return l.setUint8(d++,r),l.setUint32(d,u),d+=4,e.encodeSquareBirth(s,l,d),l}if(s.type===a.SquareControl){var f=0,S=new ArrayBuffer(19),p=new DataView(S);return p.setUint8(f++,r),p.setUint32(f,u),f+=4,e.encodeSquareControl(s,p,f),p}var v=0,y=new ArrayBuffer(10),w=new DataView(y);return w.setUint8(v++,r),w.setUint32(v,u),v+=4,e.encodeTimePast(s,w,v),w}if(r===n.MsgServerSync){for(var g,U=i.lastFrameId,q=i.inputs,m=0,h=t(q);!(g=h()).done;){var C=g.value;C.type===a.SquareBirth?m+=5:C.type===a.SquareControl?m+=14:m+=5}var B=new ArrayBuffer(6+m),F=new DataView(B),I=0;F.setUint8(I++,r),F.setUint32(I,U),I+=4,F.setUint8(I++,q.length);for(var A,P=t(q);!(A=P()).done;){var M=A.value;M.type===a.SquareControl?(e.encodeSquareBirth(M,F,I),I+=5):M.type===a.SquareControl?(e.encodeSquareControl(M,F,I),I+=14):(e.encodeTimePast(M,F,I),I+=5)}return F}var T=0,x=JSON.stringify(i),D=o.strenCode(x),V=new ArrayBuffer(D.length+1),E=new DataView(V);E.setUint8(T++,r);for(var b=0;b<D.length;b++)E.setUint8(T++,D[b]);return E},e.decodeSquareBirth=function(e,t){var r=e.getUint8(t++);return t+=4,{type:a.SquareBirth,owner:r}},e.decodeSquareControl=function(e,t){var r=e.getUint8(t++),n=o.toFixed(e.getFloat32(t));t+=4;var i=o.toFixed(e.getFloat32(t));t+=4;var u=o.toFixed(e.getFloat32(t));return t+=4,{type:a.SquareControl,owner:r,rowColArr:{row:n,col:i},dirIndex:u}},e.decodeTimePast=function(e,t){var r=o.toFixed(e.getFloat32(t));return t+=4,{type:a.TimePast,dt:r}},e.binaryDecode=function(t){var r=0,i=new DataView(t),u=i.getUint8(r++);if(u===n.MsgClientSync){var s=i.getUint32(r);r+=4;var d=i.getUint8(r++);return d===a.SquareBirth?{name:u,data:{frameId:s,input:e.decodeSquareBirth(i,r)}}:d===a.SquareControl?{name:u,data:{frameId:s,input:e.decodeSquareControl(i,r)}}:{name:u,data:{frameId:s,input:e.decodeTimePast(i,r)}}}if(u===n.MsgServerSync){var c=i.getUint32(r);r+=4;for(var l=i.getUint8(r++),f=[],S=0;S<l;S++){var p=i.getUint8(r++);p===a.SquareBirth?(f.push(e.decodeSquareBirth(i,r)),r+=4):p===a.SquareControl?(f.push(e.decodeSquareControl(i,r)),r+=13):(f.push(e.decodeTimePast(i,r)),r+=4)}return{name:n.MsgServerSync,data:{lastFrameId:c,inputs:f}}}return{name:u,data:JSON.parse(o.strdeCode(new Uint8Array(t.slice(1))))}},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtils.ts",["cc","./Enum2.ts","./Config.ts","./ResUtils.ts","./DataManager.ts","./SquareItem2.ts"],(function(r){"use strict";var t,e,n,o,u,i;return{setters:[function(r){t=r.cclegacy},function(r){e=r.SquareDir},function(r){n=r.default},function(r){o=r.default},function(r){u=r.default},function(r){i=r.SquareItem}],execute:function(){t._RF.push({},"e9266MZcERPPoae29M0Gl5/","CommonUtils",void 0);r("default",function(){function r(){}return r.getGridAfterRotate=function(r,t,e){var i=u.Instance.gameHandleComp.inputDir,a=n.squareArr[1][i][e],c=(i+1)%4,f=n.squareArr[1][c][e],s=o.getGridFromIndex(a),l=o.getGridFromIndex(f);return{col:r+(l.col-s.col),row:t+(l.row-s.row)}},r.isTouchBottom=function(t,n){for(var o=!1,u=0;u<n.length;u++){if(n[u].getComponent(i).row<=0){o=!0;break}}return o||(o=r.isTouchSquare(t,n,e.DOWN)),o},r.isTouchLeft=function(t,n){for(var o=!1,u=0;u<n.length;u++){if(n[u].getComponent(i).col<=0){o=!0;break}}return o||(o=r.isTouchSquare(t,n,e.LEFT)),o},r.isTouchRight=function(t,o){for(var u=!1,a=0;a<o.length;a++){if(o[a].getComponent(i).col>=n.gridCol-1){u=!0;break}}return u||(u=r.isTouchSquare(t,o,e.RIGHT)),u},r.isEnableRotate=function(t,n){return r.isTouchSquare(t,n,e.AROUND)},r.isTouchSquare=function(r,t,o){if(0===r.length)return!1;for(var u=n.gridCol,a=0;a<t.length;a++)for(var c=t[a].getComponent(i),f=c.row*u+c.col,s=0;s<r.length;s++){var l;if(r[s].isValid){var g=null==(l=r[s])?void 0:l.getComponent(i);if(g){var h=g.row*u+g.col,m=f-u===h,d=f-1===h&&c.col>0,v=f+1===h&&c.col<u-1;switch(o){case e.DOWN:if(m)return!0;break;case e.LEFT:if(d)return!0;break;case e.RIGHT:if(v)return!0;break;case e.AROUND:if(m)return!0;if(d)return!0;if(v)return!0;if(f+u===h)return!0}}}}return!1},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"8b6ecrIv2lLcKw/cgAyHf/y","Config",void 0);var i=e("default",(function(){}));i.serverUrl="47.122.42.198",i.serverPort=3e3,i.isEnableConsoleLog=!0,i.wallGridSize=40,i.signConfig=[],i.taskConfig=[],i.taskDailyCount=5,i.achiWallgridRow=8,i.achiWallgridCol=15,i.achiStageCount=5,i.chooseAchiID=0,i.achiConfig=[],i.addFavorCount=3,i.squareArr=[[[1,5,9,13],[4,5,6,7],[1,5,9,13],[4,5,6,7]],[[1,2,5,6],[1,2,5,6],[1,2,5,6],[1,2,5,6]],[[1,2,4,5],[1,5,6,10],[1,2,4,5],[1,5,6,10]],[[1,2,6,7],[2,5,6,9],[1,2,6,7],[2,5,6,9]],[[1,2,6,10],[1,2,3,5],[1,5,9,10],[2,4,5,6]],[[1,2,5,9],[1,5,6,7],[2,6,9,10],[1,2,3,7]],[[0,1,2,5],[1,5,6,9],[1,4,5,6],[1,4,5,9]]],i.gridSize=35,i.gridRow=20,i.gridCol=10,i.squareGridSize=4,i.squareDropSpeed=1.2,i.preSquareCount=3,r._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8fe5beNbBFEhIWe41Mg5Vew","Constant",void 0);var n=e("Constant",(function(){}));n.bundleName="BundleResource",n.suffixSpriteFrame="/spriteFrame",n.wndTexturePath="WndTexture/",n.spriteAchiIconPath=n.wndTexturePath+"wndAchi/iconAchiBauble/",n.iconTexturePath="IconTexture/",n.spriteHeadIconPath=n.iconTexturePath,t._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./Enum.ts"],(function(e){"use strict";var r,t,a,n,o,s;return{setters:[function(e){r=e.inheritsLoose,t=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){n=e.cclegacy},function(e){o=e.default},function(e){s=e.InputTypeEnum}],execute:function(){n._RF.push({},"58f0bVfF2xNzrFmB9WTWq28","DataManager",void 0);e("default",function(e){function n(){for(var r,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(r=e.call.apply(e,[this].concat(a))||this).myPlayerId=0,r.isCreateNextSquare=!0,r.roomInfo=void 0,r.gameHandleComp=void 0,r.textureMap=new Map,r.actorMap=new Map,r.squareMap=new Map,r.frameId=0,r.lastState=void 0,r.state={actors:[],squares:[],nextSquareId:1},r}r(n,e);var o=n.prototype;return o.reset=function(){this.frameId=0,this.textureMap.clear(),this.squareMap.clear()},o.applyInput=function(e){switch(e.type){case s.SquareBirth:var r=e.owner,a=e.form;this.state.nextSquareId++;var o={id:this.state.nextSquareId,owner:r,form:a,rowColArr:{row:20,col:3},dirIndex:0};this.state.squares.push(o),console.log("创建新方块 owner "+r);break;case s.SquareControl:var u=e.id,i=(e.owner,e.rowColArr),c=e.dirIndex,l=this.state.squares.find((function(e){return e.id===u}));if(!l)return;l.rowColArr.col+=i.col,l.rowColArr.row+=i.row,l.dirIndex+=c,l.dirIndex>=4&&(l.dirIndex=0);break;case s.TimePast:e.dt;for(var d,p=e.formIndex,f=t(n.Instance.state.actors);!(d=f()).done;){var I=d.value,h=n.Instance.actorMap.get(I.id);h&&h.squareFormArr.push(p)}}},a(n,null,[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,l,r,a,g,h,c,p,C,d,m,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,c=t.instantiate,p=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,T=t.Component}],execute:function(){var L,f,M,b,v,x,E,S,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),f=y(r),M=y(r),b=y(r),L((E=e((x=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",E,n(e)),i(e,"singleModeToggle",S,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=c(s);l.parent=this.node,l.name="Buttons";var r=c(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var T=c(this.EnableAllCompositeModeButton.getChildByName("Label"));T.setPosition(i+(u>0?450:150),n,0),T.setScale(.75,.75,.75),T.parent=r;var L=T.getComponent(p);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=a.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var f=0,M=0;M<this.strSingle.length;M++,f++){M===this.strSingle.length>>1&&(i+=200,f=0);var b=M?c(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*f,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var v=b.getComponentInChildren(C);v.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=v,this.textContentList[this.textContentList.length]=v.string,b.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=x;var E=c(this.EnableAllCompositeModeButton);E.setPosition(i+90,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.changeTextColor,this),E.parent=l,(x=E.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var S=c(this.EnableAllCompositeModeButton);S.setPosition(i+200,n,0),S.setScale(.5,.5,.5),S.on(m.EventType.CLICK,this.hideUI,this),S.parent=this.node.parent,(x=S.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=c(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?c(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(T)).prototype,"compositeModeToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(x.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/Enum.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var i,n,o,r;e({ApiMsgEnum:void 0,EntityTypeEnum:void 0,InputTypeEnum:void 0,ServerEventName:void 0}),t._RF.push({},"1b143Xn+KZHx7U1j6S23GKG","Enum",void 0),function(e){e.Connect="Connect",e.DisConnect="DisConnect"}(i||(i=e("ServerEventName",{}))),function(e){e[e.ApiPlayerList=0]="ApiPlayerList",e[e.ApiPlayerJoin=1]="ApiPlayerJoin",e[e.ApiRoomList=2]="ApiRoomList",e[e.ApiRoomCreate=3]="ApiRoomCreate",e[e.ApiRoomJoin=4]="ApiRoomJoin",e[e.ApiRoomLeave=5]="ApiRoomLeave",e[e.ApiGameStart=6]="ApiGameStart",e[e.ApiGameEnd=7]="ApiGameEnd",e[e.MsgPlayerList=8]="MsgPlayerList",e[e.MsgRoomList=9]="MsgRoomList",e[e.MsgRoom=10]="MsgRoom",e[e.MsgGameStart=11]="MsgGameStart",e[e.MsgGameEnd=12]="MsgGameEnd",e[e.MsgClientSync=13]="MsgClientSync",e[e.MsgServerSync=14]="MsgServerSync"}(n||(n=e("ApiMsgEnum",{}))),function(e){e[e.SquareBirth=0]="SquareBirth",e[e.SquareControl=1]="SquareControl",e[e.TimePast=2]="TimePast"}(o||(o=e("InputTypeEnum",{}))),function(e){e.Map1="Map1",e.Actor1="Actor1",e.Actor2="Actor2",e.Explosion="Explosion"}(r||(r=e("EntityTypeEnum",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/Enum2.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var o,n,a,i,u,c,d,r,T,S,D;e({FurnitureEditStatus:void 0,GameStatus:void 0,HomeStayLocation:void 0,NodePoolName:void 0,PlayerStatus:void 0,SceneName:void 0,SquareDir:void 0,SquareDropSpeed:void 0,SquareStatus:void 0,TouchLayerType:void 0,WndID:void 0}),t._RF.push({},"211caiNc51AYYgpHVFC02zP","Enum",void 0),function(e){e.GameBattle="GameBattle"}(o||(o=e("SceneName",{}))),function(e){e.WndTask="WndTask",e.WndAchi="WndAchi",e.WndAchiDetails="WndAchiDetails",e.WndBattleRoom="WndBattleRoom",e.WndTimer="WndTimer"}(n||(n=e("WndID",{}))),function(e){e.WndToast="WndToast"}(a||(a=e("NodePoolName",{}))),function(e){e[e.INDOOR=0]="INDOOR",e[e.OUTDOOR=1]="OUTDOOR"}(i||(i=e("HomeStayLocation",{}))),function(e){e.INIT="INIT",e.EDIT="EDIT",e.MOVE="MOVE"}(u||(u=e("FurnitureEditStatus",{}))),function(e){e.Player="Player",e.WallDecor="WallDecor",e.AchiBauble="AchiBauble"}(c||(c=e("TouchLayerType",{}))),function(e){e.Idle="Idle",e.MoveToLeft="MoveToLeft",e.MoveToRight="MoveToRight"}(d||(d=e("PlayerStatus",{}))),function(e){e[e.UP=0]="UP",e[e.LEFT=1]="LEFT",e[e.DOWN=2]="DOWN",e[e.RIGHT=3]="RIGHT",e[e.AROUND=4]="AROUND"}(r||(r=e("SquareDir",{}))),function(e){e[e.DROP=0]="DROP",e[e.STACK=1]="STACK",e[e.CLEAR=2]="CLEAR",e[e.FILL=3]="FILL",e[e.SHOW=4]="SHOW"}(T||(T=e("SquareStatus",{}))),function(e){e[e.BEGIN=0]="BEGIN",e[e.END=1]="END",e[e.CLEAR=2]="CLEAR"}(S||(S=e("GameStatus",{}))),function(e){e[e.NORMAL=1.2]="NORMAL",e[e.QUICK=.1]="QUICK"}(D||(D=e("SquareDropSpeed",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){"use strict";var e,n,E,c,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){E=t.cclegacy,c=t.EventTarget},function(t){r=t.default}],execute:function(){var A;t("EventName",void 0),E._RF.push({},"4ebf08i6F9Jyodx2bQc1nmU","EventManager",void 0),t("EventManager",function(t){function E(){return t.apply(this,arguments)||this}return e(E,t),E.on=function(t,e,n){this.eventTarget.on(t,e,n)},E.off=function(t,e,n){this.eventTarget.off(t,e,n)},E.emit=function(t){for(var e,n=arguments.length,E=new Array(n>1?n-1:0),c=1;c<n;c++)E[c-1]=arguments[c];(e=this.eventTarget).emit.apply(e,[t].concat(E))},n(E,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),E}(r)).eventTarget=new c,function(t){t.TASK_ScrollBEGAN="TASK_ScrollBEGAN",t.TASK_ScrollENDED="TASK_ScrollENDED",t.FURNITUREE_EditEnd="FURNITUREE_EditEnd",t.SQUARE_Birth="SQUARE_Birth",t.SQUARE_Render="SQUARE_Render",t.SQUARE_ActDROP="SQUARE_ActDROP",t.SQUARE_ActLEFT="SQUARE_ActLEFT",t.SQUARE_ActRIGHT="SQUARE_ActRIGHT",t.SQUARE_ActROTATE="SQUARE_ActROTATE",t.SQUARE_ActFALLDOWN="SQUARE_ActFALLDOWN",t.SQUARE_DESTROY="SQUARE_DESTROY",t.SQUARE_UpdateSHAPE="SQUARE_UpdateSHAPE",t.GameStart="GameStart",t.GameEnd="GameEnd",t.ClientSync="ClientSync"}(A||(A=t("EventName",{}))),E._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./SquareItem.ts","./EventManager.ts","./Utils.ts","./Enum2.ts","./ResUtils.ts"],(function(r){"use strict";var e,t,a,n,u,i,o,s,c,l,h,f,p,d,S,q,m,g,A,v;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,a=r.initializerDefineProperty,n=r.assertThisInitialized,u=r.asyncToGenerator,i=r.regeneratorRuntime},function(r){o=r.cclegacy,s=r._decorator,c=r.Node,l=r.Prefab,h=r.Component},function(r){f=r.default},function(r){p=r.SquareItem},function(r){d=r.EventManager,S=r.EventName},function(r){q=r.default},function(r){m=r.SquareDropSpeed,g=r.SquareDir,A=r.SquareStatus},function(r){v=r.default}],execute:function(){var b,N,I,D,k,E,w,R;r("GameStatus",void 0),o._RF.push({},"757d5mO2z1DBYnu9U1AIW33","GameManager",void 0);var C,x=s.ccclass,y=s.property;r("GameManager",(b=x("GameManager"),N=y({type:c,displayName:"方块父节点"}),I=y({type:l,displayName:"方块预制体"}),b(((R=function(r){function e(){for(var e,t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];return e=r.call.apply(r,[this].concat(u))||this,a(e,"nodeSquareParent",E,n(e)),a(e,"prafabSquare",w,n(e)),e.gameStatus=void 0,e.allSquareNodeArr=[],e.curSquareNodeArr=[],e.curSquareDir=void 0,e.curSquareID=void 0,e.squareIdArr=[],e.timer=0,e}t(e,r);var o=e.prototype;return o.onLoad=function(){e.Instance=this,f.squareDropSpeed=m.NORMAL,this.gameStatus=C.BEGIN},o.start=function(){this.createSquareItem()},o.update=function(r){this.gameStatus===C.BEGIN&&(this.timer+=r,this.timer<f.squareDropSpeed||(q.consoleLog("打印"),this.timer=0,this.playSquareDrop()))},o.createSquareItem=function(){var r=this;this.updateRandomSquareIdArr(),this.curSquareNodeArr=[],this.curSquareDir=g.UP,v.createSquareItem(this.curSquareID,this.nodeSquareParent,this.prafabSquare).forEach((function(e){r.curSquareNodeArr.push(e)}))},o.playSquareDrop=function(){var r=u(i().mark((function r(){var e,t;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==this.curSquareNodeArr.length){r.next=2;break}return r.abrupt("return");case 2:if(!this.isTouchBottom(this.curSquareNodeArr)){r.next=20;break}q.consoleLog("停止下降"),e=0;case 6:if(!(e<this.curSquareNodeArr.length)){r.next=16;break}if((t=this.curSquareNodeArr[e].getComponent(p)).status=A.STACK,this.allSquareNodeArr.push(t.node),!(t.row>f.gridRow-1)){r.next=13;break}return this.gameStatus=C.END,r.abrupt("return");case 13:e++,r.next=6;break;case 16:return r.next=18,this.clearSquare();case 18:return this.createSquareItem(),r.abrupt("return");case 20:d.emit(S.SQUARE_ActDROP);case 21:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.clearSquare=function(){var r=u(i().mark((function r(){var e,t,a,n,u,o,s,c,l,h,q,m,g,v;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=[[]],t=[],a=0,r.t0=i().keys(this.allSquareNodeArr);case 4:if((r.t1=r.t0()).done){r.next=14;break}if(n=r.t1.value,s=null==(u=this.allSquareNodeArr[n])?void 0:u.getComponent(p)){r.next=9;break}return r.abrupt("continue",4);case 9:c=s.row,l={itemComp:s,id:n},null!=(o=e[c])&&o.length?(e[c].push(l),e[c].length>=f.gridCol&&(a++,e[c].forEach((function(r){var e=r.itemComp;t.push(e.node)})))):(e[c]=[],e[c][0]=l),r.next=4;break;case 14:if(t.length){r.next=16;break}return r.abrupt("return");case 16:this.gameStatus=C.CLEAR,h=0;case 18:if(!(h<t.length)){r.next=36;break}q=t[h].getComponent(p),m=0;case 21:if(!(m<this.allSquareNodeArr.length)){r.next=33;break}if(v=null==(g=this.allSquareNodeArr[m])?void 0:g.getComponent(p)){r.next=25;break}return r.abrupt("continue",30);case 25:if(v.row!==q.row||v.col!==q.col){r.next=29;break}return v.status=A.CLEAR,this.allSquareNodeArr.splice(m,1),r.abrupt("continue",30);case 29:v.row>q.row&&(v.status=A.FILL);case 30:m++,r.next=21;break;case 33:h++,r.next=18;break;case 36:return d.emit(S.SQUARE_DESTROY),r.next=39,this.sleep(1);case 39:d.emit(S.SQUARE_ActFALLDOWN,a),this.gameStatus=C.BEGIN;case 41:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.updateRandomSquareIdArr=function(){if(this.squareIdArr.length){this.squareIdArr.splice(0,1);var r=q.random(0,f.squareArr.length-1);this.squareIdArr.push(r)}else for(var e=0;e<f.preSquareCount+1;e++){var t=q.random(0,f.squareArr.length-1);this.squareIdArr.push(t)}this.curSquareID=this.squareIdArr[0],q.consoleLog("预示方块组",this.squareIdArr);for(e=1;e<=f.preSquareCount;e++){var a=this.squareIdArr[e];d.emit(S.SQUARE_UpdateSHAPE,a,e)}},o.getGridAfterRotate=function(r,e,t){var a=f.squareArr[this.curSquareID][this.curSquareDir][t],n=(this.curSquareDir+1)%4,u=f.squareArr[this.curSquareID][n][t],i=v.getGridFromIndex(a),o=v.getGridFromIndex(u);return{col:r+(o.col-i.col),row:e+(o.row-i.row)}},o.isTouchSquare=function(r){if(0===this.allSquareNodeArr.length)return!1;for(var e=f.gridCol,t=0;t<this.curSquareNodeArr.length;t++)for(var a=this.curSquareNodeArr[t].getComponent(p),n=a.row*e+a.col,u=0;u<this.allSquareNodeArr.length;u++){var i;if(this.allSquareNodeArr[u].isValid){var o=null==(i=this.allSquareNodeArr[u])?void 0:i.getComponent(p);if(o){var s=o.row*e+o.col,c=n-e===s,l=n-1===s&&a.col>0,h=n+1===s&&a.col<e-1;switch(r){case g.DOWN:if(c)return!0;break;case g.LEFT:if(l)return!0;break;case g.RIGHT:if(h)return!0;break;case g.AROUND:if(c)return!0;if(l)return!0;if(h)return!0;if(n+e===s)return!0}}}}return!1},o.isTouchBottom=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(p).row<=0){e=!0;break}}return e||(e=this.isTouchSquare(g.DOWN)),e},o.isTouchLeft=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(p).col<=0){e=!0;break}}return e||(e=this.isTouchSquare(g.LEFT)),e},o.isTouchRight=function(r){for(var e=!1,t=0;t<r.length;t++){if(r[t].getComponent(p).col>=f.gridCol-1){e=!0;break}}return e||(e=this.isTouchSquare(g.RIGHT)),e},o.isEnableRotate=function(r){var e=this.isTouchSquare(g.AROUND);if(!e)for(var t=0;t<r.length;t++){var a=r[t].getComponent(p),n=this.getGridAfterRotate(a.col,a.row,a.squareIndex);if(n.col>f.gridCol-1||n.col<0||n.row<0){e=!0;break}}return e},o.sleep=function(){var r=u(i().mark((function r(e){var t=this;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,a){t.scheduleOnce((function(){return r()}),e)})));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e}(h)).Instance=null,E=e((k=R).prototype,"nodeSquareParent",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(k.prototype,"prafabSquare",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=k))||D));!function(r){r[r.BEGIN=0]="BEGIN",r[r.END=1]="END",r[r.CLEAR=2]="CLEAR"}(C||(C=r("GameStatus",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/GamePlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,o,n,e,a;return{setters:[function(t){r=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,e=t.sys,a=t.Component}],execute:function(){var c,s;o._RF.push({},"15809v2PjxCCKc59J2RlsZg","GamePlatform",void 0);var l=n.ccclass;n.property,t("GamePlatform",l("GamePlatform")(((s=function(t){function o(){for(var r,o=arguments.length,n=new Array(o),e=0;e<o;e++)n[e]=arguments[e];return(r=t.call.apply(t,[this].concat(n))||this).platform=void 0,r}r(o,t);var n=o.prototype;return n.onLoad=function(){o.Instance=this,this.platform=e.platform},n.start=function(){},o}(a)).Instance=null,c=s))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./EventManager.ts","./Config.ts","./Enum2.ts","./PreSquare.ts","./Utils.ts"],(function(e){"use strict";var n,t,r,o,a,i,u,c,s,l,p,f,d,h,S,m,R,q;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,u=e.Node,c=e.Prefab,s=e.Input,l=e.instantiate,p=e.Component},function(e){f=e.GameManager},function(e){d=e.EventManager,h=e.EventName},function(e){S=e.default},function(e){m=e.SquareDropSpeed},function(e){R=e.PreSquare},function(e){q=e.default}],execute:function(){var E,I,y,D,T,g,b,P,v;a._RF.push({},"87e0buQFbRFc4mus4jFG4+M","GameUI",void 0);var A=i.ccclass,w=i.property;e("GameUI",(E=A("GameUI"),I=w({type:u,displayName:"预示方块父节点"}),y=w({type:c,displayName:"预示方块预制体"}),D=w({type:u,displayName:"下键节点"}),E((b=n((g=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,r(n,"nodePreSquareParent",b,o(n)),r(n,"prefabPreSquare",P,o(n)),r(n,"nodeDownBtn",v,o(n)),n}t(n,e);var a=n.prototype;return a.onLoad=function(){this.nodeDownBtn.on(s.EventType.TOUCH_START,this.onDownBtnTouchStart,this),this.nodeDownBtn.on(s.EventType.TOUCH_END,this.onDownBtnTouchEnd,this),this.nodeDownBtn.on(s.EventType.TOUCH_CANCEL,this.onDownBtnTouchEnd,this)},a.start=function(){this.createPreSquareItem()},a.createPreSquareItem=function(){for(var e=1;e<=S.preSquareCount;e++){var n=l(this.prefabPreSquare);n.setParent(this.nodePreSquareParent),n.getComponent(R).init(e,f.Instance.squareIdArr[e])}},a.clickLeftBtn=function(){f.Instance.isTouchLeft(f.Instance.curSquareNodeArr)?q.consoleLog("左移ERROR"):d.emit(h.SQUARE_ActLEFT)},a.clickRightBtn=function(){f.Instance.isTouchRight(f.Instance.curSquareNodeArr)?q.consoleLog("右移ERROR"):d.emit(h.SQUARE_ActRIGHT)},a.clickRotateBtn=function(){f.Instance.isEnableRotate(f.Instance.curSquareNodeArr)?q.consoleLog("旋转ERROR"):(d.emit(h.SQUARE_ActROTATE),f.Instance.curSquareDir++,f.Instance.curSquareDir>=4&&(f.Instance.curSquareDir=0))},a.onDownBtnTouchStart=function(e){S.squareDropSpeed=m.QUICK},a.onDownBtnTouchEnd=function(e){S.squareDropSpeed=m.NORMAL},n}(p)).prototype,"nodePreSquareParent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(g.prototype,"prefabPreSquare",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(g.prototype,"nodeDownBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=g))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./PoolManager.ts","./Enum2.ts"],(function(e){"use strict";var n,t,r,i,a,o,l,u,c,s,p,f,y,d,b,g,m,h,P;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,c=e.JsonAsset,s=e.Material,p=e.Node,f=e.Prefab,y=e.SpriteFrame,d=e.director,b=e.macro,g=e.Component},function(e){m=e.default},function(e){h=e.default},function(e){P=e.NodePoolName}],execute:function(){var w,N,v,C,z,I,T,A,G,R,F,W,D,E,L,_,j,k;l._RF.push({},"e6b54aXLxZATIUy6qALPnCr","Global",void 0);var S=u.ccclass,x=u.property;e("Global",(w=S("Global"),N=x({type:c,displayName:"全局配置文件"}),v=x({type:s,displayName:"默认材质"}),C=x({type:s,displayName:"置灰材质"}),z=x({type:p,displayName:"弹窗父节点"}),I=x({type:f,displayName:"提示弹窗预制体"}),T=x({type:f,displayName:"飞行物奖励预制体"}),A=x({type:y,displayName:"货币图片组"}),w(((k=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,r(n,"config",F,i(n)),r(n,"materialDefault",W,i(n)),r(n,"materialGray",D,i(n)),r(n,"nodeWndParent",E,i(n)),r(n,"prefabWndToast",L,i(n)),r(n,"prefabFlyIcon",_,i(n)),r(n,"currencySpriteArr",j,i(n)),n}t(n,e);var l=n.prototype;return l.onLoad=function(){n.Instance=this,d.addPersistRootNode(this.node.parent),m.signConfig=this.config.json.signConfig,m.taskConfig=this.config.json.taskConfig,m.achiConfig=this.config.json.achiConfig},l.start=function(){h.createPool(P.WndToast,this.prefabWndToast)},l.update=function(e){},n.scheduleCB=function(e,t,r){void 0===r&&(r=b.REPEAT_FOREVER),n.Instance.schedule((function(){return e()}),t,r)},n.sleep=function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.Instance.scheduleOnce((function(){return e()}),t)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n}(g)).Instance=null,F=n((R=k).prototype,"config",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(R.prototype,"materialDefault",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(R.prototype,"materialGray",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(R.prototype,"nodeWndParent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(R.prototype,"prefabWndToast",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(R.prototype,"prefabFlyIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(R.prototype,"currencySpriteArr",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=R))||G));l._RF.pop()}}}));

System.register("chunks:///_virtual/HallManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts","./Enum.ts","./DataManager.ts","./ServerUtils.ts"],(function(e){"use strict";var n,r,t,o,a,s,c,i,u,l;return{setters:[function(e){n=e.inheritsLoose,r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e._decorator,s=e.Component},function(e){c=e.NetworkManager},function(e){i=e.ApiMsgEnum},function(e){u=e.default},function(e){l=e.default}],execute:function(){var p,f;o._RF.push({},"63422z5wrlC06dH6t2dLGFj","HallManager",void 0);var m=a.ccclass;a.property,e("HallManager",m("HallManager")(((f=function(e){function o(){for(var n,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return(n=e.call.apply(e,[this].concat(t))||this).roomList=void 0,n}n(o,e);var a=o.prototype;return a.onLoad=function(){o.Instance=this,c.Instance.listenMsg(i.MsgRoomList,this.listRoom,this)},a.start=function(){this.getRooms()},a.onDestroy=function(){c.Instance.unlistenMsg(i.MsgRoomList,this.listRoom,this)},a.getRooms=function(){var e=r(t().mark((function e(){var n,r,o,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Instance.callApi(i.ApiRoomList,{});case 2:if(n=e.sent,r=n.success,o=n.res,a=n.error,r){e.next=9;break}return console.log(a),e.abrupt("return");case 9:this.listRoom(o);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.listRoom=function(e){var n=e.list;this.roomList=l.deepClone(n)},a.matchRoom=function(){var e=r(t().mark((function e(){var n=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(r(t().mark((function e(r,o){var a,s,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0;case 1:if(0!==n.roomList.length){e.next=3;break}return e.abrupt("break",16);case 3:s=0;case 4:if(!(s<n.roomList.length)){e.next=15;break}if(!((c=n.roomList[s]).players.length>1)){e.next=8;break}return e.abrupt("continue",12);case 8:return e.next=10,n.handleJoinRoom(c.id);case 10:return a=!1,e.abrupt("break",15);case 12:s++,e.next=4;break;case 15:case 16:if(!a){e.next=19;break}return e.next=19,n.handleCreateRoom();case 19:r();case 20:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.handleCreateRoom=function(){return new Promise(r(t().mark((function e(n,r){var o,a,s,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Instance.callApi(i.ApiRoomCreate,{});case 2:if(o=e.sent,a=o.success,s=o.res,l=o.error,a){e.next=9;break}return console.log(l),e.abrupt("return");case 9:console.log("ApiRoomCreate",s),u.Instance.roomInfo=s.room,n();case 12:case"end":return e.stop()}}),e)}))))},a.handleJoinRoom=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(r(t().mark((function e(r,o){var a,s,l,p;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Instance.callApi(i.ApiRoomJoin,{roomId:n});case 2:if(a=e.sent,s=a.success,l=a.res,p=a.error,s){e.next=10;break}return console.log(p),r(!1),e.abrupt("return");case 10:u.Instance.roomInfo=l.room,r(!0);case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o}(s)).Instance=null,p=f))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/HandleManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./CommonUtils.ts","./DataManager.ts","./Enum2.ts"],(function(t){"use strict";var n,e,o,i,r,s,u,a,c,h,l,d;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Node,r=t.UITransform,s=t.Vec3,u=t.Vec2,a=t.Component},function(t){c=t.default},function(t){h=t.default},function(t){l=t.default},function(t){d=t.SquareDropSpeed}],execute:function(){var p,T;e._RF.push({},"12897ak4R9Ff6Uu4alZjaxQ","HandleManager",void 0);var f=o.ccclass;o.property,t("HandleManager",f("HandleManager")(((T=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).inputCol=0,n.inputDir=0,n.inputSpeed=d.NORMAL,n.curPressTimer=0,n.applyPressEventTime=d.QUICK,n.nodeTouchBtn=null,n}n(e,t);var o=e.prototype;return o.onLoad=function(){e.Instance=this,this.node.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},o.onDisable=function(){this.node.off(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},o.start=function(){},o.update=function(t){this.nodeTouchBtn&&(this.curPressTimer+=t,this.curPressTimer<this.applyPressEventTime||(this.curPressTimer=0,this.touchEvent()))},o.reset=function(){this.inputCol=0,this.inputDir=0,this.inputSpeed=d.NORMAL,this.curPressTimer=0},o.onTouchStart=function(t){if(!this.nodeTouchBtn){for(var n=t.getLocation(),e=this.node.getComponent(r).convertToNodeSpaceAR(new s(n.x,n.y)),o=new u(e.x,e.y),i=null,a=0;a<this.node.children.length;a++){var h=this.node.children[a];if(c.isBoundContainsPointLocal(h,o)){i=h;break}}i&&(this.nodeTouchBtn=i,this.touchEvent())}},o.onTouchEnd=function(t){this.reset(),this.nodeTouchBtn=null},o.touchEvent=function(){var t=l.Instance.actorMap.get(l.Instance.myPlayerId);switch(this.nodeTouchBtn.name){case"btnLeft":if(h.isTouchLeft(t.allSquareNodeArr,t.curSquareNodeArr))return void c.consoleLog("左移ERROR");this.inputCol=-1;break;case"btnRight":if(h.isTouchRight(t.allSquareNodeArr,t.curSquareNodeArr))return void c.consoleLog("右移ERROR");this.inputCol=1;break;case"btnRotate":if(h.isEnableRotate(t.allSquareNodeArr,t.curSquareNodeArr))return void c.consoleLog("旋转ERROR");this.inputDir=1;break;case"btnDown":this.inputSpeed=d.QUICK}},e}(a)).Instance=null,p=T))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/HomeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./TouchManager.ts","./AchiWall.ts","./Enum2.ts","./AchiBaubleItem.ts","./EventManager.ts","./Config.ts","./WndManager.ts","./ResUtils.ts"],(function(e){"use strict";var o,t,n,i,a,r,c,u,s,h,d,l,y,T,f,g,p,N,L,v,E,b,I,P;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.Node,u=e.UITransform,s=e.Vec3,h=e.Vec2,d=e.Component},function(e){l=e.default},function(e){y=e.TouchManager},function(e){T=e.AchiWall},function(e){f=e.HomeStayLocation,g=e.FurnitureEditStatus,p=e.TouchLayerType,N=e.WndID},function(e){L=e.AchiBaubleItem},function(e){v=e.EventManager,E=e.EventName},function(e){b=e.default},function(e){I=e.WndManager},function(e){P=e.default}],execute:function(){var m,B,M,C,A,S,w,D,R;a._RF.push({},"e963bORr/xK3ZviKXuUkPP+","HomeManager",void 0);var W=r.ccclass,F=r.property;e("HomeManager",(m=W("HomeManager"),B=F({type:c,displayName:"金丝熊节点"}),M=F({type:c,displayName:"室内父节点"}),C=F({type:c,displayName:"室外父节点"}),m((w=o((S=function(e){function o(){for(var o,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return o=e.call.apply(e,[this].concat(a))||this,n(o,"nodePlayer",w,i(o)),n(o,"nodeLayerIndoor",D,i(o)),n(o,"nodeLayerOutdoor",R,i(o)),o.curTouchNode=null,o.curTouchLayerType=null,o.furEditStatus=null,o.stayLocation=void 0,o.nodeAchiBaubleParent=null,o.touchManager=null,o.curMoveNode=null,o}t(o,e);var a=o.prototype;return a.onLoad=function(){l.consoleLog("打开游戏"),this.touchManager=this.node.getComponent(y)},a.start=function(){this.stayLocation=f.INDOOR,this.setFurEditStatus(g.INIT),this.nodeAchiBaubleParent=T.Instance.nodeBaubleParent,this.touchManager.onPressCB=this.onPress.bind(this),this.touchManager.onPressEndCB=this.onPressEnd.bind(this),this.touchManager.onTouchStartCB=this.onTouchStart.bind(this),this.touchManager.onTouchMoveCB=this.onTouchMove.bind(this),this.touchManager.onTouchMoveEndCB=this.onTouchMoveEnd.bind(this),this.touchManager.onTouchEndCB=this.onTouchEnd.bind(this)},a.onEnable=function(){v.on(E.FURNITUREE_EditEnd,this.furEditEnd,this)},a.onDisable=function(){v.off(E.FURNITUREE_EditEnd,this.furEditEnd)},a.furEditEnd=function(){this.curTouchNode=null,this.curTouchLayerType=null,this.setFurEditStatus(g.INIT)},a.setFurEditStatus=function(e){this.furEditStatus=e},a.onPressEnd=function(e){if(this.furEditStatus===g.INIT&&this.curTouchNode)switch(l.consoleLog("长按结束"),this.curTouchLayerType){case p.WallDecor:case p.AchiBauble:}},a.onPress=function(e){if(this.furEditStatus===g.INIT){l.consoleLog("长按成功");var o=this.getTouchNode(e);if(o.type!==p.Player&&(this.curTouchNode=o.node,this.curTouchLayerType=o.type),this.curTouchNode)switch(l.consoleLog("触摸了",this.curTouchNode.name),this.setFurEditStatus(g.EDIT),this.curTouchLayerType){case p.WallDecor:break;case p.AchiBauble:this.curTouchNode.getComponent(L).setStatus(g.EDIT),this.curTouchNode.getComponent(L).setEditStatus(!0)}else P.showToastWnd("请长按正确的物品")}else P.showToastWnd("正在编辑物品")},a.onTouchStart=function(e){var o=e.getLocation(),t=!1;if(this.curTouchNode){var n=this.curTouchNode.parent.getComponent(u).convertToNodeSpaceAR(new s(o.x,o.y)),i=new h(n.x,n.y);t=l.isBoundContainsPointLocal(this.curTouchNode,i)}this.curMoveNode=t?this.curTouchNode:this.stayLocation===f.INDOOR?this.nodeLayerIndoor:this.nodeLayerOutdoor,this.furEditStatus===g.INIT?(this.curTouchNode=null,this.curTouchLayerType=null):l.consoleLog("touchStart Failed: 正在编辑")},a.onTouchMove=function(e){var o=e.getDelta(),t=this.curMoveNode.getPosition().x+o.x,n=this.curMoveNode.getPosition().y+o.y;if(this.curMoveNode.setPosition(t,n,0),this.curMoveNode===this.curTouchNode&&this.curTouchLayerType===p.AchiBauble){for(var i=l.isBoundContainsRectLocal(T.Instance.nodeBaubleParent,this.curTouchNode),a=!1,r=0;r<this.nodeAchiBaubleParent.children.length;r++){var c=this.nodeAchiBaubleParent.children[r];if(this.curTouchNode!=c&&(a=l.isBoundIntersectsRectLocal(c,this.curTouchNode)))break}this.curTouchNode.getComponent(L).setEditStatus(i&&!a)}},a.onTouchMoveEnd=function(e){if(this.curTouchNode)switch(l.consoleLog("移动结束"),this.curTouchLayerType){case p.WallDecor:case p.AchiBauble:}},a.onTouchEnd=function(e){if(this.curMoveNode=null,this.furEditStatus===g.INIT){var o=this.getTouchNode(e);if(o.node)switch(l.consoleLog("触发点击"),o.type){case p.Player:P.showToastWnd("与金丝熊的亲密值+3");var t=this.nodePlayer.getComponent(u).contentSize,n=this.nodePlayer.getWorldPosition(),i=new s(n.x+t.x/2,n.y+t.y),a=T.Instance.nodeBaubleParent.getChildByName("e").getWorldPosition();P.playFlyIconAnimation(i,a,"favor",b.addFavorCount,this.nodePlayer.parent.getChildByName("nodeFlyParent"));break;case p.WallDecor:break;case p.AchiBauble:var r=o.node.name;b.chooseAchiID=l.letterCaseToNum(r),I.Instance.show(N.WndAchi),l.consoleLog("打开成就物品详情弹窗",r)}}else l.consoleLog("onTouchEnd Failed: 正在编辑")},a.onOpenDoorBtnClick=function(){var e=this.nodeLayerIndoor.getChildByName("door");this.stayLocation!==f.INDOOR&&(e=this.nodeLayerOutdoor.getChildByName("door")),l.isBoundContainsRectLocal(e,this.nodePlayer)?l.consoleLog("开门成功"):P.showToastWnd("请移动到门口")},a.getTouchNode=function(e){var o=e.getLocation(),t=this.getTouchIndoorNode(o);return t.node||l.consoleLog("本次触摸无返回值"),t},a.getTouchIndoorNode=function(e){for(var o=this.nodeLayerIndoor.getComponent(u).convertToNodeSpaceAR(new s(e.x,e.y)),t=new h(o.x,o.y),n=this.nodeAchiBaubleParent.getComponent(u).convertToNodeSpaceAR(new s(e.x,e.y)),i=new h(n.x,n.y),a=this.nodeLayerIndoor.children.length,r=null,c=null,d=0;d<a;d++){var y=this.nodeLayerIndoor.children[d];if(l.isBoundContainsPointLocal(y,t)&&"nodeFlyParent"!==y.name){if(r=y,"player"===y.name){c=p.Player;break}if(c=p.WallDecor,"achiParent"!==y.name)break;r=null,c=null;for(var T=0;T<this.nodeAchiBaubleParent.children.length;T++){var f=this.nodeAchiBaubleParent.children[T];l.isBoundContainsPointLocal(f,i)&&(r=f,c=p.AchiBauble)}}}return{node:r,type:c}},o}(d)).prototype,"nodePlayer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=o(S.prototype,"nodeLayerIndoor",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=o(S.prototype,"nodeLayerOutdoor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=S))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/HomeUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WndManager.ts","./Enum2.ts","./HallManager.ts"],(function(n){"use strict";var t,e,r,o,a,c,s,u,i,f;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){o=n.cclegacy,a=n._decorator,c=n.director,s=n.Component},function(n){u=n.WndManager},function(n){i=n.WndID},function(n){f=n.HallManager}],execute:function(){var l;o._RF.push({},"ff753LVCfhD+6aGdG76fE3g","HomeUI",void 0);var p=a.ccclass;a.property,n("HomeUI",p("HomeUI")(l=function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var a=o.prototype;return a.start=function(){},a.onTaskBtnClick=function(){u.Instance.show(i.WndTask)},a.onStartBtnClick=function(){c.loadScene("Game")},a.onMatchBtnClick=function(){var n=e(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.Instance.matchRoom();case 2:u.Instance.show(i.WndBattleRoom);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),o}(s))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts","./Enum.ts","./DataManager.ts"],(function(e){"use strict";var n,r,t,a,o,c,i,s,u,l,p,f,d,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){i=e.cclegacy,s=e._decorator,u=e.EditBox,l=e.director,p=e.Component},function(e){f=e.NetworkManager},function(e){d=e.ApiMsgEnum},function(e){g=e.default}],execute:function(){var y,m,h,x,v;i._RF.push({},"e951aTHhDlB2ZaP/XdMZP1k","LoadManager",void 0);var k=s.ccclass,M=s.property;e("LoadManager",(y=k("LoadManager"),m=M({type:u,displayName:"名字输入框"}),y((v=n((x=function(e){function n(){for(var n,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=e.call.apply(e,[this].concat(o))||this,t(n,"editBoxName",v,a(n)),n}r(n,e);var i=n.prototype;return i.onLoad=function(){l.preloadScene("Home")},i.start=function(){var e=o(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Instance.connect();case 2:console.log("服务连接成功！");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.handleClick=function(){var e=o(c().mark((function e(){var n,r,t,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.Instance.isConnected){e.next=4;break}return console.log("未连接！"),e.next=4,f.Instance.connect();case 4:if(n=this.editBoxName.string){e.next=8;break}return console.log("请输入昵称！"),e.abrupt("return");case 8:return e.next=10,f.Instance.callApi(d.ApiPlayerJoin,{nickName:n});case 10:if(r=e.sent,t=r.success,a=r.res,o=r.error,t){e.next=17;break}return console.log(o),e.abrupt("return");case 17:console.log(n,"res",a),g.Instance.myPlayerId=a.player.id,l.loadScene("Home");case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n}(p)).prototype,"editBoxName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=x))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Config.ts","./Global.ts","./LoadManager.ts","./Constant.ts","./Enum2.ts","./ResUtils.ts","./Singleton.ts","./Utils.ts","./GamePlatform.ts","./DataManager.ts","./EventManager.ts","./HallManager.ts","./NetworkManager.ts","./PoolManager.ts","./ResManager.ts","./TouchManager.ts","./WndManager.ts","./Api.ts","./Binary.ts","./Enum.ts","./Model.ts","./Msg.ts","./ServerUtils.ts","./State.ts","./BattleManager.ts","./CommonUtils.ts","./ActorManager.ts","./SquareItem2.ts","./SquareManager.ts","./HandleManager.ts","./GameManager.ts","./GameUI.ts","./PreSquare.ts","./SquareItem.ts","./WndTimer.ts","./AchiWall.ts","./HomeManager.ts","./HomeUI.ts","./WndAchi.ts","./WndAchiDetails.ts","./WndBattleRoom.ts","./WndTask.ts","./AchiBaubleItem.ts","./TaskItem.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Model.ts",["cc","./Enum.ts"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy},null],execute:function(){e._RF.push({},"b45beXi+cdOfbFaoX4hayGq","Model",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Msg.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"a6c008oIj9B2bNVtXR/+DGF","Msg",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Singleton.ts"],(function(n){"use strict";var e,t,s,r,o,c,i;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass,s=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){o=n.cclegacy},function(n){c=n.default},function(n){i=n.default}],execute:function(){o._RF.push({},"469219unllH1rEudZovU5lo","NetworkManager",void 0);n("NetworkManager",function(n){function o(){for(var e,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(e=n.call.apply(n,[this].concat(s))||this).ws=void 0,e.maps=new Map,e.isConnected=!1,e}e(o,n);var i=o.prototype;return i.connect=function(){var n=this;return new Promise((function(e,t){n.isConnected?e(!0):(n.ws=new WebSocket("ws://"+c.serverUrl+":"+c.serverPort),n.ws.binaryType="arraybuffer",n.ws.onopen=function(){n.isConnected=!0,e(!0)},n.ws.onerror=function(e){n.isConnected=!1,console.log(e),t("ws onerror")},n.ws.onclose=function(){n.isConnected=!1,t("ws onclose")},n.ws.onmessage=function(e){try{var t=JSON.parse(e.data),s=t.name,r=t.data;n.maps.has(s)&&n.maps.get(s).length&&n.maps.get(s).forEach((function(n){var e=n.cb,t=n.ctx;return e.call(t,r)}))}catch(n){console.log("解析失败，不是合法的JSON格式",n)}})}))},i.callApi=function(n,e){var t=this;return new Promise((function(s){try{var r=setTimeout((function(){s({success:!1,error:new Error("timeout")}),t.unlistenMsg(n,o,null)}),5e3),o=function e(o){s(o),clearTimeout(r),t.unlistenMsg(n,e,null)};t.listenMsg(n,o,null),t.sendMsg(n,e)}catch(n){s({success:!1,error:n})}}))},i.sendMsg=function(){var n=s(r().mark((function n(e,t){var s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=JSON.stringify({name:e,data:t}),this.ws.send(s);case 2:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}(),i.listenMsg=function(n,e,t){this.maps.has(n)?this.maps.get(n).push({ctx:t,cb:e}):this.maps.set(n,[{ctx:t,cb:e}])},i.unlistenMsg=function(n,e,t){if(this.maps.has(n)){var s=this.maps.get(n),r=s.findIndex((function(n){return e===n.cb&&n.ctx===t}));r>-1&&s.splice(r,1)}},t(o,null,[{key:"Instance",get:function(){return n.GetInstance.call(this)}}]),o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["cc"],(function(t){"use strict";var o,l,e;return{setters:[function(t){o=t.cclegacy,l=t.instantiate,e=t.NodePool}],execute:function(){o._RF.push({},"90777IDfTlFHbau7OUSq/Mv","PoolManager",void 0);var i=t("AutoNodePool",function(){function t(t,o){this.prefab=void 0,this.scripteName=void 0,this.pool=void 0,this.prefab=t,this.scripteName=o,this.pool=new e(o)}var o=t.prototype;return o.get=function(t){var o=this.pool.get(t);if(o)console.log("对象池中取到对象名称："+o.name);else if(o=l(this.prefab),this.scripteName){var e=o.getComponent(this.scripteName);e?e.init(t):this.scripteName=null}return o},o.put=function(t){this.pool.put(t)},o.clear=function(){this.pool.clear()},t}());t("default",function(){function t(){}return t.createPool=function(t,o,l){this.allPools[t]||(this.allPools[t]=new i(o,l))},t.get=function(t,o){return this.allPools[t]?this.allPools[t].get(o):null},t.put=function(t,o){if(o||(o=t.name),!this.allPools[o]){console.warn("未创建对应名称的对象池，将销毁节点：",o);var l=t.getComponent(o);return l&&l.unuse&&l.unuse(),void t.destroy()}this.allPools[o].put(t)},t.putAllChildren=function(t){for(var o=t.children.length-1;o>=0;--o){var l=t.children[o];this.put(l)}},t.clear=function(t){if(t)this.allPools[t]&&(this.allPools[t].clear(),delete this.allPools[t]);else{for(var o in this.allPools)this.allPools[o].clear();this.allPools={}}},t}()).allPools={},o._RF.pop()}}}));

System.register("chunks:///_virtual/PreSquare.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum2.ts","./EventManager.ts","./SquareItem.ts","./ResUtils.ts","./Config.ts"],(function(e){"use strict";var r,t,n,a,i,u,o,s,c,f,l,p,S,h,d;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,u=e._decorator,o=e.Node,s=e.Prefab,c=e.Component},function(e){f=e.SquareStatus},function(e){l=e.EventManager,p=e.EventName},function(e){S=e.SquareItem},function(e){h=e.default},function(e){d=e.default}],execute:function(){var q,P,b,y,m,v,E;i._RF.push({},"1016bAdMahJrIkfEcrsoUV7","PreSquare",void 0);var g=u.ccclass,z=u.property;e("PreSquare",(q=g("PreSquare"),P=z({type:o,displayName:"方块父节点"}),b=z({type:s,displayName:"方块预制体"}),q((v=r((m=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return r=e.call.apply(e,[this].concat(i))||this,n(r,"nodeSquareParent",v,a(r)),n(r,"prefabSquare",E,a(r)),r.index=void 0,r}t(r,e);var i=r.prototype;return i.onEnable=function(){l.on(p.SQUARE_UpdateSHAPE,this.refreshPreSquareShape,this)},i.onDisable=function(){l.off(p.SQUARE_UpdateSHAPE,this.refreshPreSquareShape)},i.init=function(e,r){this.index=e,h.createSquareItem(r,this.nodeSquareParent,this.prefabSquare,d.squareGridSize,d.squareGridSize).forEach((function(e){e.getComponent(S).status=f.SHOW}))},i.refreshPreSquareShape=function(e,r){var t;this.index===r&&(null==(t=this.nodeSquareParent.children)||t.forEach((function(r,t){r.getComponent(S).updateShape(e,t)})))},r}(c)).prototype,"nodeSquareParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=r(m.prototype,"prefabSquare",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/ResManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./Constant.ts"],(function(n){"use strict";var e,t,r,a,u,o,s,i,c,l,p,f,d;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass,r=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){u=n.cclegacy,o=n.assetManager,s=n.AudioClip,i=n.Prefab,c=n.sp,l=n.SpriteFrame,p=n.instantiate},function(n){f=n.default},function(n){d=n.Constant}],execute:function(){u._RF.push({},"bf691rWwfpEX4tJgXUoliFA","ResManager",void 0);n("default",function(n){function u(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))||this).audioMap=new Map,e.spriteFrameMap=new Map,e.prefabMap=new Map,e.skeletonDataMap=new Map,e}e(u,n);var f=u.prototype;return f.loadBundleSync=function(n){return new Promise((function(e,t){var r=o.getBundle(n);r?e(r):o.loadBundle(n,(function(t,r){t?(console.log("包"+n+"找不到"),e(null)):e(r)}))}))},f.loadAudioFromBundleSync=function(n,e){return new Promise((function(t,r){n.load(e,s,(function(n,e){n?t(null):t(e)}))}))},f.loadPrefabFromBundleSync=function(n,e){return new Promise((function(t,r){n.load(e,i,(function(n,e){n?t(null):t(e)}))}))},f.loadAudioCo=function(){var n=r(a().mark((function n(e,t,r){var u,s,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===r&&(r=!0),u=e+t,!this.audioMap.has(u)){n.next=4;break}return n.abrupt("return",this.audioMap.get(u));case 4:if(s=o.getBundle(t)){n.next=9;break}return n.next=8,this.loadBundleSync(t);case 8:s=n.sent;case 9:if(s){n.next=11;break}return n.abrupt("return",null);case 11:return n.next=13,this.loadAudioFromBundleSync(s,e);case 13:return(i=n.sent)&&r&&this.audioMap.set(u,i),n.abrupt("return",i);case 16:case"end":return n.stop()}}),n,this)})));return function(e,t,r){return n.apply(this,arguments)}}(),f.loadAssetCo=function(){var n=r(a().mark((function n(e,t,r,u){var o,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===u&&(u=null),n.next=3,this.loadBundleSync(t);case 3:return o=n.sent,n.next=6,this.loadAssetSync(e,o,r);case 6:return s=n.sent,u&&u(s),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n,this)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),f.loadAssetSync=function(n,e,t){return new Promise((function(r){e.load(n,t,(function(t,a){if(t)return console.warn(e.name+"包没有"+n+"这个资源"),void r(null);r(a)}))}))},f.loadPrefabCo=function(){var n=r(a().mark((function n(e,t,r,u){var s,i,c,l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===t&&(t=d.bundleName),void 0===r&&(r=!0),void 0===u&&(u=null),s=e+t,!this.prefabMap.has(s)){n.next=8;break}return i=this.prefabMap.get(s),u&&u(i),n.abrupt("return",i);case 8:if(c=o.getBundle(t)){n.next=13;break}return n.next=12,this.loadBundleSync(t);case 12:c=n.sent;case 13:if(c){n.next=15;break}return n.abrupt("return",null);case 15:return n.next=17,this.loadPrefabFromBundleSync(c,e);case 17:return(l=n.sent)&&r&&this.prefabMap.set(s,l),u&&u(l),n.abrupt("return",l);case 21:case"end":return n.stop()}}),n,this)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),f.loadNodeAndInstantiateCo=function(){var n=r(a().mark((function n(e,t,r,u){var o,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===u&&(u=!0),n.next=3,this.loadPrefabCo(e,t,u);case 3:if(o=n.sent){n.next=6;break}return n.abrupt("return",null);case 6:return(s=p(o)).setParent(r),n.abrupt("return",s);case 9:case"end":return n.stop()}}),n,this)})));return function(e,t,r,a){return n.apply(this,arguments)}}(),f.loadAudioSync=function(n,e,t){var r=this;return void 0===t&&(t=!1),new Promise((function(a,u){var o=null;r.audioMap.has(e)?(o=r.audioMap.get(e),a(o)):n.load(e,s,(function(n,u){n?a(null):(o=u,t&&r.audioMap.set(e,o),a(o))}))}))},f.loadSkeletonDataFromBundleSync=function(n,e){return new Promise((function(t){n.load(e,c.SkeletonData,(function(n,e){if(n)return console.warn(n.message),void t(null);t(e)}))}))},f.loadSkeletonDataCo=function(){var n=r(a().mark((function n(e,t,r){var u,s,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===r&&(r=!0),u=e+t,!this.skeletonDataMap.has(u)){n.next=4;break}return n.abrupt("return",this.skeletonDataMap.get(u));case 4:if(s=o.getBundle(t)){n.next=9;break}return n.next=8,this.loadBundleSync(t);case 8:s=n.sent;case 9:if(s){n.next=11;break}return n.abrupt("return",null);case 11:return n.next=13,this.loadSkeletonDataFromBundleSync(s,e);case 13:return(i=n.sent)&&r&&this.skeletonDataMap.set(u,i),n.abrupt("return",i);case 16:case"end":return n.stop()}}),n,this)})));return function(e,t,r){return n.apply(this,arguments)}}(),f.loadSpriteFrameFromBundleSync=function(n,e){return new Promise((function(t){n.load(e,l,(function(n,e){if(n)return console.warn(n.message),void t(null);t(e)}))}))},f.loadSpriteFrameCo=function(){var n=r(a().mark((function n(e,t,r){var u,s,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===r&&(r=!0),u=e+t,!this.spriteFrameMap.has(u)){n.next=4;break}return n.abrupt("return",this.spriteFrameMap.get(u));case 4:if(s=o.getBundle(t)){n.next=9;break}return n.next=8,this.loadBundleSync(t);case 8:s=n.sent;case 9:if(s){n.next=11;break}return n.abrupt("return",null);case 11:return n.next=13,this.loadSpriteFrameFromBundleSync(s,e);case 13:return(i=n.sent)&&r&&this.spriteFrameMap.set(u,i),n.abrupt("return",i);case 16:case"end":return n.stop()}}),n,this)})));return function(e,t,r){return n.apply(this,arguments)}}(),t(u,null,[{key:"Instance",get:function(){return n.GetInstance.call(this)}}]),u}(f));u._RF.pop()}}}));

System.register("chunks:///_virtual/ResUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Enum2.ts","./SquareItem.ts","./Utils.ts","./Global.ts","./ResManager.ts","./Constant.ts","./PoolManager.ts"],(function(e){"use strict";var t,r,n,i,o,a,s,u,c,d,l,g,f,p,m,v,S;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,i=e.instantiate,o=e.UITransform,a=e.tween,s=e.Vec3,u=e.Label},function(e){c=e.default},function(e){d=e.NodePoolName,l=e.SquareDir},function(e){g=e.SquareItem},function(e){f=e.default},function(e){p=e.Global},function(e){m=e.default},function(e){v=e.Constant},function(e){S=e.default}],execute:function(){n._RF.push({},"5130aJqVv1GWLurgC5/EVY7","ResUtils",void 0);var h="gold",w="jewel",I="power";e("default",function(){function e(){}return e.playFlyIconAnimation=function(e,t,r,n,u){var c=i(p.Instance.prefabFlyIcon);c.setParent(u),this.setCurrencySprite(c.getChildByName("img"),r),f.setText(c.getChildByName("num"),"x"+n),e=u.getComponent(o).convertToNodeSpaceAR(e),t=u.getComponent(o).convertToNodeSpaceAR(t),c.setPosition(e);var d=e.subtract(t).length(),l=d/500;l>1&&(l=1),f.consoleLog("首末坐标距离",d);var g=30,m=.1;a(c).by(m,{position:new s(g,g)},{easing:"sineInOut"}).by(m,{position:new s(g,-30)},{easing:"sineInOut"}).by(m,{position:new s(15,15)},{easing:"sineInOut"}).by(m,{position:new s(15,-15)},{easing:"sineInOut"}).delay(.5).to(l,{position:t},{easing:"sineInOut"}).call((function(){c.destroy()})).start()},e.showToastWnd=function(e){var t=S.get(d.WndToast);t.setParent(p.Instance.node),f.setText(t.getChildByName("text"),e),p.scheduleCB((function(){S.put(t,d.WndToast)}),2,0)},e.setCurrencySprite=function(e,t){switch(t){case h:f.setSpriteFrame(e,p.Instance.currencySpriteArr[0]);break;case w:f.setSpriteFrame(e,p.Instance.currencySpriteArr[1]);break;case I:f.setSpriteFrame(e,p.Instance.currencySpriteArr[2]);break;case"favor":f.setSpriteFrame(e,p.Instance.currencySpriteArr[3])}},e.setFontsizeAuto=function(e,t){var r=e.getComponent(u).string.length-t;r<=0||(e.getComponent(u).fontSize-=r+2)},e.setAchiBaubleSprite=function(){var e=t(r().mark((function e(t,n,i){var o,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=-1),"-1"===n.substring(1)?(o=n.substring(0,1),n=o+"Lock",f.setMaterial(t,!0)):f.setMaterial(t,!1),a=v.spriteAchiIconPath+n,e.next=6,m.Instance.loadSpriteFrameCo(a,v.bundleName);case 6:s=e.sent,f.setSpriteFrame(t,s),i>-1&&this.setItemSize(t,i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),e.setUserHeadSprite=function(){var e=t(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=v.spriteHeadIconPath+n+v.suffixSpriteFrame,e.next=3,m.Instance.loadSpriteFrameCo(i,v.bundleName);case 3:o=e.sent,f.setSpriteFrame(t,o);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.setItemSize=function(e,t){var r=e.getComponent(o).width,n=e.getComponent(o).height;r<=t&&n<=t||(r>n?(n=n/r*t,r=t):(r=r/n*t,n=t),f.setSize(e,r,n))},e.getSingleCurrencyReward=function(e,t){void 0===t&&(t=-1);var r=Number(e.rGold),n=Number(e.rJewel),i=Number(e.rPower);-1!==t&&(r=Number(e.rGold[t]),n=Number(e.rJewel[t]),i=Number(e.rPower[t]));var o=h,a=r;return a<n?(o=w,a=n):a<i&&(o=I,a=i),{type:o,num:Number(a)}},e.createSquareItem=function(e,t,r,n,o){var a=this;void 0===n&&(n=c.gridCol),void 0===o&&(o=c.gridRow);for(var s=[],u=function(e,s){var u=i(r);u.setParent(t);var c=a.getSquarePosFromGrid(e,n,o);return u.setPosition(c),u.getComponent(g).init(e,s),u},d=0;d<c.squareGridSize;d++){var f=c.squareArr[e][l.UP],p=u(this.getSquareBirthGridID(f[d],n,o),d);s.push(p)}return s},e.createSquare=function(e,t,r,n,o){var a=this;void 0===n&&(n=c.gridCol),void 0===o&&(o=c.gridRow);for(var s=[],u=function(e,s){var u=i(r);u.setParent(t);var c=a.getSquarePosFromGrid(e,n,o);return u.setPosition(c),u},d=0;d<c.squareGridSize;d++){var g=c.squareArr[e][l.UP],f=u(this.getSquareBirthGridID(g[d],n,o));s.push(f)}return s},e.getSquarePosFromGrid=function(e,t,r){void 0===t&&(t=c.gridCol),void 0===r&&(r=c.gridRow);var n=-(t-1)/2*c.gridSize,i=-(r-1)/2*c.gridSize,o=n+e[0]*c.gridSize,a=i+e[1]*c.gridSize;return new s(o,a,0)},e.getSquareBirthGridID=function(e,t,r){void 0===t&&(t=c.gridCol),void 0===r&&(r=c.gridRow);var n=this.getGridFromIndex(e);return t!==c.gridCol&&r!==c.gridRow?[n.col,n.row]:[n.col+Math.floor((t-c.squareGridSize)/2),n.row+r]},e.getGridFromIndex=function(e,t){return void 0===t&&(t=c.squareGridSize),{col:e%t,row:Math.floor(e/t)}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ServerUtils.ts",["cc"],(function(r){"use strict";var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"fc3f5ztp/9FKaH3YWBx77bZ","ServerUtils",void 0);var t=r("default",function(){function r(){}return r.getTime=function(){return(new Date).toLocaleString().split("├")[0]},r.randomBySeed=function(r){return(9301*r+49297)%233280},r.deepClone=function(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=r.deepClone(e[n]));return t},r.strenCode=function(r){for(var e=[],t=0;t<r.length;t++){var n=r.charCodeAt(t);n<=127?e.push(n):n<=2047?e.push(192|n>>6,128|63&n):n<=65535?e.push(224|n>>12,128|(4032&n)>>6,128|63&n):e.push(240|n>>18,128|(258048&n)>>12,128|(4032&n)>>6,128|63&n)}return new Uint8Array(e)},r}());t.toFixed=function(r,e){return void 0===e&&(e=4),Math.floor(r*Math.pow(10,e))/Math.pow(10,e)},t.strdeCode=function(r){for(var e=[],t=0,n=0,o=r.length;t<o;)r[t]<128?(n=r[t],t+=1):r[t]<224?(n=((63&r[t])<<6)+(63&r[t+1]),t+=2):r[t]<240?(n=((15&r[t])<<12)+((63&r[t+1])<<6)+(63&r[t+2]),t+=3):(n=((7&r[t])<<18)+((63&r[t+1])<<12)+((63&r[t+1])<<6)+(63&r[t+2]),t+=4),e.push(n);return String.fromCharCode.apply(null,e)},t.buffer2ArrayBuffer=function(r){for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),n=0;n<r.length;++n)t[n]=r[n];return e},e._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"ce17crKn4lNMIMTaDK0VoHO","Singleton",void 0),n("default",function(){function n(){}return n.GetInstance=function(){return null==this._instance&&(this._instance=new this),this._instance},n.destroyInstance=function(){this._instance=null},n}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/SquareItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./EventManager.ts","./Utils.ts","./ResUtils.ts","./Enum2.ts","./Config.ts"],(function(t){"use strict";var o,s,i,e,n,a,r,u,h,c,l,f;return{setters:[function(t){o=t.inheritsLoose},function(t){s=t.cclegacy,i=t._decorator,e=t.Component},function(t){n=t.GameManager},function(t){a=t.EventManager,r=t.EventName},function(t){u=t.default},function(t){h=t.default},function(t){c=t.SquareStatus,l=t.SquareDir},function(t){f=t.default}],execute:function(){var R;s._RF.push({},"1552adQSLxNWKyiZ0OrCi9G","SquareItem",void 0);var p=i.ccclass;i.property,t("SquareItem",p("SquareItem")(R=function(t){function s(){for(var o,s=arguments.length,i=new Array(s),e=0;e<s;e++)i[e]=arguments[e];return(o=t.call.apply(t,[this].concat(i))||this).squareIndex=void 0,o.row=void 0,o.col=void 0,o.status=void 0,o}o(s,t);var i=s.prototype;return i.start=function(){},i.onEnable=function(){a.on(r.SQUARE_ActDROP,this.playDrop,this),a.on(r.SQUARE_ActLEFT,this.playMoveToLeft,this),a.on(r.SQUARE_ActRIGHT,this.playMoveToRight,this),a.on(r.SQUARE_ActROTATE,this.playRotate,this),a.on(r.SQUARE_DESTROY,this.playDestroy,this),a.on(r.SQUARE_ActFALLDOWN,this.playFallDown,this)},i.onDisable=function(){a.off(r.SQUARE_ActDROP,this.playDrop),a.off(r.SQUARE_ActLEFT,this.playMoveToLeft),a.off(r.SQUARE_ActRIGHT,this.playMoveToRight),a.off(r.SQUARE_ActROTATE,this.playRotate),a.off(r.SQUARE_DESTROY,this.playDestroy),a.off(r.SQUARE_ActFALLDOWN,this.playFallDown)},i.init=function(t,o,s){void 0===s&&(s=c.DROP),this.col=t[0],this.row=t[1],this.squareIndex=o,this.status=s},i.setCurPostion=function(t,o){void 0===t&&(t=f.gridCol),void 0===o&&(o=f.gridRow);var s=h.getSquarePosFromGrid([this.col,this.row],t,o);this.node.setPosition(s)},i.updateShape=function(t,o){if(this.status===c.SHOW&&this.squareIndex===o){var s=f.squareArr[t][l.UP][o],i=h.getGridFromIndex(s,f.squareGridSize);this.col=i.col,this.row=i.row,this.setCurPostion(f.squareGridSize,f.squareGridSize)}},i.playDrop=function(){this.status===c.DROP&&(this.row--,this.setCurPostion())},i.playRotate=function(){if(this.status===c.DROP){var t=n.Instance.getGridAfterRotate(this.col,this.row,this.squareIndex);this.col=t.col,this.row=t.row,this.setCurPostion()}},i.playMoveToLeft=function(){this.status===c.DROP&&(this.col--,this.setCurPostion())},i.playMoveToRight=function(){this.status===c.DROP&&(this.col++,this.setCurPostion())},i.playDestroy=function(t){var o=this;this.status===c.CLEAR&&u.finishAnimation(this.node,"squareClear",(function(){o.node.destroy(),t&&t()}))},i.playFallDown=function(t){this.status===c.FILL&&(this.row-=t,this.setCurPostion(),this.status=c.STACK)},s}(e))||R);s._RF.pop()}}}));

System.register("chunks:///_virtual/SquareItem2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResUtils.ts","./Config.ts","./Enum2.ts","./EventManager.ts","./Utils.ts"],(function(t){"use strict";var o,i,n,e,r,s,a,u,c,l;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.Component},function(t){r=t.default},function(t){s=t.default},function(t){a=t.SquareStatus},function(t){u=t.EventManager,c=t.EventName},function(t){l=t.default}],execute:function(){var h;i._RF.push({},"cbd56WnDydDqK/p5uTDTrLS","SquareItem",void 0);var f=n.ccclass;n.property,t("SquareItem",f("SquareItem")(h=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this).index=void 0,o.row=void 0,o.col=void 0,o.status=void 0,o}o(i,t);var n=i.prototype;return n.init=function(t,o){this.index=o,this.status=a.DROP,this.node.active=!1,u.on(c.SQUARE_DESTROY,this.playDestroy,this),u.on(c.SQUARE_ActFALLDOWN,this.playFallDown,this)},n.onDisable=function(){u.off(c.SQUARE_DESTROY,this.playDestroy),u.off(c.SQUARE_ActFALLDOWN,this.playFallDown)},n.render=function(t){this.renderPosition(t),this.node.active=!0},n.renderPosition=function(t,o){if(void 0===o&&(o=!1),!o){var i=this.getRowColFromManager(t);this.col=i.col,this.row=i.row}var n=r.getSquarePosFromGrid([this.col,this.row]);this.node.setPosition(n)},n.playDestroy=function(t){var o=this;this.status===a.CLEAR&&l.finishAnimation(this.node,"squareClear",(function(){o.node.destroy(),t&&t()}))},n.playFallDown=function(t){this.status===a.FILL&&(this.row-=t,this.renderPosition(null,!0),this.status=a.STACK)},n.getRowColFromManager=function(t){var o=t.form,i=t.rowColArr,n=t.dirIndex,e=s.squareArr[o][n][this.index],r=e%s.squareGridSize,a=Math.floor(e/s.squareGridSize);return{col:r+i.col,row:a+i.row}},i}(e))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/SquareManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataManager.ts","./Enum.ts","./ResUtils.ts","./Config.ts","./BattleManager.ts","./SquareItem2.ts","./Enum2.ts","./EventManager.ts","./CommonUtils.ts"],(function(e){"use strict";var r,t,n,a,o,i,u,s,c,d,l,p,f,h,m,S,g,v;return{setters:[function(e){r=e.inheritsLoose,t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e._decorator,i=e.instantiate,u=e.Component},function(e){s=e.default},function(e){c=e.InputTypeEnum},function(e){d=e.default},function(e){l=e.default},function(e){p=e.BattleManager},function(e){f=e.SquareItem},function(e){h=e.SquareStatus,m=e.GameStatus},function(e){S=e.EventManager,g=e.EventName},function(e){v=e.default}],execute:function(){var q;a._RF.push({},"22818mvTXhKX5XbeX3CbPKp","SquareManager",void 0);var w=o.ccclass;o.property,e("SquareManager",w("SquareManager")(q=function(e){function a(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(r=e.call.apply(e,[this].concat(n))||this).id=0,r.owner=void 0,r.rowColArr={row:0,col:0},r.dirIndex=void 0,r.status=void 0,r.isUpdate=void 0,r.timer=0,r}r(a,e);var o=a.prototype;return o.init=function(e){this.id=e.id,this.owner=e.owner,this.status=h.DROP,this.isUpdate=!0,this.createSquareItem(e)},o.createSquareItem=function(e){var r=s.Instance.actorMap.get(e.owner);r.curSquareNodeArr=[];for(var t=0;t<l.squareGridSize;t++){var n=i(p.Instance.prefabSquare),a=r.nodeSquareParent;n.setParent(a),n.getComponent(f).init(e,t),r.curSquareNodeArr.push(n)}},o.tick=function(){var e=t(n().mark((function e(r){var t,a,o,i,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUpdate){e.next=2;break}return e.abrupt("return");case 2:if(this.isUpdate=!1,s.Instance.myPlayerId===this.owner&&this.status===h.DROP){e.next=5;break}return e.abrupt("return");case 5:if((t=s.Instance.actorMap.get(this.owner)).localGameStatus===m.BEGIN){e.next=8;break}return e.abrupt("return");case 8:if(!v.isTouchBottom(t.allSquareNodeArr,t.curSquareNodeArr)){e.next=14;break}return e.next=12,t.checkGame();case 12:return this.status=h.STACK,e.abrupt("return");case 14:a=s.Instance.gameHandleComp.inputCol,o=s.Instance.gameHandleComp.inputDir,i=s.Instance.gameHandleComp.inputSpeed,this.timer+=r,u=0,this.timer>=i&&(u=-1,this.timer=0),S.emit(g.ClientSync,{type:c.SquareControl,id:this.id,owner:this.owner,rowColArr:{row:u,col:a},dirIndex:o}),(a||o)&&s.Instance.gameHandleComp.reset(),this.isUpdate=!0;case 23:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),o.render=function(e){var r=e.rowColArr,t=d.getSquarePosFromGrid([r.col,r.row],l.gridCol,l.gridRow);this.node.setPosition(t),this.rowColArr.col=r.col,this.rowColArr.row=r.row,this.dirIndex=e.dirIndex,this.renderSquare(e)},o.renderSquare=function(e){var r=s.Instance.actorMap.get(e.owner);if(r.curSquareNodeArr)for(var t=0;t<r.curSquareNodeArr.length;t++){var n=r.curSquareNodeArr[t];if(n){var a=null==n?void 0:n.getComponent(f);a&&a.render(e)}}},a}(u))||q);a._RF.pop()}}}));

System.register("chunks:///_virtual/State.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"44f5euMvL5D7I4t/JySklin","State",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/TaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Utils.ts"],(function(t){"use strict";var n,e,o,i,a,s,l,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Animation,a=t.tween,s=t.Component},function(t){l=t.EventManager,r=t.EventName},function(t){c=t.default}],execute:function(){var u;e._RF.push({},"ba8abqqmjVIc6yMJad61ChB","TaskItem",void 0);var p=o.ccclass;o.property,t("TaskItem",p("TaskItem")(u=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.start=function(){},o.onEnable=function(){c.playAnimation(this.node,"idle"),l.on(r.TASK_ScrollENDED,this.playIdle,this),l.on(r.TASK_ScrollBEGAN,this.playSwing,this)},o.onDisable=function(){l.off(r.TASK_ScrollENDED,this.playIdle),l.off(r.TASK_ScrollBEGAN,this.playSwing)},o.playIdle=function(){this.node.getComponent(i).stop(),a(this.node.getChildByName("bg")).to(.3,{angle:-30}).start()},o.playSwing=function(){c.playAnimation(this.node,"swing")},e}(s))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/TouchManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(s){"use strict";var n,o,t,e,i;return{setters:[function(s){n=s.inheritsLoose},function(s){o=s.cclegacy,t=s._decorator,e=s.Node,i=s.Component}],execute:function(){var r;o._RF.push({},"3b434SaYqZPPKMqWxt4Y0DB","TouchManager",void 0);var h=t.ccclass;t.property,s("TouchManager",h("TouchManager")(r=function(s){function o(){for(var n,o=arguments.length,t=new Array(o),e=0;e<o;e++)t[e]=arguments[e];return(n=s.call.apply(s,[this].concat(t))||this).onPressCB=null,n.onPressEndCB=null,n.onTouchStartCB=null,n.onTouchMoveCB=null,n.onTouchMoveEndCB=null,n.onTouchEndCB=null,n.isPress=!1,n.isPressInCurTouch=!1,n.isMoving=!1,n.curPressSec=0,n.pressSign=1,n.pressEvent=null,n}n(o,s);var t=o.prototype;return t.start=function(){this.node.on(e.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(e.EventType.TOUCH_END,this.onPressEnd,this),this.node.on(e.EventType.TOUCH_MOVE,this.onTouchMove,this)},t.update=function(s){!this.isPress||this.isPressInCurTouch||this.isMoving?this.curPressSec=0:(this.curPressSec+=s,this.curPressSec>this.pressSign&&this.onPressCB&&(this.onPressCB(this.pressEvent),this.isPressInCurTouch=!0))},t.onTouchStart=function(s){this.isPress=!0,this.pressEvent=s,this.onTouchStartCB&&this.onTouchStartCB(s)},t.onTouchMove=function(s){var n=s.getDelta();(n.x||n.y)&&(this.isMoving=!0,this.onTouchMoveCB&&this.onTouchMoveCB(s))},t.onPressEnd=function(s){return this.isPress=!1,this.isMoving?(this.isMoving=!1,void(this.onTouchMoveEndCB&&this.onTouchMoveEndCB(s))):this.isPressInCurTouch?(this.isPressInCurTouch=!1,void(this.onPressEndCB&&this.onPressEndCB(s))):void(this.onTouchEndCB&&this.onTouchEndCB(s))},o}(i))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./Config.ts","./Global.ts"],(function(n){"use strict";var t,o,e,i,r,a,c,u,s,l,f,g,m,p;return{setters:[function(n){t=n.cclegacy,o=n.sys,e=n.Node,i=n.Label,r=n.EditBox,a=n.Sprite,c=n.Component,u=n.color,s=n.UITransform,l=n.Size,f=n.error,g=n.Animation},function(n){m=n.default},function(n){p=n.Global}],execute:function(){t._RF.push({},"50bd36z49RPg4nJilc3sz6g","Utils",void 0);n("default",function(){function n(){}return n.getLocalAttr=function(n,t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=o.localStorage.getItem(n);null===i||""===i||void 0===i||" "===i?t&&t():e&&e(i)},n.consoleLog=function(){var n;m.isEnableConsoleLog&&(n=console).log.apply(n,arguments)},n.setText=function(n,t){if(n instanceof e){var o=n.getComponent(i);if(!(null!=o&&null!=o||null!=(o=n.getComponent(r))&&null!=o))return;o.string=t}else(n instanceof i||n instanceof r)&&(n.string=t)},n.setSpriteFrame=function(n,t){n instanceof a?n.spriteFrame=t:n instanceof e?n.getComponent(a).spriteFrame=t:n instanceof c&&(n.node.getComponent(a).spriteFrame=t)},n.setMaterial=function(n,t){n.getComponent(a).customMaterial=t?p.Instance.materialGray:p.Instance.materialDefault},n.setColor=function(n,t){n.getComponent(a)?n.getComponent(a).color=u().fromHEX(t):n.getComponent(i)&&(n.getComponent(i).color=u().fromHEX(t))},n.setSize=function(n,t,o){n.getComponent(s).setContentSize(new l(t,o))},n.random=function(n,t){var o=Math.random()*(t-n+1)+n;return Math.floor(o)},n.unique=function(n){var t=new Set(n);return Array.from(t)},n.numToLetterCase=function(n,t){var o;if(!(n>25||n<0))return o=t?n+65:n+97,String.fromCharCode(o);f(n,"不在字母表范围内")},n.letterCaseToNum=function(n){if(!(n.length>1)){var t=n.charCodeAt(0);return t<97?t-65:t-97}f("字母转换数字失败(字符串过长)")},n.playAnimation=function(n,t){n instanceof e?n.getComponent(g).play(t):n instanceof c&&n.node.getComponent(g).play(t)},n.finishAnimation=function(n,t,o){var i;n instanceof e?i=n.getComponent(g):n instanceof c&&(i=n.node.getComponent(g)),i.play(t),i.once("finished",(function(){o&&o()}),this)},n.isBoundContainsPointLocal=function(n,t){var o=null==n?void 0:n.getComponent(s);return!!o&&o.getBoundingBox().contains(t)},n.isBoundContainsRectLocal=function(n,t){var o=n.getComponent(s).getBoundingBox(),e=t.getComponent(s).getBoundingBox();return o.containsRect(e)},n.isBoundIntersectsRectLocal=function(n,t){var o=n.getComponent(s).getBoundingBox(),e=t.getComponent(s).getBoundingBox();return o.intersects(e)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/WndAchi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./ResUtils.ts","./Utils.ts","./WndManager.ts","./Enum2.ts"],(function(e){"use strict";var t,n,i,r,a,o,s,c,l,u,h,d,p,f,g,y,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.Prefab,h=e.ProgressBar,d=e.instantiate,p=e.Component},function(e){f=e.default},function(e){g=e.default},function(e){y=e.default},function(e){m=e.WndManager},function(e){b=e.WndID}],execute:function(){var w,N,v,C,I,B,P,R,x,D,S,T,A,z,W,k,L;s._RF.push({},"6db92BQ7jVBTL0Uy4lHRxEk","WndAchi",void 0);var _=c.ccclass,E=c.property;e("WndAchi",(w=_("WndAchi"),N=E({type:l,displayName:"成就标题节点"}),v=E({type:l,displayName:"成就描述节点"}),C=E({type:l,displayName:"当前阶段成就节点"}),I=E({type:l,displayName:"下一阶段成就节点"}),B=E({type:l,displayName:"成就奖励父节点"}),P=E({type:u,displayName:"成就奖励预制体"}),R=E({type:h,displayName:"成就进度条节点"}),w((S=t((D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"nodeTitle",S,r(t)),i(t,"nodeDesc",T,r(t)),i(t,"nodeCurImg",A,r(t)),i(t,"nodeNextImg",z,r(t)),i(t,"nodeRewardParent",W,r(t)),i(t,"nodeRewardPrefab",k,r(t)),i(t,"nodeProgressBar",L,r(t)),t.achiName=void 0,t.achiStage=void 0,t.achiInfo={},t}n(t,e);var s=t.prototype;return s.start=function(){},s.onEnable=function(){this.init(),this.createReward(),this.setDisplay()},s.init=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.achiInfo=f.achiConfig[f.chooseAchiID],this.achiName=y.numToLetterCase(f.chooseAchiID,!1),this.achiStage=-1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.createReward=function(){for(var e=0===this.nodeRewardParent.children.length,t=0;t<f.achiStageCount;t++){var n=void 0;e?(n=d(this.nodeRewardPrefab)).setParent(this.nodeRewardParent):n=this.nodeRewardParent.children[t];var i=g.getSingleCurrencyReward(this.achiInfo,t);y.setText(n.getChildByName("num"),"x"+i.num),g.setCurrencySprite(n.getChildByName("img"),i.type)}},s.setDisplay=function(){g.setAchiBaubleSprite(this.nodeCurImg,this.achiName+this.achiStage),g.setAchiBaubleSprite(this.nodeNextImg,this.achiName+(this.achiStage+1));var e=this.achiStage<0?0:this.achiStage;y.setText(this.nodeTitle,this.achiStage<0?"暂未解锁":this.achiInfo.name[e]);var t=this.achiInfo.desc;y.setText(this.nodeDesc.getChildByName("text1"),t[0]),y.setText(this.nodeDesc.getChildByName("text2"),t[1]);var n=Number(this.achiInfo.count[e]),i="0/"+n;y.setText(this.nodeDesc.getChildByName("num"),i),this.nodeProgressBar.progress=0/n},s.onSearchBtnClick=function(){m.Instance.show(b.WndAchiDetails)},s.onCloseBtnClick=function(){m.Instance.hide(b.WndAchi)},t}(p)).prototype,"nodeTitle",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"nodeDesc",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"nodeCurImg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"nodeNextImg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(D.prototype,"nodeRewardParent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(D.prototype,"nodeRewardPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(D.prototype,"nodeProgressBar",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=D))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/WndAchiDetails.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WndManager.ts","./Enum2.ts","./Config.ts","./Utils.ts","./ResUtils.ts"],(function(t){"use strict";var e,n,i,r,a,c,o,s,u,l,h,f,p,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,u=t.Node,l=t.Component},function(t){h=t.WndManager},function(t){f=t.WndID},function(t){p=t.default},function(t){d=t.default},function(t){y=t.default}],execute:function(){var m,g,v,A,D;o._RF.push({},"b540dfW7bZA3LgXvLs0+J+e","WndAchiDetails",void 0);var W=s.ccclass,b=s.property;t("WndAchiDetails",(m=W("WndAchiDetails"),g=b({type:u,displayName:"成就物品父节点"}),m((D=e((A=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"nodeAchiParent",D,r(e)),e.achiName=void 0,e}n(e,t);var o=e.prototype;return o.onEnable=function(){this.init(),this.setDisplay()},o.init=function(){var t=a(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.achiName=d.numToLetterCase(p.chooseAchiID,!1);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.setDisplay=function(){var t=this;this.nodeAchiParent.children.forEach((function(e,n){y.setAchiBaubleSprite(e.getChildByName("img"),t.achiName+(n-1),130)}))},o.onCloseBtnClick=function(){h.Instance.hide(f.WndAchiDetails)},e}(l)).prototype,"nodeAchiParent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=A))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/WndBattleRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enum.ts","./Enum2.ts","./NetworkManager.ts","./Utils.ts","./ResUtils.ts","./DataManager.ts","./WndManager.ts","./ServerUtils.ts"],(function(e){"use strict";var t,n,r,a,i,o,s,l,c,u,d,f,p,m,h,g,y,v,S,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Node,u=e.director,d=e.Component},function(e){f=e.ApiMsgEnum},function(e){p=e.SceneName,m=e.WndID},function(e){h=e.NetworkManager},function(e){g=e.default},function(e){y=e.default},function(e){v=e.default},function(e){S=e.WndManager},function(e){I=e.default}],execute:function(){var b,B,M,R,N,w,W,k,x,G,z;s._RF.push({},"5429cc13/RBWoSctZV8gR3z","WndBattleRoom",void 0);var C=l.ccclass,P=l.property;e("WndBattleRoom",(b=C("WndBattleRoom"),B=P({type:c,displayName:"本人信息节点"}),M=P({type:c,displayName:"对手信息节点"}),R=P({type:c,displayName:"开始游戏节点"}),N=P({type:c,displayName:"标题节点"}),b((k=t((W=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"nodeSelf",k,a(t)),r(t,"nodeOther",x,a(t)),r(t,"nodeStartBtn",G,a(t)),r(t,"nodeTitle",z,a(t)),t}n(t,e);var s=t.prototype;return s.init=function(){this.renderPlayers({room:v.Instance.roomInfo})},s.onEnable=function(){this.init(),h.Instance.listenMsg(f.MsgRoom,this.renderPlayers,this),h.Instance.listenMsg(f.MsgGameStart,this.handleGameStart,this)},s.onDestroy=function(){h.Instance.unlistenMsg(f.MsgRoom,this.renderPlayers,this),h.Instance.unlistenMsg(f.MsgGameStart,this.handleGameStart,this)},s.renderPlayers=function(e){for(var t=e.room.players,n=function(e,t){if(g.setText(e.getChildByName("name"),t?t.nickName:"?"),t){var n=g.random(0,1);y.setUserHeadSprite(e.getChildByName("img"),String(n))}else g.setSpriteFrame(e.getChildByName("img"),null)},r=0;r<2;r++){var a=t[r];n((null==a?void 0:a.id)===v.Instance.myPlayerId?this.nodeSelf:this.nodeOther,a)}this.renderWnd(t)},s.renderWnd=function(e){this.nodeStartBtn.active=e.length>1,g.setText(this.nodeTitle,e.length>1?"匹配成功":"正在匹配")},s.onLeaveBtnClick=function(){var e=i(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Instance.callApi(f.ApiRoomLeave,{});case 2:if(t=e.sent,n=t.success,t.res,r=t.error,n){e.next=9;break}return console.log(r),e.abrupt("return");case 9:v.Instance.roomInfo=null,this.close();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.onStartBtnClick=function(){var e=i(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Instance.callApi(f.ApiGameStart,{roomId:v.Instance.roomInfo.id});case 2:if(t=e.sent,n=t.success,t.res,r=t.error,n){e.next=9;break}return console.log(r),e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.handleGameStart=function(e){var t=e.state;v.Instance.state=t,v.Instance.lastState=I.deepClone(v.Instance.state),u.loadScene(p.GameBattle),this.close()},s.close=function(){S.Instance.hide(m.WndBattleRoom)},t}(d)).prototype,"nodeSelf",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(W.prototype,"nodeOther",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(W.prototype,"nodeStartBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(W.prototype,"nodeTitle",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=W))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/WndManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts","./Global.ts","./Singleton.ts"],(function(e){"use strict";var n,t,r,a,o,s,c,i,u,f,p;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e._decorator,c=e.error,i=e.instantiate},function(e){u=e.default},function(e){f=e.Global},function(e){p=e.default}],execute:function(){var l;o._RF.push({},"09c71QJC61BXaV/bp+XS1nO","WndManager",void 0);var d=s.ccclass;s.property,e("WndManager",d("WndManager")(l=function(e){function o(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).prefabNodeMap=new Map,n}n(o,e);var s=o.prototype;return s.show=function(){var e=r(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPrefabNodeCo(n);case 2:if(t=e.sent){e.next=6;break}return c("can not find prefab "+n.toString()),e.abrupt("return",null);case 6:t.active=!0,t.setSiblingIndex(t.parent.children.length+1);case 8:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),s.hide=function(e){var n=e.toString(),t=f.Instance.nodeWndParent.getChildByName(n);t.setSiblingIndex(0),t.active=!1},s.getPrefabNodeCo=function(){var e=r(a().mark((function e(n){var t,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.prefabNodeMap.has(n)&&null!=this.prefabNodeMap.get(n)){e.next=14;break}return t=n.toString(),e.next=4,u.Instance.loadPrefabCo("WndPrefab/"+t);case 4:if(r=e.sent){e.next=8;break}return c("can not find prefab "+t),e.abrupt("return",null);case 8:return(o=i(r)).setParent(f.Instance.nodeWndParent),this.prefabNodeMap.set(n,o),e.abrupt("return",o);case 14:return e.abrupt("return",this.prefabNodeMap.get(n));case 15:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),t(o,null,[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),o}(p))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/WndTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Utils.ts","./ResUtils.ts","./EventManager.ts","./WndManager.ts","./Enum2.ts"],(function(e){"use strict";var t,a,n,r,i,l,o,s,u,c,d,y,p,f,m,g,h,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.Node,s=e.Prefab,u=e.instantiate,c=e.Vec3,d=e.Component},function(e){y=e.default},function(e){p=e.default},function(e){f=e.default},function(e){m=e.EventManager,g=e.EventName},function(e){h=e.WndManager},function(e){C=e.WndID}],execute:function(){var b,N,k,w,v,P,T,B,D,W,R,S,x;i._RF.push({},"dc463ZmGSVH2ZW1MCDr1pQp","WndTask",void 0);var L=l.ccclass,I=l.property;e("WndTask",(b=L("WndTask"),N=I({type:o,displayName:"日活奖励Layout节点"}),k=I({type:s,displayName:"日活奖励预制体"}),w=I({type:s,displayName:"任务卡预制体"}),v=I({type:s,displayName:"墙纸预制体"}),P=I({type:o,displayName:"墙纸content节点"}),b((D=t((B=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n(t,"nodeDailyRewardParent",D,r(t)),n(t,"prefabDailyReward",W,r(t)),n(t,"prefabTaskItem",R,r(t)),n(t,"prefabWallLine",S,r(t)),n(t,"nodeWallLineParent",x,r(t)),t.taskItemPosArr=[[-280,-60],[-105,-85],[85,-85],[288,-65]],t}a(t,e);var i=t.prototype;return i.start=function(){this.createTask(),this.createDailyReward(),this.nodeWallLineParent.parent.parent.on("scroll-began",(function(){m.emit(g.TASK_ScrollBEGAN)}),this),this.nodeWallLineParent.parent.parent.on("scroll-ended",(function(){m.emit(g.TASK_ScrollENDED)}),this)},i.createTask=function(){for(var e=y.taskConfig.length-y.taskDailyCount,t=null,a=0;a<e;a++){var n=a%4;0===n&&(t=u(this.prefabWallLine)).setParent(this.nodeWallLineParent);var r=u(this.prefabTaskItem);r.setParent(t);var i=new c(this.taskItemPosArr[n][0],this.taskItemPosArr[n][1]);r.setPosition(i);var l=a+y.taskDailyCount,o=y.taskConfig[l],s=r.getChildByName("bg");p.setText(s.getChildByName("textProCount"),o.count);var d=s.getChildByName("title");p.setText(d,o.name),f.setFontsizeAuto(d,7);var m=f.getSingleCurrencyReward(o);p.setText(s.getChildByName("rewardCurrency").getChildByName("num"),"x"+m.num),f.setCurrencySprite(s.getChildByName("rewardCurrency").getChildByName("img"),m.type),p.setText(s.getChildByName("rewardScore").getChildByName("num"),"x"+o.rScore)}},i.createDailyReward=function(){for(var e=0;e<y.taskDailyCount;e++){var t=u(this.prefabDailyReward);t.setParent(this.nodeDailyRewardParent);var a=y.taskConfig[e];p.setText(t.getChildByName("mark").getChildByName("num"),String(a.count));var n=f.getSingleCurrencyReward(a);p.setText(t.getChildByName("reward").getChildByName("num"),"x"+n.num),f.setCurrencySprite(t.getChildByName("reward").getChildByName("img"),n.type)}},i.onCloseBtnClick=function(){h.Instance.hide(C.WndTask)},t}(d)).prototype,"nodeDailyRewardParent",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(B.prototype,"prefabDailyReward",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(B.prototype,"prefabTaskItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(B.prototype,"prefabWallLine",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(B.prototype,"nodeWallLineParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=B))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/WndTimer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./WndManager.ts","./Enum2.ts"],(function(n){"use strict";var e,t,i,r,a,o,c,s,u,l,p,m;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,c=n.Animation,s=n.Component},function(n){u=n.EventManager,l=n.EventName},function(n){p=n.WndManager},function(n){m=n.WndID}],execute:function(){var d,f,y,h,v;a._RF.push({},"81b11H5/2JOwIcaf9xB2Q5z","WndTimer",void 0);var g=o.ccclass,E=o.property;n("WndTimer",(d=g("WndTimer"),f=E({type:c,displayName:"动画组件"}),d((v=e((h=function(n){function e(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a))||this,i(e,"anim",v,r(e)),e}return t(e,n),e.prototype.onEnable=function(){this.anim.play("countdown"),this.anim.on(c.EventType.FINISHED,(function(){u.emit(l.SQUARE_Birth),p.Instance.hide(m.WndTimer)}))},e}(s)).prototype,"anim",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});